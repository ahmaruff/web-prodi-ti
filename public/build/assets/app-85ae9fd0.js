function Sc(t,e){return function(){return t.apply(e,arguments)}}const{toString:Hd}=Object.prototype,{getPrototypeOf:Lo}=Object,Oi=(t=>e=>{const n=Hd.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),je=t=>(t=t.toLowerCase(),e=>Oi(e)===t),Ai=t=>e=>typeof e===t,{isArray:Mn}=Array,Zn=Ai("undefined");function $d(t){return t!==null&&!Zn(t)&&t.constructor!==null&&!Zn(t.constructor)&&xe(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const xc=je("ArrayBuffer");function jd(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&xc(t.buffer),e}const Vd=Ai("string"),xe=Ai("function"),kc=Ai("number"),Ni=t=>t!==null&&typeof t=="object",Wd=t=>t===!0||t===!1,Lr=t=>{if(Oi(t)!=="object")return!1;const e=Lo(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Ud=je("Date"),Kd=je("File"),qd=je("Blob"),Jd=je("FileList"),Yd=t=>Ni(t)&&xe(t.pipe),Xd=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||xe(t.append)&&((e=Oi(t))==="formdata"||e==="object"&&xe(t.toString)&&t.toString()==="[object FormData]"))},Gd=je("URLSearchParams"),Qd=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ur(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Mn(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let l;for(r=0;r<o;r++)l=s[r],e.call(null,t[l],l,t)}}function wc(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Ec=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Mc=t=>!Zn(t)&&t!==Ec;function js(){const{caseless:t}=Mc(this)&&this||{},e={},n=(r,i)=>{const s=t&&wc(e,i)||i;Lr(e[s])&&Lr(r)?e[s]=js(e[s],r):Lr(r)?e[s]=js({},r):Mn(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&ur(arguments[r],n);return e}const Zd=(t,e,n,{allOwnKeys:r}={})=>(ur(e,(i,s)=>{n&&xe(i)?t[s]=Sc(i,n):t[s]=i},{allOwnKeys:r}),t),eh=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),th=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},nh=(t,e,n,r)=>{let i,s,o;const l={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=n!==!1&&Lo(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},rh=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},ih=t=>{if(!t)return null;if(Mn(t))return t;let e=t.length;if(!kc(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},sh=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Lo(Uint8Array)),oh=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},lh=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},ah=je("HTMLFormElement"),ch=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Dl=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),uh=je("RegExp"),vc=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};ur(n,(i,s)=>{e(i,s,t)!==!1&&(r[s]=i)}),Object.defineProperties(t,r)},fh=t=>{vc(t,(e,n)=>{if(xe(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(xe(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},dh=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Mn(t)?r(t):r(String(t).split(e)),n},hh=()=>{},ph=(t,e)=>(t=+t,Number.isFinite(t)?t:e),ls="abcdefghijklmnopqrstuvwxyz",_l="0123456789",Cc={DIGIT:_l,ALPHA:ls,ALPHA_DIGIT:ls+ls.toUpperCase()+_l},mh=(t=16,e=Cc.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function gh(t){return!!(t&&xe(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const yh=t=>{const e=new Array(10),n=(r,i)=>{if(Ni(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Mn(r)?[]:{};return ur(r,(o,l)=>{const a=n(o,i+1);!Zn(a)&&(s[l]=a)}),e[i]=void 0,s}}return r};return n(t,0)},bh=je("AsyncFunction"),Sh=t=>t&&(Ni(t)||xe(t))&&xe(t.then)&&xe(t.catch),S={isArray:Mn,isArrayBuffer:xc,isBuffer:$d,isFormData:Xd,isArrayBufferView:jd,isString:Vd,isNumber:kc,isBoolean:Wd,isObject:Ni,isPlainObject:Lr,isUndefined:Zn,isDate:Ud,isFile:Kd,isBlob:qd,isRegExp:uh,isFunction:xe,isStream:Yd,isURLSearchParams:Gd,isTypedArray:sh,isFileList:Jd,forEach:ur,merge:js,extend:Zd,trim:Qd,stripBOM:eh,inherits:th,toFlatObject:nh,kindOf:Oi,kindOfTest:je,endsWith:rh,toArray:ih,forEachEntry:oh,matchAll:lh,isHTMLForm:ah,hasOwnProperty:Dl,hasOwnProp:Dl,reduceDescriptors:vc,freezeMethods:fh,toObjectSet:dh,toCamelCase:ch,noop:hh,toFiniteNumber:ph,findKey:wc,global:Ec,isContextDefined:Mc,ALPHABET:Cc,generateString:mh,isSpecCompliantForm:gh,toJSONObject:yh,isAsyncFn:bh,isThenable:Sh};function I(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}S.inherits(I,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:S.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Tc=I.prototype,Oc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Oc[t]={value:t}});Object.defineProperties(I,Oc);Object.defineProperty(Tc,"isAxiosError",{value:!0});I.from=(t,e,n,r,i,s)=>{const o=Object.create(Tc);return S.toFlatObject(t,o,function(a){return a!==Error.prototype},l=>l!=="isAxiosError"),I.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const xh=null;function Vs(t){return S.isPlainObject(t)||S.isArray(t)}function Ac(t){return S.endsWith(t,"[]")?t.slice(0,-2):t}function Il(t,e,n){return t?t.concat(e).map(function(i,s){return i=Ac(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function kh(t){return S.isArray(t)&&!t.some(Vs)}const wh=S.toFlatObject(S,{},null,function(e){return/^is[A-Z]/.test(e)});function Ri(t,e,n){if(!S.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=S.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,g){return!S.isUndefined(g[m])});const r=n.metaTokens,i=n.visitor||u,s=n.dots,o=n.indexes,a=(n.Blob||typeof Blob<"u"&&Blob)&&S.isSpecCompliantForm(e);if(!S.isFunction(i))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(S.isDate(p))return p.toISOString();if(!a&&S.isBlob(p))throw new I("Blob is not supported. Use a Buffer instead.");return S.isArrayBuffer(p)||S.isTypedArray(p)?a&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,m,g){let y=p;if(p&&!g&&typeof p=="object"){if(S.endsWith(m,"{}"))m=r?m:m.slice(0,-2),p=JSON.stringify(p);else if(S.isArray(p)&&kh(p)||(S.isFileList(p)||S.endsWith(m,"[]"))&&(y=S.toArray(p)))return m=Ac(m),y.forEach(function(w,A){!(S.isUndefined(w)||w===null)&&e.append(o===!0?Il([m],A,s):o===null?m:m+"[]",c(w))}),!1}return Vs(p)?!0:(e.append(Il(g,m,s),c(p)),!1)}const f=[],d=Object.assign(wh,{defaultVisitor:u,convertValue:c,isVisitable:Vs});function h(p,m){if(!S.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(p),S.forEach(p,function(y,b){(!(S.isUndefined(y)||y===null)&&i.call(e,y,S.isString(b)?b.trim():b,m,d))===!0&&h(y,m?m.concat(b):[b])}),f.pop()}}if(!S.isObject(t))throw new TypeError("data must be an object");return h(t),e}function Pl(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Bo(t,e){this._pairs=[],t&&Ri(t,this,e)}const Nc=Bo.prototype;Nc.append=function(e,n){this._pairs.push([e,n])};Nc.toString=function(e){const n=e?function(r){return e.call(this,r,Pl)}:Pl;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function Eh(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Rc(t,e,n){if(!e)return t;const r=n&&n.encode||Eh,i=n&&n.serialize;let s;if(i?s=i(e,n):s=S.isURLSearchParams(e)?e.toString():new Bo(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class Mh{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){S.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Ll=Mh,Dc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},vh=typeof URLSearchParams<"u"?URLSearchParams:Bo,Ch=typeof FormData<"u"?FormData:null,Th=typeof Blob<"u"?Blob:null,Oh=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Ah=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Le={isBrowser:!0,classes:{URLSearchParams:vh,FormData:Ch,Blob:Th},isStandardBrowserEnv:Oh,isStandardBrowserWebWorkerEnv:Ah,protocols:["http","https","file","blob","url","data"]};function Nh(t,e){return Ri(t,new Le.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Le.isNode&&S.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function Rh(t){return S.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Dh(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function _c(t){function e(n,r,i,s){let o=n[s++];const l=Number.isFinite(+o),a=s>=n.length;return o=!o&&S.isArray(i)?i.length:o,a?(S.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!l):((!i[o]||!S.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&S.isArray(i[o])&&(i[o]=Dh(i[o])),!l)}if(S.isFormData(t)&&S.isFunction(t.entries)){const n={};return S.forEachEntry(t,(r,i)=>{e(Rh(r),i,n,0)}),n}return null}const _h={"Content-Type":void 0};function Ih(t,e,n){if(S.isString(t))try{return(e||JSON.parse)(t),S.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Di={transitional:Dc,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=S.isObject(e);if(s&&S.isHTMLForm(e)&&(e=new FormData(e)),S.isFormData(e))return i&&i?JSON.stringify(_c(e)):e;if(S.isArrayBuffer(e)||S.isBuffer(e)||S.isStream(e)||S.isFile(e)||S.isBlob(e))return e;if(S.isArrayBufferView(e))return e.buffer;if(S.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Nh(e,this.formSerializer).toString();if((l=S.isFileList(e))||r.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return Ri(l?{"files[]":e}:e,a&&new a,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),Ih(e)):e}],transformResponse:[function(e){const n=this.transitional||Di.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&S.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?I.from(l,I.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Le.classes.FormData,Blob:Le.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};S.forEach(["delete","get","head"],function(e){Di.headers[e]={}});S.forEach(["post","put","patch"],function(e){Di.headers[e]=S.merge(_h)});const Fo=Di,Ph=S.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Lh=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&Ph[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Bl=Symbol("internals");function _n(t){return t&&String(t).trim().toLowerCase()}function Br(t){return t===!1||t==null?t:S.isArray(t)?t.map(Br):String(t)}function Bh(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const Fh=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function as(t,e,n,r,i){if(S.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!S.isString(e)){if(S.isString(r))return e.indexOf(r)!==-1;if(S.isRegExp(r))return r.test(e)}}function zh(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function Hh(t,e){const n=S.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class _i{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(l,a,c){const u=_n(a);if(!u)throw new Error("header name must be a non-empty string");const f=S.findKey(i,u);(!f||i[f]===void 0||c===!0||c===void 0&&i[f]!==!1)&&(i[f||a]=Br(l))}const o=(l,a)=>S.forEach(l,(c,u)=>s(c,u,a));return S.isPlainObject(e)||e instanceof this.constructor?o(e,n):S.isString(e)&&(e=e.trim())&&!Fh(e)?o(Lh(e),n):e!=null&&s(n,e,r),this}get(e,n){if(e=_n(e),e){const r=S.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return Bh(i);if(S.isFunction(n))return n.call(this,i,r);if(S.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=_n(e),e){const r=S.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||as(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=_n(o),o){const l=S.findKey(r,o);l&&(!n||as(r,r[l],l,n))&&(delete r[l],i=!0)}}return S.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||as(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return S.forEach(this,(i,s)=>{const o=S.findKey(r,s);if(o){n[o]=Br(i),delete n[s];return}const l=e?zh(s):String(s).trim();l!==s&&delete n[s],n[l]=Br(i),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return S.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&S.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[Bl]=this[Bl]={accessors:{}}).accessors,i=this.prototype;function s(o){const l=_n(o);r[l]||(Hh(i,o),r[l]=!0)}return S.isArray(e)?e.forEach(s):s(e),this}}_i.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);S.freezeMethods(_i.prototype);S.freezeMethods(_i);const Ue=_i;function cs(t,e){const n=this||Fo,r=e||n,i=Ue.from(r.headers);let s=r.data;return S.forEach(t,function(l){s=l.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function Ic(t){return!!(t&&t.__CANCEL__)}function fr(t,e,n){I.call(this,t??"canceled",I.ERR_CANCELED,e,n),this.name="CanceledError"}S.inherits(fr,I,{__CANCEL__:!0});function $h(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new I("Request failed with status code "+n.status,[I.ERR_BAD_REQUEST,I.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const jh=Le.isStandardBrowserEnv?function(){return{write:function(n,r,i,s,o,l){const a=[];a.push(n+"="+encodeURIComponent(r)),S.isNumber(i)&&a.push("expires="+new Date(i).toGMTString()),S.isString(s)&&a.push("path="+s),S.isString(o)&&a.push("domain="+o),l===!0&&a.push("secure"),document.cookie=a.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Vh(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Wh(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function Pc(t,e){return t&&!Vh(e)?Wh(t,e):e}const Uh=Le.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const l=S.isString(o)?i(o):o;return l.protocol===r.protocol&&l.host===r.host}}():function(){return function(){return!0}}();function Kh(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function qh(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(a){const c=Date.now(),u=r[s];o||(o=c),n[i]=a,r[i]=c;let f=s,d=0;for(;f!==i;)d+=n[f++],f=f%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const h=u&&c-u;return h?Math.round(d*1e3/h):void 0}}function Fl(t,e){let n=0;const r=qh(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,l=s-n,a=r(l),c=s<=o;n=s;const u={loaded:s,total:o,progress:o?s/o:void 0,bytes:l,rate:a||void 0,estimated:a&&o&&c?(o-s)/a:void 0,event:i};u[e?"download":"upload"]=!0,t(u)}}const Jh=typeof XMLHttpRequest<"u",Yh=Jh&&function(t){return new Promise(function(n,r){let i=t.data;const s=Ue.from(t.headers).normalize(),o=t.responseType;let l;function a(){t.cancelToken&&t.cancelToken.unsubscribe(l),t.signal&&t.signal.removeEventListener("abort",l)}S.isFormData(i)&&(Le.isStandardBrowserEnv||Le.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.setContentType("multipart/form-data;",!1));let c=new XMLHttpRequest;if(t.auth){const h=t.auth.username||"",p=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(h+":"+p))}const u=Pc(t.baseURL,t.url);c.open(t.method.toUpperCase(),Rc(u,t.params,t.paramsSerializer),!0),c.timeout=t.timeout;function f(){if(!c)return;const h=Ue.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),m={data:!o||o==="text"||o==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:h,config:t,request:c};$h(function(y){n(y),a()},function(y){r(y),a()},m),c=null}if("onloadend"in c?c.onloadend=f:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(f)},c.onabort=function(){c&&(r(new I("Request aborted",I.ECONNABORTED,t,c)),c=null)},c.onerror=function(){r(new I("Network Error",I.ERR_NETWORK,t,c)),c=null},c.ontimeout=function(){let p=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const m=t.transitional||Dc;t.timeoutErrorMessage&&(p=t.timeoutErrorMessage),r(new I(p,m.clarifyTimeoutError?I.ETIMEDOUT:I.ECONNABORTED,t,c)),c=null},Le.isStandardBrowserEnv){const h=(t.withCredentials||Uh(u))&&t.xsrfCookieName&&jh.read(t.xsrfCookieName);h&&s.set(t.xsrfHeaderName,h)}i===void 0&&s.setContentType(null),"setRequestHeader"in c&&S.forEach(s.toJSON(),function(p,m){c.setRequestHeader(m,p)}),S.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),o&&o!=="json"&&(c.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&c.addEventListener("progress",Fl(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",Fl(t.onUploadProgress)),(t.cancelToken||t.signal)&&(l=h=>{c&&(r(!h||h.type?new fr(null,t,c):h),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(l),t.signal&&(t.signal.aborted?l():t.signal.addEventListener("abort",l)));const d=Kh(u);if(d&&Le.protocols.indexOf(d)===-1){r(new I("Unsupported protocol "+d+":",I.ERR_BAD_REQUEST,t));return}c.send(i||null)})},Fr={http:xh,xhr:Yh};S.forEach(Fr,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Xh={getAdapter:t=>{t=S.isArray(t)?t:[t];const{length:e}=t;let n,r;for(let i=0;i<e&&(n=t[i],!(r=S.isString(n)?Fr[n.toLowerCase()]:n));i++);if(!r)throw r===!1?new I(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(S.hasOwnProp(Fr,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!S.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:Fr};function us(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new fr(null,t)}function zl(t){return us(t),t.headers=Ue.from(t.headers),t.data=cs.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Xh.getAdapter(t.adapter||Fo.adapter)(t).then(function(r){return us(t),r.data=cs.call(t,t.transformResponse,r),r.headers=Ue.from(r.headers),r},function(r){return Ic(r)||(us(t),r&&r.response&&(r.response.data=cs.call(t,t.transformResponse,r.response),r.response.headers=Ue.from(r.response.headers))),Promise.reject(r)})}const Hl=t=>t instanceof Ue?t.toJSON():t;function hn(t,e){e=e||{};const n={};function r(c,u,f){return S.isPlainObject(c)&&S.isPlainObject(u)?S.merge.call({caseless:f},c,u):S.isPlainObject(u)?S.merge({},u):S.isArray(u)?u.slice():u}function i(c,u,f){if(S.isUndefined(u)){if(!S.isUndefined(c))return r(void 0,c,f)}else return r(c,u,f)}function s(c,u){if(!S.isUndefined(u))return r(void 0,u)}function o(c,u){if(S.isUndefined(u)){if(!S.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function l(c,u,f){if(f in e)return r(c,u);if(f in t)return r(void 0,c)}const a={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(c,u)=>i(Hl(c),Hl(u),!0)};return S.forEach(Object.keys(Object.assign({},t,e)),function(u){const f=a[u]||i,d=f(t[u],e[u],u);S.isUndefined(d)&&f!==l||(n[u]=d)}),n}const Lc="1.4.0",zo={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{zo[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const $l={};zo.transitional=function(e,n,r){function i(s,o){return"[Axios v"+Lc+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,l)=>{if(e===!1)throw new I(i(o," has been removed"+(n?" in "+n:"")),I.ERR_DEPRECATED);return n&&!$l[o]&&($l[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,l):!0}};function Gh(t,e,n){if(typeof t!="object")throw new I("options must be an object",I.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const l=t[s],a=l===void 0||o(l,s,t);if(a!==!0)throw new I("option "+s+" must be "+a,I.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new I("Unknown option "+s,I.ERR_BAD_OPTION)}}const Ws={assertOptions:Gh,validators:zo},Ye=Ws.validators;class Kr{constructor(e){this.defaults=e,this.interceptors={request:new Ll,response:new Ll}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=hn(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&Ws.assertOptions(r,{silentJSONParsing:Ye.transitional(Ye.boolean),forcedJSONParsing:Ye.transitional(Ye.boolean),clarifyTimeoutError:Ye.transitional(Ye.boolean)},!1),i!=null&&(S.isFunction(i)?n.paramsSerializer={serialize:i}:Ws.assertOptions(i,{encode:Ye.function,serialize:Ye.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o;o=s&&S.merge(s.common,s[n.method]),o&&S.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),n.headers=Ue.concat(o,s);const l=[];let a=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(a=a&&m.synchronous,l.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let u,f=0,d;if(!a){const p=[zl.bind(this),void 0];for(p.unshift.apply(p,l),p.push.apply(p,c),d=p.length,u=Promise.resolve(n);f<d;)u=u.then(p[f++],p[f++]);return u}d=l.length;let h=n;for(f=0;f<d;){const p=l[f++],m=l[f++];try{h=p(h)}catch(g){m.call(this,g);break}}try{u=zl.call(this,h)}catch(p){return Promise.reject(p)}for(f=0,d=c.length;f<d;)u=u.then(c[f++],c[f++]);return u}getUri(e){e=hn(this.defaults,e);const n=Pc(e.baseURL,e.url);return Rc(n,e.params,e.paramsSerializer)}}S.forEach(["delete","get","head","options"],function(e){Kr.prototype[e]=function(n,r){return this.request(hn(r||{},{method:e,url:n,data:(r||{}).data}))}});S.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,l){return this.request(hn(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Kr.prototype[e]=n(),Kr.prototype[e+"Form"]=n(!0)});const zr=Kr;class Ho{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(l=>{r.subscribe(l),s=l}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,l){r.reason||(r.reason=new fr(s,o,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new Ho(function(i){e=i}),cancel:e}}}const Qh=Ho;function Zh(t){return function(n){return t.apply(null,n)}}function ep(t){return S.isObject(t)&&t.isAxiosError===!0}const Us={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Us).forEach(([t,e])=>{Us[e]=t});const tp=Us;function Bc(t){const e=new zr(t),n=Sc(zr.prototype.request,e);return S.extend(n,zr.prototype,e,{allOwnKeys:!0}),S.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return Bc(hn(t,i))},n}const K=Bc(Fo);K.Axios=zr;K.CanceledError=fr;K.CancelToken=Qh;K.isCancel=Ic;K.VERSION=Lc;K.toFormData=Ri;K.AxiosError=I;K.Cancel=K.CanceledError;K.all=function(e){return Promise.all(e)};K.spread=Zh;K.isAxiosError=ep;K.mergeConfig=hn;K.AxiosHeaders=Ue;K.formToJSON=t=>_c(S.isHTMLForm(t)?new FormData(t):t);K.HttpStatusCode=tp;K.default=K;const np=K;window.axios=np;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";function Q(t){this.content=t}Q.prototype={constructor:Q,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new Q(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Q(n)},addToStart:function(t,e){return new Q([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Q(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new Q(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Q.from(t),t.size?new Q(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Q.from(t),t.size?new Q(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Q.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Q.from=function(t){if(t instanceof Q)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Q(e)};function Fc(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=Fc(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function zc(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),l=e.child(--s),a=o.nodeSize;if(o==l){n-=a,r-=a;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let c=0,u=Math.min(o.text.length,l.text.length);for(;c<u&&o.text[o.text.length-c-1]==l.text[l.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let c=zc(o.content,l.content,n-1,r-1);if(c)return c}n-=a,r-=a}}class x{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,l=0;l<n;o++){let a=this.content[o],c=l+a.nodeSize;if(c>e&&r(a,i+l,s||null,o)!==!1&&a.content.size){let u=l+1;a.nodesBetween(Math.max(0,e-u),Math.min(a.content.size,n-u),r,i+u)}l=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(l,a)=>{l.isText?(s+=l.text.slice(Math.max(e,a)-a,n-a),o=!r):l.isLeaf?(i?s+=typeof i=="function"?i(l):i:l.type.spec.leafText&&(s+=l.type.spec.leafText(l)),o=!r):!o&&l.isBlock&&(s+=r,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new x(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let l=this.content[s],a=o+l.nodeSize;a>e&&((o<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,e-o-1),Math.min(l.content.size,n-o-1))),r.push(l),i+=l.nodeSize),o=a}return new x(r,i)}cutByIndex(e,n){return e==n?x.empty:e==0&&n==this.content.length?this:new x(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new x(i,s)}addToStart(e){return new x([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new x(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return Fc(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return zc(this,e,n,r)}findIndex(e,n=-1){if(e==0)return Cr(0,e);if(e==this.size)return Cr(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||n>0?Cr(r+1,o):Cr(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return x.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new x(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return x.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new x(n||e,r)}static from(e){if(!e)return x.empty;if(e instanceof x)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new x([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}x.empty=new x([],0);const fs={index:0,offset:0};function Cr(t,e){return fs.index=t,fs.offset=e,fs}function qr(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!qr(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!qr(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let P=class Ks{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&qr(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);return r.create(n.attrs)}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Ks.none;if(e instanceof Ks)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};P.none=[];class Jr extends Error{}class E{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=$c(this.content,e+this.openStart,n);return r&&new E(r,this.openStart,this.openEnd)}removeBetween(e,n){return new E(Hc(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return E.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new E(x.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new E(e,r,i)}}E.empty=new E(x.empty,0,0);function Hc(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:l}=t.findIndex(n);if(i==e||s.isText){if(l!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(Hc(s.content,e-i-1,n-i-1)))}function $c(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let l=$c(o.content,e-s-1,n);return l&&t.replaceChild(i,o.copy(l))}function rp(t,e,n){if(n.openStart>t.depth)throw new Jr("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Jr("Inconsistent open depths");return jc(t,e,n,0)}function jc(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=jc(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,l=o.content;return Bt(o,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:o,end:l}=ip(n,t);return Bt(s,Wc(t,o,l,e,r))}else return Bt(s,Yr(t,e,r))}function Vc(t,e){if(!e.type.compatibleContent(t.type))throw new Jr("Cannot join "+e.type.name+" onto "+t.type.name)}function qs(t,e,n){let r=t.node(n);return Vc(r,e.node(n)),r}function Lt(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function jn(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Lt(t.nodeAfter,r),s++));for(let l=s;l<o;l++)Lt(i.child(l),r);e&&e.depth==n&&e.textOffset&&Lt(e.nodeBefore,r)}function Bt(t,e){return t.type.checkContent(e),t.copy(e)}function Wc(t,e,n,r,i){let s=t.depth>i&&qs(t,e,i+1),o=r.depth>i&&qs(n,r,i+1),l=[];return jn(null,t,i,l),s&&o&&e.index(i)==n.index(i)?(Vc(s,o),Lt(Bt(s,Wc(t,e,n,r,i+1)),l)):(s&&Lt(Bt(s,Yr(t,e,i+1)),l),jn(e,n,i,l),o&&Lt(Bt(o,Yr(n,r,i+1)),l)),jn(r,null,i,l),new x(l)}function Yr(t,e,n){let r=[];if(jn(null,t,n,r),t.depth>n){let i=qs(t,e,n+1);Lt(Bt(i,Yr(t,e,n+1)),r)}return jn(e,null,n,r),new x(r)}function ip(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(x.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class er{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return P.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Xr(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:l,offset:a}=o.content.findIndex(s),c=s-a;if(r.push(o,l,i+a),!c||(o=o.child(l),o.isText))break;s=c-1,i+=a+1}return new er(n,r,s)}static resolveCached(e,n){for(let i=0;i<ds.length;i++){let s=ds[i];if(s.pos==n&&s.doc==e)return s}let r=ds[hs]=er.resolve(e,n);return hs=(hs+1)%sp,r}}let ds=[],hs=0,sp=12;class Xr{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const op=Object.create(null);let Ft=class Js{constructor(e,n,r,i=P.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||x.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&qr(this.attrs,n||e.defaultAttrs||op)&&P.sameSet(this.marks,r||P.none)}copy(e=null){return e==this.content?this:new Js(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Js(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return E.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),l=i.start(o),c=i.node(o).content.cut(i.pos-l,s.pos-l);return new E(c,i.depth-o,s.depth-o)}replace(e,n,r){return rp(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return er.resolveCached(this,e)}resolveNoCache(e){return er.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Uc(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=x.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=i;a<s;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=P.none;for(let n=0;n<this.marks.length;n++)e=this.marks[n].addToSet(e);if(!P.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=x.fromJSON(e,n.content);return e.nodeType(n.type).create(n.attrs,i,r)}};Ft.prototype.text=void 0;class Gr extends Ft{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Uc(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Gr(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Gr(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Uc(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Ut{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new lp(e,n);if(r.next==null)return Ut.empty;let i=Kc(r);r.next&&r.err("Unexpected trailing text");let s=pp(hp(i));return mp(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,l){let a=o.matchFragment(e,r);if(a&&(!n||a.validEnd))return x.from(l.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:f}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let d=s(f,l.concat(u));if(d)return d}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:a}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}Ut.empty=new Ut(!0);class lp{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Kc(t){let e=[];do e.push(ap(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function ap(t){let e=[];do e.push(cp(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function cp(t){let e=dp(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=up(t,e);else break;return e}function jl(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function up(t,e){let n=jl(t),r=n;return t.eat(",")&&(t.next!="}"?r=jl(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function fp(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.groups.indexOf(e)>-1&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function dp(t){if(t.eat("(")){let e=Kc(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=fp(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function hp(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,l,a){let c={term:a,to:l};return e[o].push(c),c}function i(o,l){o.forEach(a=>a.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((a,c)=>a.concat(s(c,l)),[]);if(o.type=="seq")for(let a=0;;a++){let c=s(o.exprs[a],l);if(a==o.exprs.length-1)return c;i(c,l=n())}else if(o.type=="star"){let a=n();return r(l,a),i(s(o.expr,a),a),[r(a)]}else if(o.type=="plus"){let a=n();return i(s(o.expr,l),a),i(s(o.expr,a),a),[r(a)]}else{if(o.type=="opt")return[r(l)].concat(s(o.expr,l));if(o.type=="range"){let a=l;for(let c=0;c<o.min;c++){let u=n();i(s(o.expr,a),u),a=u}if(o.max==-1)i(s(o.expr,a),a);else for(let c=o.min;c<o.max;c++){let u=n();r(a,u),i(s(o.expr,a),u),a=u}return[r(a)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function qc(t,e){return e-t}function Vl(t,e){let n=[];return r(e),n.sort(qc);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:l,to:a}=s[o];!l&&n.indexOf(a)==-1&&r(a)}}}function pp(t){let e=Object.create(null);return n(Vl(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:l,to:a})=>{if(!l)return;let c;for(let u=0;u<i.length;u++)i[u][0]==l&&(c=i[u][1]);Vl(t,a).forEach(u=>{c||i.push([l,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new Ut(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(qc);s.next.push({type:i[o][0],next:e[l.join(",")]||n(l)})}return s}}function mp(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:a,next:c}=i.next[l];o.push(a.name),s&&!(a.isText||a.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Jc(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Yc(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function Xc(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new gp(t[n]);return e}let Wl=class Gc{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Xc(r.attrs),this.defaultAttrs=Jc(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ut.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Yc(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ft(this,this.computeAttrs(e),x.from(n),P.setFrom(r))}createChecked(e=null,n,r){return n=x.from(n),this.checkContent(n),new Ft(this,this.computeAttrs(e),n,P.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=x.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(x.empty,!0);return s?new Ft(this,e,n.append(s),P.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:P.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new Gc(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};class gp{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class Ii{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=Xc(i.attrs),this.excluded=null;let s=Jc(this.attrs);this.instance=s?new P(this,s):null}create(e=null){return!e&&this.instance?this.instance:new P(this,Yc(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new Ii(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}excludes(e){return this.excluded.indexOf(e)>-1}}class yp{constructor(e){this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Q.from(e.nodes),n.marks=Q.from(e.marks||{}),this.nodes=Wl.compile(this.spec.nodes,this),this.marks=Ii.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;s.contentMatch=r[o]||(r[o]=Ut.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet=l=="_"?null:l?Ul(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:Ul(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Wl){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Gr(r,r.defaultAttrs,e,P.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Ft.fromJSON(this,e)}markFromJSON(e){return P.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Ul(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let l in t.marks){let a=t.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=a)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}class pn{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new ql(this,n,!1);return r.addAll(e,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new ql(this,n,!0);return r.addAll(e,n.from,n.to),E.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(xp(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(o.getAttrs){let a=o.getAttrs(n);if(a===!1)continue;o.attrs=a||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Jl(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Jl(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new pn(e,pn.schemaRules(e)))}}const Qc={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},bp={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Zc={ol:!0,ul:!0},Qr=1,Zr=2,Vn=4;function Kl(t,e,n){return e!=null?(e?Qr:0)|(e==="full"?Zr:0):t&&t.whitespace=="pre"?Qr|Zr:n&~Vn}class Tr{constructor(e,n,r,i,s,o,l){this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=l,this.content=[],this.activeMarks=P.none,this.stashMarks=[],this.match=o||(l&Vn?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(x.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Qr)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=x.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(x.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(e){for(let n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(e){for(let n=0,r=this.pendingMarks;n<r.length;n++){let i=r[n];(this.type?this.type.allowsMarkType(i.type):wp(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Qc.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ql{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,s,o=Kl(null,n.preserveWhitespace,0)|(r?Vn:0);i?s=new Tr(i.type,i.attrs,P.none,P.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new Tr(null,null,P.none,P.none,!0,null,o):s=new Tr(e.schema.topNodeType,null,P.none,P.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,n){let r=e.getAttribute("style");if(!r)return n();let i=this.readStyles(kp(r));if(!i)return;let[s,o]=i,l=this.top;for(let a=0;a<o.length;a++)this.removePendingMark(o[a],l);for(let a=0;a<s.length;a++)this.addPendingMark(s[a]);n();for(let a=0;a<s.length;a++)this.removePendingMark(s[a],l);for(let a=0;a<o.length;a++)this.addPendingMark(o[a])}addTextNode(e){let n=e.nodeValue,r=this.top;if(r.options&Zr||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&Qr)r.options&Zr?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}addElement(e,n){let r=e.nodeName.toLowerCase(),i;Zc.hasOwnProperty(r)&&this.parser.normalizeLists&&Sp(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));if(s?s.ignore:bp.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,l=this.top,a=this.needsBlock;if(Qc.hasOwnProperty(r))l.content.length&&l.content[0].isInline&&this.open&&(this.open--,l=this.top),o=!0,l.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(l),this.needsBlock=a}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let n=P.none,r=P.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(l=>{o.clearMark(l)&&(r=l.addToSet(r))}):n=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(n),o.consuming===!1)s=o;else break}return[n,r]}addElementByRule(e,n,r){let i,s,o;n.node?(s=this.parser.schema.nodes[n.node],s.isLeaf?this.insertNode(s.create(n.attrs))||this.leafFallback(e):i=this.enter(s,n.attrs||null,n.preserveWhitespace)):(o=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(o));let l=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a)}i&&this.sync(l)&&this.open--,o&&this.removePendingMark(o,l)}addAll(e,n,r){let i=n||0;for(let s=n?e.childNodes[n]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let n,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!n||n.length>o.length)&&(n=o,r=s,!o.length)||s.solid)break}if(!n)return!1;this.sync(r);for(let i=0;i<n.length;i++)this.enterInner(n[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();let n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));let r=n.activeMarks;for(let i=0;i<e.marks.length;i++)(!n.type||n.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}enter(e,n,r){let i=this.findPlace(e.create(n));return i&&this.enterInner(e,n,!0,r),i}enterInner(e,n=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=Kl(e,i,s.options);s.options&Vn&&s.content.length==0&&(o|=Vn),this.nodes.push(new Tr(e,n,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,a)=>{for(;l>=0;l--){let c=n[l];if(c==""){if(l==n.length-1||l==0)continue;for(;a>=s;a--)if(o(l-1,a))return!0;return!1}else{let u=a>0||a==0&&i?this.nodes[a].type:r&&a>=s?r.node(a-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;a--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let n=Ep(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,n){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==n)break}}}function Sp(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Zc.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function xp(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function kp(t){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,r=[];for(;n=e.exec(t);)r.push(n[1],n[2].trim());return r}function Jl(t){let e={};for(let n in t)e[n]=t[n];return e}function wp(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=l=>{s.push(l);for(let a=0;a<l.edgeCount;a++){let{type:c,next:u}=l.edge(a);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function Ep(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}class Be{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=ps(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let l=0,a=0;for(;l<s.length&&a<o.marks.length;){let c=o.marks[a];if(!this.marks[c.type.name]){a++;continue}if(!c.eq(s[l][0])||c.type.spec.spanning===!1)break;l++,a++}for(;l<s.length;)i=s.pop()[1];for(;a<o.marks.length;){let c=o.marks[a++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=Be.renderSpec(ps(n),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&Be.renderSpec(ps(r),i(e,n))}static renderSpec(e,n,r=null){if(typeof n=="string")return{dom:e.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let i=n[0],s=i.indexOf(" ");s>0&&(r=i.slice(0,s),i=i.slice(s+1));let o,l=r?e.createElementNS(r,i):e.createElement(i),a=n[1],c=1;if(a&&typeof a=="object"&&a.nodeType==null&&!Array.isArray(a)){c=2;for(let u in a)if(a[u]!=null){let f=u.indexOf(" ");f>0?l.setAttributeNS(u.slice(0,f),u.slice(f+1),a[u]):l.setAttribute(u,a[u])}}for(let u=c;u<n.length;u++){let f=n[u];if(f===0){if(u<n.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:d,contentDOM:h}=Be.renderSpec(e,f,r);if(l.appendChild(d),h){if(o)throw new RangeError("Multiple content holes");o=h}}}return{dom:l,contentDOM:o}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Be(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Yl(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Yl(e.marks)}}function Yl(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function ps(t){return t.document||window.document}const eu=65535,tu=Math.pow(2,16);function Mp(t,e){return t+e*tu}function Xl(t){return t&eu}function vp(t){return(t-(t&eu))/tu}const nu=1,ru=2,Hr=4,iu=8;class Ys{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&iu)>0}get deletedBefore(){return(this.delInfo&(nu|Hr))>0}get deletedAfter(){return(this.delInfo&(ru|Hr))>0}get deletedAcross(){return(this.delInfo&Hr)>0}}class be{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&be.empty)return be.empty}recover(e){let n=0,r=Xl(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+vp(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let c=this.ranges[l+s],u=this.ranges[l+o],f=a+c;if(e<=f){let d=c?e==a?-1:e==f?1:n:n,h=a+i+(d<0?0:u);if(r)return h;let p=e==(n<0?a:f)?null:Mp(l/3,e-a),m=e==a?ru:e==f?nu:Hr;return(n<0?e!=a:e!=f)&&(m|=iu),new Ys(h,m,p)}i+=u-c}return r?e+i:new Ys(e+i,0,null)}touches(e,n){let r=0,i=Xl(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let c=this.ranges[l+s],u=a+c;if(e<=u&&l==i*3)return!0;r+=this.ranges[l+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),a=o+(this.inverted?0:s),c=this.ranges[i+n],u=this.ranges[i+r];e(l,l+c,a,a+u),s+=u-c}}invert(){return new be(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?be.empty:new be(e<0?[0,-e,0]:[0,0,e])}}be.empty=new be([]);class cn{constructor(e=[],n,r=0,i=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=i}slice(e=0,n=this.maps.length){return new cn(this.maps,this.mirror,e,n)}copy(){return new cn(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let i=e.getMirror(n);this.appendMap(e.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new cn;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],l=o.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(s);if(a!=null&&a>s&&a<this.to){s=a,e=this.maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new Ys(e,i,null)}}const ms=Object.create(null);class de{getMap(){return be.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=ms[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in ms)throw new RangeError("Duplicate use of step JSON ID "+e);return ms[e]=n,n.prototype.jsonID=e,n}}class U{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new U(e,null)}static fail(e){return new U(null,e)}static fromReplace(e,n,r,i){try{return U.ok(e.replace(n,r,i))}catch(s){if(s instanceof Jr)return U.fail(s.message);throw s}}}function $o(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy($o(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return x.fromArray(r)}class rt extends de{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new E($o(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return U.fromReplace(e,this.from,this.to,s)}invert(){return new Fe(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new rt(n.pos,r.pos,this.mark)}merge(e){return e instanceof rt&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new rt(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new rt(n.from,n.to,e.markFromJSON(n.mark))}}de.jsonID("addMark",rt);class Fe extends de{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new E($o(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return U.fromReplace(e,this.from,this.to,r)}invert(){return new rt(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Fe(n.pos,r.pos,this.mark)}merge(e){return e instanceof Fe&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Fe(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Fe(n.from,n.to,e.markFromJSON(n.mark))}}de.jsonID("removeMark",Fe);class it extends de{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return U.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return U.fromReplace(e,this.pos,this.pos+1,new E(x.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new it(this.pos,n.marks[i]);return new it(this.pos,this.mark)}}return new mn(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new it(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new it(n.pos,e.markFromJSON(n.mark))}}de.jsonID("addNodeMark",it);class mn extends de{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return U.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return U.fromReplace(e,this.pos,this.pos+1,new E(x.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new it(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new mn(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new mn(n.pos,e.markFromJSON(n.mark))}}de.jsonID("removeNodeMark",mn);class te extends de{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&Xs(e,this.from,this.to)?U.fail("Structure replace would overwrite content"):U.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new be([this.from,this.to-this.from,this.slice.size])}invert(e){return new te(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new te(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof te)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?E.empty:new E(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new te(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?E.empty:new E(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new te(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new te(n.from,n.to,E.fromJSON(e,n.slice),!!n.structure)}}de.jsonID("replace",te);class Y extends de{constructor(e,n,r,i,s,o,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(e){if(this.structure&&(Xs(e,this.from,this.gapFrom)||Xs(e,this.gapTo,this.to)))return U.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return U.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?U.fromReplace(e,this.from,this.to,r):U.fail("Content does not fit in gap")}getMap(){return new be([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Y(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),s=e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new Y(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Y(n.from,n.to,n.gapFrom,n.gapTo,E.fromJSON(e,n.slice),n.insert,!!n.structure)}}de.jsonID("replaceAround",Y);function Xs(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function Cp(t,e,n,r){let i=[],s=[],o,l;t.doc.nodesBetween(e,n,(a,c,u)=>{if(!a.isInline)return;let f=a.marks;if(!r.isInSet(f)&&u.type.allowsMarkType(r.type)){let d=Math.max(c,e),h=Math.min(c+a.nodeSize,n),p=r.addToSet(f);for(let m=0;m<f.length;m++)f[m].isInSet(p)||(o&&o.to==d&&o.mark.eq(f[m])?o.to=h:i.push(o=new Fe(d,h,f[m])));l&&l.to==d?l.to=h:s.push(l=new rt(d,h,r))}}),i.forEach(a=>t.step(a)),s.forEach(a=>t.step(a))}function Tp(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,l)=>{if(!o.isInline)return;s++;let a=null;if(r instanceof Ii){let c=o.marks,u;for(;u=r.isInSet(c);)(a||(a=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(a=[r]):a=o.marks;if(a&&a.length){let c=Math.min(l+o.nodeSize,n);for(let u=0;u<a.length;u++){let f=a[u],d;for(let h=0;h<i.length;h++){let p=i[h];p.step==s-1&&f.eq(i[h].style)&&(d=p)}d?(d.to=c,d.step=s):i.push({style:f,from:Math.max(l,e),to:c,step:s})}}}),i.forEach(o=>t.step(new Fe(o.from,o.to,o.style)))}function Op(t,e,n,r=n.contentMatch){let i=t.doc.nodeAt(e),s=[],o=e+1;for(let l=0;l<i.childCount;l++){let a=i.child(l),c=o+a.nodeSize,u=r.matchType(a.type);if(!u)s.push(new te(o,c,E.empty));else{r=u;for(let f=0;f<a.marks.length;f++)n.allowsMarkType(a.marks[f].type)||t.step(new Fe(o,c,a.marks[f]))}o=c}if(!r.validEnd){let l=r.fillBefore(x.empty,!0);t.replace(o,o,new E(l,0,0))}for(let l=s.length-1;l>=0;l--)t.step(s[l])}function Ap(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function vn(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!Ap(i,s,o))break}return null}function Np(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),l=i.after(s+1),a=o,c=l,u=x.empty,f=0;for(let p=s,m=!1;p>n;p--)m||r.index(p)>0?(m=!0,u=x.from(r.node(p).copy(u)),f++):a--;let d=x.empty,h=0;for(let p=s,m=!1;p>n;p--)m||i.after(p+1)<i.end(p)?(m=!0,d=x.from(i.node(p).copy(d)),h++):c++;t.step(new Y(a,c,o,l,new E(u.append(d),f,h),u.size-f,!0))}function jo(t,e,n=null,r=t){let i=Rp(t,e),s=i&&Dp(r,e);return s?i.map(Gl).concat({type:e,attrs:n}).concat(s.map(Gl)):null}function Gl(t){return{type:t,attrs:null}}function Rp(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function Dp(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let a=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;a&&c<i;c++)a=a.matchType(n.child(c).type);return!a||!a.validEnd?null:o}function _p(t,e,n){let r=x.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=x.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new Y(i,s,i,s,new E(r,0,0),n.length,!0))}function Ip(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,l)=>{if(o.isTextblock&&!o.hasMarkup(r,i)&&Pp(t.doc,t.mapping.slice(s).map(l),r)){t.clearIncompatible(t.mapping.slice(s).map(l,1),r);let a=t.mapping.slice(s),c=a.map(l,1),u=a.map(l+o.nodeSize,1);return t.step(new Y(c,u,c+1,u-1,new E(x.from(r.create(i,null,o.marks)),0,0),1,!0)),!1}})}function Pp(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function Lp(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Y(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new E(x.from(o),0,0),1,!0))}function un(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>s;c--,u--){let f=i.node(c),d=i.index(c);if(f.type.spec.isolating)return!1;let h=f.content.cutByIndex(d,f.childCount),p=r&&r[u+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[u]||f;if(!f.canReplace(d+1,f.childCount)||!m.type.validContent(h))return!1}let l=i.indexAfter(s),a=r&&r[0];return i.node(s).canReplaceWith(l,l,a?a.type:i.node(s+1).type)}function Bp(t,e,n=1,r){let i=t.doc.resolve(e),s=x.empty,o=x.empty;for(let l=i.depth,a=i.depth-n,c=n-1;l>a;l--,c--){s=x.from(i.node(l).copy(s));let u=r&&r[c];o=x.from(u?u.type.create(u.attrs,o):i.node(l).copy(o))}t.step(new te(e,e,new E(s.append(o),n,n),!0))}function bt(t,e){let n=t.resolve(e),r=n.index();return su(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function su(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function ou(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,l=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),l++,o=r.node(i).maybeChild(l)):(s=r.node(i).maybeChild(l-1),o=r.node(i+1)),s&&!s.isTextblock&&su(s,o)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function Fp(t,e,n){let r=new te(e-n,e+n,E.empty,!0);t.step(r)}function zp(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function lu(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,a=r.index(o)+(l>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(a,a,i);else{let f=c.contentMatchAt(a).findWrapping(i.firstChild.type);u=f&&c.canReplaceWith(a,a,f[0])}if(u)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function Vo(t,e,n=e,r=E.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return au(i,s,r)?new te(e,n,r):new Hp(i,s,r).fit()}function au(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class Hp{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=x.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=x.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let a=new E(s,o,l);return e>-1?new Y(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new te(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=gs(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:c}=this.frontier[l],u,f=null;if(n==1&&(o?c.matchType(o.type)||(f=c.fillBefore(x.from(o),!1)):s&&a.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:f};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=gs(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new E(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=gs(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new E(Fn(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new E(Fn(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,l=r?r.content:o.content,a=o.openStart-e,c=0,u=[],{match:f,type:d}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)u.push(i.child(m));f=f.matchFragment(i)}let h=l.size+e-(o.content.size-o.openEnd);for(;c<l.childCount;){let m=l.child(c),g=f.matchType(m.type);if(!g)break;c++,(c>1||a==0||m.content.size)&&(f=g,u.push(cu(m.mark(d.allowedMarks(m.marks)),c==1?a:0,c==l.childCount?h:-1)))}let p=c==l.childCount;p||(h=-1),this.placed=zn(this.placed,n,x.from(u)),this.frontier[n].match=f,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=l;m<h;m++){let y=g.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),g=y.content}this.unplaced=p?e==0?E.empty:new E(Fn(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new E(Fn(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!ys(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=ys(e,n,i,r,s);if(o){for(let l=n-1;l>=0;l--){let{match:a,type:c}=this.frontier[l],u=ys(e,l,c,a,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=zn(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=zn(this.placed,this.depth,x.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(x.empty,!0);n.childCount&&(this.placed=zn(this.placed,this.frontier.length,n))}}function Fn(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Fn(t.firstChild.content,e-1,n)))}function zn(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(zn(t.lastChild.content,e-1,n)))}function gs(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function cu(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,cu(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(x.empty,!0)))),t.copy(r)}function ys(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!$p(n,s.content,o)?l:null}function $p(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function jp(t){return t.spec.defining||t.spec.definingForContent}function Vp(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(au(i,s,r))return t.step(new te(e,n,r));let o=fu(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let d=i.depth,h=i.pos-1;d>0;d--,h--){let p=i.node(d).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(d)>-1?l=d:i.before(d)==h&&o.splice(1,0,-d)}let a=o.indexOf(l),c=[],u=r.openStart;for(let d=r.content,h=0;;h++){let p=d.firstChild;if(c.push(p),h==r.openStart)break;d=p.content}for(let d=u-1;d>=0;d--){let h=c[d].type,p=jp(h);if(p&&i.node(a).type!=h)u=d;else if(p||!h.isTextblock)break}for(let d=r.openStart;d>=0;d--){let h=(d+u+1)%(r.openStart+1),p=c[h];if(p)for(let m=0;m<o.length;m++){let g=o[(m+a)%o.length],y=!0;g<0&&(y=!1,g=-g);let b=i.node(g-1),w=i.index(g-1);if(b.canReplaceWith(w,w,p.type,p.marks))return t.replace(i.before(g),y?s.after(g):n,new E(uu(r.content,0,r.openStart,h),h,r.openEnd))}}let f=t.steps.length;for(let d=o.length-1;d>=0&&(t.replace(e,n,r),!(t.steps.length>f));d--){let h=o[d];h<0||(e=i.before(h),n=s.after(h))}}function uu(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(uu(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(x.empty,!0))}return t}function Wp(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=zp(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new E(x.from(r),0,0))}function Up(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=fu(r,i);for(let o=0;o<s.length;o++){let l=s[o],a=o==s.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o)return t.delete(r.before(o),n);t.delete(e,n)}function fu(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class fn extends de{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return U.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return U.fromReplace(e,this.pos,this.pos+1,new E(x.from(i),0,n.isLeaf?0:1))}getMap(){return be.empty}invert(e){return new fn(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new fn(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new fn(n.pos,n.attr,n.value)}}de.jsonID("attr",fn);let gn=class extends Error{};gn=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};gn.prototype=Object.create(Error.prototype);gn.prototype.constructor=gn;gn.prototype.name="TransformError";class du{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new cn}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new gn(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=E.empty){let i=Vo(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new E(x.from(r),0,0))}delete(e,n){return this.replace(e,n,E.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return Vp(this,e,n,r),this}replaceRangeWith(e,n,r){return Wp(this,e,n,r),this}deleteRange(e,n){return Up(this,e,n),this}lift(e,n){return Np(this,e,n),this}join(e,n=1){return Fp(this,e,n),this}wrap(e,n){return _p(this,e,n),this}setBlockType(e,n=e,r,i=null){return Ip(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return Lp(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new fn(e,n,r)),this}addNodeMark(e,n){return this.step(new it(e,n)),this}removeNodeMark(e,n){if(!(n instanceof P)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new mn(e,n)),this}split(e,n=1,r){return Bp(this,e,n,r),this}addMark(e,n,r){return Cp(this,e,n,r),this}removeMark(e,n,r){return Tp(this,e,n,r),this}clearIncompatible(e,n,r){return Op(this,e,n,r),this}}const bs=Object.create(null);class R{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new Kp(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=E.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:a,$to:c}=o[l],u=e.mapping.slice(s);e.replaceRange(u.map(a.pos),u.map(c.pos),l?E.empty:n),l==0&&ea(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],a=e.mapping.slice(r),c=a.map(o.pos),u=a.map(l.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),ea(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new _(e):Qt(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?Qt(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):Qt(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Me(e.node(0))}static atStart(e){return Qt(e,e,0,0,1)||new Me(e)}static atEnd(e){return Qt(e,e,e.content.size,e.childCount,-1)||new Me(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=bs[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in bs)throw new RangeError("Duplicate use of selection JSON ID "+e);return bs[e]=n,n.prototype.jsonID=e,n}getBookmark(){return _.between(this.$anchor,this.$head).getBookmark()}}R.prototype.visible=!0;class Kp{constructor(e,n){this.$from=e,this.$to=n}}let Ql=!1;function Zl(t){!Ql&&!t.parent.inlineContent&&(Ql=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class _ extends R{constructor(e,n=e){Zl(e),Zl(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return R.near(r);let i=e.resolve(n.map(this.anchor));return new _(i.parent.inlineContent?i:r,r)}replace(e,n=E.empty){if(super.replace(e,n),n==E.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof _&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Pi(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new _(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=R.findFrom(n,r,!0)||R.findFrom(n,-r,!0);if(s)n=s.$head;else return R.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(R.findFrom(e,-r,!0)||R.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new _(e,n)}}R.jsonID("text",_);class Pi{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Pi(e.map(this.anchor),e.map(this.head))}resolve(e){return _.between(e.resolve(this.anchor),e.resolve(this.head))}}class T extends R{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?R.near(s):new T(s)}content(){return new E(x.from(this.node),0,0)}eq(e){return e instanceof T&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Wo(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new T(e.resolve(n.anchor))}static create(e,n){return new T(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}T.prototype.visible=!1;R.jsonID("node",T);class Wo{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Pi(r,r):new Wo(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&T.isSelectable(r)?new T(n):R.near(n)}}class Me extends R{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=E.empty){if(n==E.empty){e.delete(0,e.doc.content.size);let r=R.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Me(e)}map(e){return new Me(e)}eq(e){return e instanceof Me}getBookmark(){return qp}}R.jsonID("all",Me);const qp={map(){return this},resolve(t){return new Me(t)}};function Qt(t,e,n,r,i,s=!1){if(e.inlineContent)return _.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let l=e.child(o);if(l.isAtom){if(!s&&T.isSelectable(l))return T.create(t,n-(i<0?l.nodeSize:0))}else{let a=Qt(t,l,n+i,i<0?l.childCount:0,i,s);if(a)return a}n+=l.nodeSize*i}return null}function ea(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof te||i instanceof Y))return;let s=t.mapping.maps[r],o;s.forEach((l,a,c,u)=>{o==null&&(o=u)}),t.setSelection(R.near(t.doc.resolve(o),n))}const ta=1,Or=2,na=4;class Jp extends du{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|ta)&~Or,this.storedMarks=null,this}get selectionSet(){return(this.updated&ta)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Or,this}ensureMarks(e){return P.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Or)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Or,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||P.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(R.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=na,this}get scrolledIntoView(){return(this.updated&na)>0}}function ra(t,e){return!e||!t?t:t.bind(e)}class Hn{constructor(e,n,r){this.name=e,this.init=ra(n.init,r),this.apply=ra(n.apply,r)}}const Yp=[new Hn("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Hn("selection",{init(t,e){return t.selection||R.atStart(e.doc)},apply(t){return t.selection}}),new Hn("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Hn("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Ss{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Yp.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Hn(r.key,r.spec.state,r))})}}class nn{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let a=i?i[o].n:0,c=i?i[o].state:this,u=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new nn(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new Jp(this)}static create(e){let n=new Ss(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new nn(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Ss(this.schema,e.plugins),r=n.fields,i=new nn(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Ss(e.schema,e.plugins),s=new nn(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Ft.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=R.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],c=a.spec.state;if(a.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[o.name]=c.fromJSON.call(a,e,n[l],s);return}}s[o.name]=o.init(e,s)}}),s}}function hu(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=hu(i,e,{})),n[r]=i}return n}class ae{constructor(e){this.spec=e,this.props={},e.props&&hu(e.props,this,this.props),this.key=e.key?e.key.key:pu("plugin")}getState(e){return e[this.key]}}const xs=Object.create(null);function pu(t){return t in xs?t+"$"+ ++xs[t]:(xs[t]=0,t+"$")}class Oe{constructor(e="key"){this.key=pu(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const he=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},tr=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let ia=null;const We=function(t,e,n){let r=ia||(ia=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},Kt=function(t,e,n,r){return n&&(sa(t,e,n,r,-1)||sa(t,e,n,r,1))},Xp=/^(img|br|input|textarea|hr)$/i;function sa(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Pe(t))){let s=t.parentNode;if(!s||s.nodeType!=1||Qp(t)||Xp.test(t.nodeName)||t.contentEditable=="false")return!1;e=he(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?Pe(t):0}else return!1}}function Pe(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Gp(t,e,n){for(let r=e==0,i=e==Pe(t);r||i;){if(t==n)return!0;let s=he(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==Pe(t)}}function Qp(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Li=function(t){return t.focusNode&&Kt(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Tt(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function Zp(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function em(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:r.startOffset}}}const He=typeof navigator<"u"?navigator:null,oa=typeof document<"u"?document:null,St=He&&He.userAgent||"",Gs=/Edge\/(\d+)/.exec(St),mu=/MSIE \d/.exec(St),Qs=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(St),fe=!!(mu||Qs||Gs),ct=mu?document.documentMode:Qs?+Qs[1]:Gs?+Gs[1]:0,ve=!fe&&/gecko\/(\d+)/i.test(St);ve&&+(/Firefox\/(\d+)/.exec(St)||[0,0])[1];const Zs=!fe&&/Chrome\/(\d+)/.exec(St),ne=!!Zs,tm=Zs?+Zs[1]:0,se=!fe&&!!He&&/Apple Computer/.test(He.vendor),yn=se&&(/Mobile\/\w+/.test(St)||!!He&&He.maxTouchPoints>2),ye=yn||(He?/Mac/.test(He.platform):!1),nm=He?/Win/.test(He.platform):!1,we=/Android \d/.test(St),Bi=!!oa&&"webkitFontSmoothing"in oa.documentElement.style,rm=Bi?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function im(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Xe(t,e){return typeof t=="number"?t:t[e]}function sm(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function la(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;o=tr(o)){if(o.nodeType!=1)continue;let l=o,a=l==s.body,c=a?im(s):sm(l),u=0,f=0;if(e.top<c.top+Xe(r,"top")?f=-(c.top-e.top+Xe(i,"top")):e.bottom>c.bottom-Xe(r,"bottom")&&(f=e.bottom-c.bottom+Xe(i,"bottom")),e.left<c.left+Xe(r,"left")?u=-(c.left-e.left+Xe(i,"left")):e.right>c.right-Xe(r,"right")&&(u=e.right-c.right+Xe(i,"right")),u||f)if(a)s.defaultView.scrollBy(u,f);else{let d=l.scrollLeft,h=l.scrollTop;f&&(l.scrollTop+=f),u&&(l.scrollLeft+=u);let p=l.scrollLeft-d,m=l.scrollTop-h;e={left:e.left-p,top:e.top-m,right:e.right-p,bottom:e.bottom-m}}if(a||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function om(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let l=t.root.elementFromPoint(s,o);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,i=a.top;break}}return{refDOM:r,refTop:i,stack:gu(t.dom)}}function gu(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=tr(r));return e}function lm({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;yu(n,r==0?0:r-e)}function yu(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Xt=null;function am(t){if(t.setActive)return t.setActive();if(Xt)return t.focus(Xt);let e=gu(t);t.focus(Xt==null?{get preventScroll(){return Xt={preventScroll:!0},!0}}:void 0),Xt||(Xt=!1,yu(e,0))}function bu(t,e){let n,r=2e8,i,s=0,o=e.top,l=e.top,a,c;for(let u=t.firstChild,f=0;u;u=u.nextSibling,f++){let d;if(u.nodeType==1)d=u.getClientRects();else if(u.nodeType==3)d=We(u).getClientRects();else continue;for(let h=0;h<d.length;h++){let p=d[h];if(p.top<=o&&p.bottom>=l){o=Math.max(p.bottom,o),l=Math.min(p.top,l);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){n=u,r=m,i=m&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&m&&(s=f+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!a&&p.left<=e.left&&p.right>=e.left&&(a=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=f+1)}}return!n&&a&&(n=a,i=c,r=0),n&&n.nodeType==3?cm(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:bu(n,i)}function cm(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=Qe(r,1);if(s.top!=s.bottom&&Uo(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function Uo(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function um(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function fm(t,e,n){let{node:r,offset:i}=bu(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function dm(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let l=t.docView.nearestDesc(s,!0);if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent&&!o||!l.contentDOM)){let a=l.dom.getBoundingClientRect();if(l.node.isBlock&&l.parent&&!o&&(o=!0,a.left>r.left||a.top>r.top?i=l.posBefore:(a.right<r.left||a.bottom<r.top)&&(i=l.posAfter)),!l.contentDOM&&i<0&&!l.node.isText)return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter}s=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function Su(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let a=0;a<l.length;a++){let c=l[a];if(Uo(e,c))return Su(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function hm(t,e){let n=t.dom.ownerDocument,r,i=0,s=em(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!Uo(e,c)||(o=Su(t.dom,e,c),!o))return null}if(se)for(let c=o;r&&c;c=tr(c))c.draggable&&(r=void 0);if(o=um(o,e),r){if(ve&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let c=r.childNodes[i],u;c.nodeName=="IMG"&&(u=c.getBoundingClientRect()).right<=e.left&&u.bottom>e.top&&i++}r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=dm(t,r,i,e))}l==null&&(l=fm(t,o,e));let a=t.docView.nearestDesc(o,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function aa(t){return t.top<t.bottom||t.left<t.right}function Qe(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(aa(r))return r}return Array.prototype.find.call(n,aa)||t.getBoundingClientRect()}const pm=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function xu(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=Bi||ve;if(r.nodeType==3)if(o&&(pm.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let a=Qe(We(r,i,i),n);if(ve&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=Qe(We(r,i-1,i-1),-1);if(c.top==a.top){let u=Qe(We(r,i,i+1),-1);if(u.top!=a.top)return In(u,u.left<c.left)}}return a}else{let a=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(a--,u=1):n<0?a--:c++,In(Qe(We(r,a,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==Pe(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return ks(a.getBoundingClientRect(),!1)}if(s==null&&i<Pe(r)){let a=r.childNodes[i];if(a.nodeType==1)return ks(a.getBoundingClientRect(),!0)}return ks(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==Pe(r))){let a=r.childNodes[i-1],c=a.nodeType==3?We(a,Pe(a)-(o?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(c)return In(Qe(c,1),!1)}if(s==null&&i<Pe(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let c=a?a.nodeType==3?We(a,0,o?0:1):a.nodeType==1?a:null:null;if(c)return In(Qe(c,-1),!0)}return In(Qe(r.nodeType==3?We(r):r,-n),n>=0)}function In(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function ks(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function ku(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function mm(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return ku(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=xu(t,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=We(l,0,l.nodeValue.length).getClientRects();else continue;for(let c=0;c<a.length;c++){let u=a[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const gm=/[\u0590-\u08ac]/;function ym(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=t.domSelection();return!gm.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:o:ku(t,e,()=>{let{focusNode:a,focusOffset:c,anchorNode:u,anchorOffset:f}=t.domSelectionRange(),d=l.caretBidiLevel;l.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:m}=t.domSelectionRange(),g=p&&!h.contains(p.nodeType==1?p:p.parentNode)||a==p&&c==m;try{l.collapse(u,f),a&&(a!=u||c!=f)&&l.extend&&l.extend(a,c)}catch{}return d!=null&&(l.caretBidiLevel=d),g})}let ca=null,ua=null,fa=!1;function bm(t,e,n){return ca==e&&ua==n?fa:(ca=e,ua=n,fa=n=="up"||n=="down"?mm(t,e,n):ym(t,e,n))}const ke=0,da=1,Rt=2,$e=3;class dr{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=ke,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>he(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>e||o instanceof Eu){i=e-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof wu&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?he(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?he(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let a=this.children[l],c=o+a.size;if(i==-1&&e<=c){let u=o+a.border;if(e>=u&&n<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,u);e=o;for(let f=l;f>0;f--){let d=this.children[f-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=he(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(c>n||l==this.children.length-1)){n=c;for(let u=l+1;u<this.children.length;u++){let f=this.children[u];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){s=he(f.dom);break}n+=f.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let d=0,h=0;d<this.children.length;d++){let p=this.children[d],m=h+p.size;if(s>h&&o<m)return p.setSelection(e-h-p.border,n-h-p.border,r,i);h=m}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),c=r.getSelection(),u=!1;if((ve||se)&&e==n){let{node:d,offset:h}=l;if(d.nodeType==3){if(u=!!(h&&d.nodeValue[h-1]==`
`),u&&h==d.nodeValue.length)for(let p=d,m;p;p=p.parentNode){if(m=p.nextSibling){m.nodeName=="BR"&&(l=a={node:m.parentNode,offset:he(m)+1});break}let g=p.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let p=d.childNodes[h-1];u=p&&(p.nodeName=="BR"||p.contentEditable=="false")}}if(ve&&c.focusNode&&c.focusNode!=a.node&&c.focusNode.nodeType==1){let d=c.focusNode.childNodes[c.focusOffset];d&&d.contentEditable=="false"&&(i=!0)}if(!(i||u&&se)&&Kt(l.node,l.offset,c.anchorNode,c.anchorOffset)&&Kt(a.node,a.offset,c.focusNode,c.focusOffset))return;let f=!1;if((c.extend||e==n)&&!u){c.collapse(l.node,l.offset);try{e!=n&&c.extend(a.node,a.offset),f=!0}catch{}}if(!f){if(e>n){let h=l;l=a,a=h}let d=document.createRange();d.setEnd(a.node,a.offset),d.setStart(l.node,l.offset),c.removeAllRanges(),c.addRange(d)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let l=r+s.border,a=o-s.border;if(e>=l&&n<=a){this.dirty=e==r||n==o?Rt:da,e==l&&n==a&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=$e:s.markDirty(e-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Rt:$e}r=o}this.dirty=Rt}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Rt:da;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class wu extends dr{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==ke&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Sm extends dr{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class qt extends dr{constructor(e,n,r,i){super(e,[],r,i),this.mark=n}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=Be.renderSpec(document,n.type.spec.toDOM(n,r))),new qt(e,n,o.dom,o.contentDOM||o.dom)}parseRule(){return this.dirty&$e||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=$e&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=ke){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ke}}slice(e,n,r){let i=qt.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=no(s,n,o,r)),e>0&&(s=no(s,0,e,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}}class ut extends dr{constructor(e,n,r,i,s,o,l,a,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,n,r,i,s,o){let l=s.nodeViews[n.type.name],a,c=l&&l(n,s,()=>{if(!a)return o;if(a.parent)return a.parent.posBeforeChild(a)},r,i),u=c&&c.dom,f=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:f}=Be.renderSpec(document,n.type.spec.toDOM(n)));!f&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let d=u;return u=Cu(u,r,n),c?a=new xm(e,n,r,i,u,f||null,d,c,s,o+1):n.isText?new Fi(e,n,r,i,u,d,s):new ut(e,n,r,i,u,f||null,d,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>x.empty)}return e}matchesNode(e,n,r){return this.dirty==ke&&e.eq(this.node)&&to(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,a=new wm(this,o&&o.node,e);vm(this.node,this.innerDeco,(c,u,f)=>{c.spec.marks?a.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!f&&a.syncToMarks(u==this.node.childCount?P.none:this.node.child(u).marks,r,e),a.placeWidget(c,e,i)},(c,u,f,d)=>{a.syncToMarks(c.marks,r,e);let h;a.findNodeMatch(c,u,f,d)||l&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(h=a.findIndexWithChild(s.node))>-1&&a.updateNodeAt(c,u,f,h,e)||a.updateNextNode(c,u,f,e,d,i)||a.addNode(c,u,f,e,i),i+=c.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==Rt)&&(o&&this.protectLocalComposition(e,o),Mu(this.contentDOM,this.children,e),yn&&Cm(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof _)||r<n||i>n+this.node.content.size)return null;let s=e.domSelectionRange(),o=Tm(s.focusNode,s.focusOffset);if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let l=o.nodeValue,a=Om(this.node.content,l,r-n,i-n);return a<0?null:{node:o,pos:a,text:l}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new Sm(this,s,n,i);e.input.compositionNodes.push(o),this.children=no(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==$e||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=ke}updateOuterDeco(e){if(to(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=vu(this.dom,this.nodeDOM,eo(this.outerDeco,this.node,n),eo(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function ha(t,e,n,r,i){Cu(r,e,t);let s=new ut(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Fi extends ut{constructor(e,n,r,i,s,o,l){super(e,n,r,i,s,null,o,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==$e||this.dirty!=ke&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=ke||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=ke,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new Fi(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=$e)}get domAtom(){return!1}}class Eu extends dr{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ke&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class xm extends ut{constructor(e,n,r,i,s,o,l,a,c,u){super(e,n,r,i,s,o,l,c,u),this.spec=a}update(e,n,r,i){if(this.dirty==$e)return!1;if(this.spec.update){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Mu(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],l=o.dom;if(l.parentNode==t){for(;l!=r;)r=pa(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(o instanceof qt){let a=r?r.previousSibling:t.lastChild;Mu(o.contentDOM,o.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=pa(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Wn=function(t){t&&(this.nodeName=t)};Wn.prototype=Object.create(null);const Dt=[new Wn];function eo(t,e,n){if(t.length==0)return Dt;let r=n?Dt[0]:new Wn,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new Wn(o.nodeName));for(let l in o){let a=o[l];a!=null&&(n&&i.length==1&&i.push(r=new Wn(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return i}function vu(t,e,n,r){if(n==Dt&&r==Dt)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],l=n[s];if(s){let a;l&&l.nodeName==o.nodeName&&i!=t&&(a=i.parentNode)&&a.nodeName.toLowerCase()==o.nodeName||(a=document.createElement(o.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=Dt[0]),i=a}km(i,l||Dt[0],o)}return i}function km(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function Cu(t,e,n){return vu(t,t,Dt,eo(e,n,t.nodeType!=1))}function to(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function pa(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class wm{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Em(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=ke,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let c=this.top.children[a];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=qt.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let c=this.top.children[l];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==$e&&o.dom==o.contentDOM&&(o.dirty=Rt),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof ut){let c=this.preMatch.matched.get(a);if(c!=null&&c!=s)return!1;let u=a.dom,f,d=this.isLocked(u)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=$e&&to(n,a.outerDeco));if(!d&&a.update(e,n,r,i))return this.destroyBetween(this.index,l),a.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(f=this.recreateWrapper(a,e,n,r,i,o)))return this.top.children[this.index]=f,f.dirty=Rt,f.updateChildren(i,o+1),f.dirty=ke,this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content))return null;let l=ut.create(this.top,n,r,i,s,o);if(!l.contentDOM)return null;l.children=e.children,e.children=[],e.destroy();for(let a of l.children)a.parent=l;return l}addNode(e,n,r,i,s){let o=ut.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new wu(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof qt;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Fi)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((se||ne)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Eu(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Em(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let c=n.children[r-1];if(c instanceof qt)n=c,r=c.children.length;else{l=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function Mm(t,e){return t.type.side-e.type.side}function vm(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,l=[],a=null;for(let c=0;;){if(o<i.length&&i[o].to==s){let p=i[o++],m;for(;o<i.length&&i[o].to==s;)(m||(m=[p])).push(i[o++]);if(m){m.sort(Mm);for(let g=0;g<m.length;g++)n(m[g],c,!!a)}else n(p,c,!!a)}let u,f;if(a)f=-1,u=a,a=null;else if(c<t.childCount)f=c,u=t.child(c++);else break;for(let p=0;p<l.length;p++)l[p].to<=s&&l.splice(p--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let d=s+u.nodeSize;if(u.isText){let p=d;o<i.length&&i[o].from<p&&(p=i[o].from);for(let m=0;m<l.length;m++)l[m].to<p&&(p=l[m].to);p<d&&(a=u.cut(p-s),u=u.cut(0,p-s),d=p,f=-1)}let h=u.isInline&&!u.isLeaf?l.filter(p=>!p.inline):l.slice();r(u,h,e.forChild(s,u),f),s=d}}function Cm(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Tm(t,e){for(;;){if(t.nodeType==3)return t;if(t.nodeType==1&&e>0){if(t.childNodes.length>e&&t.childNodes[e].nodeType==3)return t.childNodes[e];t=t.childNodes[e-1],e=Pe(t)}else if(t.nodeType==1&&e<t.childNodes.length)t=t.childNodes[e],e=0;else return null}}function Om(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let a=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;a+=c.text}if(s>=n){let c=l<r?a.lastIndexOf(e,r-l-1):-1;if(c>=0&&c+e.length+l>=n)return l+c;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function no(t,e,n,r,i){let s=[];for(let o=0,l=0;o<t.length;o++){let a=t[o],c=l,u=l+=a.size;c>=n||u<=e?s.push(a):(c<e&&s.push(a.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>n&&s.push(a.slice(n-c,a.size,r)))}return s}function Ko(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),a,c;if(Li(n)){for(a=l;i&&!i.node;)i=i.parent;let u=i.node;if(i&&u.isAtom&&T.isSelectable(u)&&i.parent&&!(u.isInline&&Gp(n.focusNode,n.focusOffset,i.dom))){let f=i.posBefore;c=new T(o==f?l:r.resolve(f))}}else{let u=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null;a=r.resolve(u)}if(!c){let u=e=="pointer"||t.state.selection.head<l.pos&&!s?1:-1;c=qo(t,a,l,u)}return c}function Tu(t){return t.editable?t.hasFocus():Au(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Ke(t,e=!1){let n=t.state.selection;if(Ou(t,n),!!Tu(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&ne){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Kt(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)Nm(t);else{let{anchor:r,head:i}=n,s,o;ma&&!(n instanceof _)&&(n.$from.parent.inlineContent||(s=ga(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=ga(t,n.to))),t.docView.setSelection(r,i,t.root,e),ma&&(s&&ya(s),o&&ya(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Am(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const ma=se||ne&&tm<63;function ga(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(se&&i&&i.contentEditable=="false")return ws(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return ws(i);if(s)return ws(s)}}function ws(t){return t.contentEditable="true",se&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function ya(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function Am(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Tu(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function Nm(t){let e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setEnd(r.parentNode,he(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&fe&&ct<=11&&(r.disabled=!0,r.disabled=!1)}function Ou(t,e){if(e instanceof T){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(ba(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else ba(t)}function ba(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function qo(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||_.between(e,n,r)}function Sa(t){return t.editable&&!t.hasFocus()?!1:Au(t)}function Au(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Rm(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Kt(e.node,e.offset,n.anchorNode,n.anchorOffset)}function ro(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&R.findFrom(s,e)}function Ot(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function xa(t,e,n){let r=t.state.selection;if(r instanceof _){if(!r.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"forward":"backward")){let i=ro(t.state,e);return i&&i instanceof T?Ot(t,i):!1}else if(!(ye&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(l))&&!o.contentDOM?T.isSelectable(s)?Ot(t,new T(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Bi?Ot(t,new _(t.state.doc.resolve(e<0?l:l+s.nodeSize))):!1:!1}}else{if(r instanceof T&&r.node.isInline)return Ot(t,new _(e>0?r.$to:r.$from));{let i=ro(t.state,e);return i?Ot(t,i):!1}}}function ei(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Un(t){let e=t.pmViewDesc;return e&&e.size==0&&(t.nextSibling||t.nodeName!="BR")}function Pn(t,e){return e<0?Dm(t):Nu(t)}function Dm(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(ve&&n.nodeType==1&&r<ei(n)&&Un(n.childNodes[r])&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(Un(l))i=n,s=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(Ru(n))break;{let l=n.previousSibling;for(;l&&Un(l);)i=n.parentNode,s=he(l),l=l.previousSibling;if(l)n=l,r=ei(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?io(t,n,r):i&&io(t,i,s)}function Nu(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=ei(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(Un(l))s=n,o=++r;else break}else{if(Ru(n))break;{let l=n.nextSibling;for(;l&&Un(l);)s=l.parentNode,o=he(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=ei(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&io(t,s,o)}function Ru(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function io(t,e,n){let r=t.domSelection();if(Li(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Ke(t)},50)}function ka(t,e){let n=t.state.doc.resolve(e);if(!(ne||nm)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function wa(t,e,n){let r=t.state.selection;if(r instanceof _&&!r.empty||n.indexOf("s")>-1||ye&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=ro(t.state,e);if(o&&o instanceof T)return Ot(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,l=r instanceof Me?R.near(o,e):R.findFrom(o,e);return l?Ot(t,l):!1}return!1}function Ea(t,e){if(!(t.state.selection instanceof _))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function Ma(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function _m(t){if(!se||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Ma(t,r,"true"),setTimeout(()=>Ma(t,r,"false"),20)}return!1}function Im(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function Pm(t,e){let n=e.keyCode,r=Im(e);if(n==8||ye&&n==72&&r=="c")return Ea(t,-1)||Pn(t,-1);if(n==46&&!e.shiftKey||ye&&n==68&&r=="c")return Ea(t,1)||Pn(t,1);if(n==13||n==27)return!0;if(n==37||ye&&n==66&&r=="c"){let i=n==37?ka(t,t.state.selection.from)=="ltr"?-1:1:-1;return xa(t,i,r)||Pn(t,i)}else if(n==39||ye&&n==70&&r=="c"){let i=n==39?ka(t,t.state.selection.from)=="ltr"?1:-1:1;return xa(t,i,r)||Pn(t,i)}else{if(n==38||ye&&n==80&&r=="c")return wa(t,-1,r)||Pn(t,-1);if(n==40||ye&&n==78&&r=="c")return _m(t)||wa(t,1,r)||Nu(t);if(r==(ye?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Du(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=t.someProp("clipboardSerializer")||Be.fromSchema(t.state.schema),l=Fu(),a=l.createElement("div");a.appendChild(o.serializeFragment(r,{document:l}));let c=a.firstChild,u,f=0;for(;c&&c.nodeType==1&&(u=Bu[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let p=l.createElement(u[h]);for(;a.firstChild;)p.appendChild(a.firstChild);a.appendChild(p),f++}c=a.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${f?` -${f}`:""} ${JSON.stringify(n)}`);let d=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:d}}function _u(t,e,n,r,i){let s=i.parent.type.spec.code,o,l;if(!n&&!e)return null;let a=e&&(r||s||!n);if(a){if(t.someProp("transformPastedText",d=>{e=d(e,s||r,t)}),s)return e?new E(x.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):E.empty;let f=t.someProp("clipboardTextParser",d=>d(e,i,r,t));if(f)l=f;else{let d=i.marks(),{schema:h}=t.state,p=Be.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=o.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(h.text(m,d)))})}}else t.someProp("transformPastedHTML",f=>{n=f(n,t)}),o=Fm(n),Bi&&zm(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let f=+u[3];f>0;f--){let d=o.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;o=d}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||pn.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(a||u),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!Lm.test(d.parentNode.nodeName)?{ignore:!0}:null}})),u)l=Hm(va(l,+u[1],+u[2]),u[4]);else if(l=E.maxOpen(Bm(l.content,i),!0),l.openStart||l.openEnd){let f=0,d=0;for(let h=l.content.firstChild;f<l.openStart&&!h.type.spec.isolating;f++,h=h.firstChild);for(let h=l.content.lastChild;d<l.openEnd&&!h.type.spec.isolating;d++,h=h.lastChild);l=va(l,f,d)}return t.someProp("transformPasted",f=>{l=f(l,t)}),l}const Lm=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Bm(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(l=>{if(!o)return;let a=i.findWrapping(l.type),c;if(!a)return o=null;if(c=o.length&&s.length&&Pu(a,s,l,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=Lu(o[o.length-1],s.length));let u=Iu(l,a);o.push(u),i=i.matchType(u.type),s=a}}),o)return x.from(o)}return t}function Iu(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,x.from(t));return t}function Pu(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=Pu(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(x.from(Iu(n,t,i+1))))}}function Lu(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,Lu(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(x.empty,!0);return t.copy(n.append(r))}function so(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,l=o.content;return t.childCount>1&&(s=0),i<r-1&&(l=so(l,e,n,r,i+1,s)),i>=n&&(l=e<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(x.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(l))}function va(t,e,n){return e<t.openStart&&(t=new E(so(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new E(so(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const Bu={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Ca=null;function Fu(){return Ca||(Ca=document.implementation.createHTMLDocument("title"))}function Fm(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=Fu().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&Bu[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=t,i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function zm(t){let e=t.querySelectorAll(ne?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function Hm(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=x.from(a.create(r[l+1],i)),s++,o++}return new E(i,s,o)}const oe={},le={},$m={touchstart:!0,touchmove:!0};class jm{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Vm(t){for(let e in oe){let n=oe[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{Um(t,r)&&!Jo(t,r)&&(t.editable||!(r.type in le))&&n(t,r)},$m[e]?{passive:!0}:void 0)}se&&t.dom.addEventListener("input",()=>null),oo(t)}function st(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Wm(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function oo(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Jo(t,r))})}function Jo(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function Um(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Km(t,e){!Jo(t,e)&&oe[e.type]&&(t.editable||!(e.type in le))&&oe[e.type](t,e)}le.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!Hu(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(we&&ne&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),yn&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Tt(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||Pm(t,n)?n.preventDefault():st(t,"key")};le.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};le.keypress=(t,e)=>{let n=e;if(Hu(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||ye&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof _)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function zi(t){return{left:t.clientX,top:t.clientY}}function qm(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Yo(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,l=>o>s.depth?l(t,n,s.nodeAfter,s.before(o),i,!0):l(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function dn(t,e,n){t.focused||t.focus();let r=t.state.tr.setSelection(e);n=="pointer"&&r.setMeta("pointer",!0),t.dispatch(r)}function Jm(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&T.isSelectable(r)?(dn(t,new T(n),"pointer"),!0):!1}function Ym(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof T&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(T.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(dn(t,T.create(t.state.doc,i),"pointer"),!0):!1}function Xm(t,e,n,r,i){return Yo(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?Ym(t,n):Jm(t,n))}function Gm(t,e,n,r){return Yo(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function Qm(t,e,n,r){return Yo(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||Zm(t,n,r)}function Zm(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(dn(t,_.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)dn(t,_.create(r,l+1,l+1+o.content.size),"pointer");else if(T.isSelectable(o))dn(t,T.create(r,l),"pointer");else continue;return!0}}function Xo(t){return ti(t)}const zu=ye?"metaKey":"ctrlKey";oe.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Xo(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&qm(n,t.input.lastClick)&&!n[zu]&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s};let o=t.posAtCoords(zi(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new eg(t,o,n,!!r)):(s=="doubleClick"?Gm:Qm)(t,o.pos,o.inside,n)?n.preventDefault():st(t,"pointer"))};class eg{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[zu],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}const l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a?a.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof T&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&ve&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),st(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ke(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(zi(e))),this.updateAllowDefault(e),this.allowDefault||!n?st(this.view,"pointer"):Xm(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||se&&this.mightDrag&&!this.mightDrag.node.isAtom||ne&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(dn(this.view,R.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):st(this.view,"pointer")}move(e){this.updateAllowDefault(e),st(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}oe.touchstart=t=>{t.input.lastTouch=Date.now(),Xo(t),st(t,"pointer")};oe.touchmove=t=>{t.input.lastTouch=Date.now(),st(t,"pointer")};oe.contextmenu=t=>Xo(t);function Hu(t,e){return t.composing?!0:se&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const tg=we?5e3:-1;le.compositionstart=le.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),ti(t,!0),t.markCursor=null;else if(ti(t),ve&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){t.domSelection().collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}$u(t,tg)};le.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionID++,$u(t,20))};function $u(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>ti(t),e))}function ju(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=ng());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function ng(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function ti(t,e=!1){if(!(we&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),ju(t),e||t.docView&&t.docView.dirty){let n=Ko(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}function rg(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const bn=fe&&ct<15||yn&&rm<604;oe.copy=le.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=bn?null:n.clipboardData,o=r.content(),{dom:l,text:a}=Du(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",a)):rg(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function ig(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function sg(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?nr(t,r.value,null,i,e):nr(t,r.textContent,r.innerHTML,i,e)},50)}function nr(t,e,n,r,i){let s=_u(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,i,s||E.empty)))return!0;if(!s)return!1;let o=ig(s),l=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}le.paste=(t,e)=>{let n=e;if(t.composing&&!we)return;let r=bn?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&nr(t,r.getData("text/plain"),r.getData("text/html"),i,n)?n.preventDefault():sg(t,n)};class og{constructor(e,n){this.slice=e,this.move=n}}const Vu=ye?"altKey":"ctrlKey";oe.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(zi(n));if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof T?i.to-1:i.to))){if(r&&r.mightDrag)t.dispatch(t.state.tr.setSelection(T.create(t.state.doc,r.mightDrag.pos)));else if(n.target&&n.target.nodeType==1){let c=t.docView.nearestDesc(n.target,!0);c&&c.node.type.spec.draggable&&c!=t.docView&&t.dispatch(t.state.tr.setSelection(T.create(t.state.doc,c.posBefore)))}}let o=t.state.selection.content(),{dom:l,text:a}=Du(t,o);n.dataTransfer.clearData(),n.dataTransfer.setData(bn?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",bn||n.dataTransfer.setData("text/plain",a),t.dragging=new og(o,!n[Vu])};oe.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};le.dragover=le.dragenter=(t,e)=>e.preventDefault();le.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(zi(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",p=>{o=p(o,t)}):o=_u(t,n.dataTransfer.getData(bn?"Text":"text/plain"),bn?null:n.dataTransfer.getData("text/html"),!1,s);let l=!!(r&&!n[Vu]);if(t.someProp("handleDrop",p=>p(t,n,o||E.empty,l))){n.preventDefault();return}if(!o)return;n.preventDefault();let a=o?lu(t.state.doc,s.pos,o):s.pos;a==null&&(a=s.pos);let c=t.state.tr;l&&c.deleteSelection();let u=c.mapping.map(a),f=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,d=c.doc;if(f?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(d))return;let h=c.doc.resolve(u);if(f&&T.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new T(h));else{let p=c.mapping.map(a);c.mapping.maps[c.mapping.maps.length-1].forEach((m,g,y,b)=>p=b),c.setSelection(qo(t,h,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};oe.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Ke(t)},20))};oe.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};oe.beforeinput=(t,e)=>{if(ne&&we&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Tt(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in le)oe[t]=le[t];function rr(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Go{constructor(e,n){this.toDOM=e,this.spec=n||zt,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new Se(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Go&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&rr(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ft{constructor(e,n){this.attrs=e,this.spec=n||zt}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new Se(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof ft&&rr(this.attrs,e.attrs)&&rr(this.spec,e.spec)}static is(e){return e.type instanceof ft}destroy(){}}class Qo{constructor(e,n){this.attrs=e,this.spec=n||zt}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Se(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof Qo&&rr(this.attrs,e.attrs)&&rr(this.spec,e.spec)}destroy(){}}class Se{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Se(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Se(e,e,new Go(n,r))}static inline(e,n,r,i){return new Se(e,n,new ft(r,i))}static node(e,n,r,i){return new Se(e,n,new Qo(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof ft}}const Zt=[],zt={};class W{constructor(e,n){this.local=e.length?e:Zt,this.children=n.length?n:Zt}static create(e,n){return n.length?ni(n,e,0,zt):ee}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=e&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let l=this.children[o]+1;this.children[o+2].findInner(e-l,n-l,r,i+l,s)}}map(e,n,r){return this==ee||e.maps.length==0?this:this.mapInner(e,n,0,0,r||zt)}mapInner(e,n,r,i,s){let o;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(n,a)?(o||(o=[])).push(a):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?lg(this.children,o||[],e,n,r,i,s):o?new W(o.sort(Ht),Zt):ee}add(e,n){return n.length?this==ee?W.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((l,a)=>{let c=a+r,u;if(u=Uu(n,l,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<a;)s+=3;i[s]==a?i[s+2]=i[s+2].addInner(l,u,c+1):i.splice(s,0,a,a+l.nodeSize,ni(u,l,c+1,zt)),s+=3}});let o=Wu(s?Ku(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||o.splice(l--,1);return new W(o.length?this.local.concat(o).sort(Ht):this.local,i||this.children)}remove(e){return e.length==0||this==ee?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+n,a=r[s+1]+n;for(let u=0,f;u<e.length;u++)(f=e[u])&&f.from>l&&f.to<a&&(e[u]=null,(o||(o=[])).push(f));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,l+1);c!=ee?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let l=0;l<i.length;l++)i[l].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new W(i,r):ee}forChild(e,n){if(this==ee)return this;if(n.isLeaf)return W.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let s=e+1,o=s+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<o&&a.to>s&&a.type instanceof ft){let c=Math.max(s,a.from)-s,u=Math.min(o,a.to)-s;c<u&&(i||(i=[])).push(a.copy(c,u))}}if(i){let l=new W(i.sort(Ht),Zt);return r?new tt([l,r]):l}return r||ee}eq(e){if(this==e)return!0;if(!(e instanceof W)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Zo(this.localsInner(e))}localsInner(e){if(this==ee)return Zt;if(e.inlineContent||!this.local.some(ft.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ft||n.push(this.local[r]);return n}}W.empty=new W([],[]);W.removeOverlap=Zo;const ee=W.empty;class tt{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,zt));return tt.from(r)}forChild(e,n){if(n.isLeaf)return W.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=ee&&(s instanceof tt?r=r.concat(s.members):r.push(s))}return tt.from(r)}eq(e){if(!(e instanceof tt)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?Zo(r?n:n.sort(Ht)):Zt}static from(e){switch(e.length){case 0:return ee;case 1:return e[0];default:return new tt(e.every(n=>n instanceof W)?e:e.reduce((n,r)=>n.concat(r instanceof W?r:r.members),[]))}}}function lg(t,e,n,r,i,s,o){let l=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let f=0;n.maps[c].forEach((d,h,p,m)=>{let g=m-p-(h-d);for(let y=0;y<l.length;y+=3){let b=l[y+1];if(b<0||d>b+u-f)continue;let w=l[y]+u-f;h>=w?l[y+1]=d<=w?-2:-1:p>=i&&g&&(l[y]+=g,l[y+1]+=g)}f+=g}),u=n.maps[c].map(u,-1)}let a=!1;for(let c=0;c<l.length;c+=3)if(l[c+1]<0){if(l[c+1]==-2){a=!0,l[c+1]=-1;continue}let u=n.map(t[c]+s),f=u-i;if(f<0||f>=r.content.size){a=!0;continue}let d=n.map(t[c+1]+s,-1),h=d-i,{index:p,offset:m}=r.content.findIndex(f),g=r.maybeChild(p);if(g&&m==f&&m+g.nodeSize==h){let y=l[c+2].mapInner(n,g,u+1,t[c]+s+1,o);y!=ee?(l[c]=f,l[c+1]=h,l[c+2]=y):(l[c+1]=-2,a=!0)}else a=!0}if(a){let c=ag(l,t,e,n,i,s,o),u=ni(c,r,0,o);e=u.local;for(let f=0;f<l.length;f+=3)l[f+1]<0&&(l.splice(f,3),f-=3);for(let f=0,d=0;f<u.children.length;f+=3){let h=u.children[f];for(;d<l.length&&l[d]<h;)d+=3;l.splice(d,0,u.children[f],u.children[f+1],u.children[f+2])}}return new W(e.sort(Ht),l)}function Wu(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Se(i.from+e,i.to+e,i.type))}return n}function ag(t,e,n,r,i,s,o){function l(a,c){for(let u=0;u<a.local.length;u++){let f=a.local[u].map(r,i,c);f?n.push(f):o.onRemove&&o.onRemove(a.local[u].spec)}for(let u=0;u<a.children.length;u+=3)l(a.children[u+2],a.children[u]+c+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+s+1);return n}function Uu(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function Ku(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function ni(t,e,n,r){let i=[],s=!1;e.forEach((l,a)=>{let c=Uu(t,l,a+n);if(c){s=!0;let u=ni(c,l,n+a+1,r);u!=ee&&i.push(a,a+l.nodeSize,u)}});let o=Wu(s?Ku(t):t,-n).sort(Ht);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new W(o,i):ee}function Ht(t,e){return t.from-e.from||t.to-e.to}function Zo(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),Ta(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),Ta(e,i,r.copy(s.from,r.to)));break}}}return e}function Ta(t,e,n){for(;e<t.length&&Ht(n,t[e])>0;)e++;t.splice(e,0,n)}function Es(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=ee&&e.push(r)}),t.cursorWrapper&&e.push(W.create(t.state.doc,[t.cursorWrapper.deco])),tt.from(e)}const cg={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},ug=fe&&ct<=11;class fg{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class dg{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new fg,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);fe&&ct<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),ug&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,cg)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Sa(this.view)){if(this.suppressingSelectionUpdates)return Ke(this.view);if(fe&&ct<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Kt(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=tr(s))n.add(s);for(let s=e.anchorNode;s;s=tr(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.observer?this.observer.takeRecords():[];this.queue.length&&(n=this.queue.concat(n),this.queue.length=0);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Sa(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,l=!1,a=[];if(e.editable)for(let u=0;u<n.length;u++){let f=this.registerMutation(n[u],a);f&&(s=s<0?f.from:Math.min(f.from,s),o=o<0?f.to:Math.max(f.to,o),f.typeOver&&(l=!0))}if(ve&&a.length>1){let u=a.filter(f=>f.nodeName=="BR");if(u.length==2){let f=u[0],d=u[1];f.parentNode&&f.parentNode.parentNode==d.parentNode?d.remove():f.remove()}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Li(r)&&(c=Ko(e))&&c.eq(R.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Ke(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),hg(e)),this.handleDOMChange(s,o,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Ke(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++)n.push(e.addedNodes[u]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(fe&&ct<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:f,nextSibling:d}=e.addedNodes[u];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d)}let o=i&&i.parentNode==e.target?he(i)+1:0,l=r.localPosFromDOM(e.target,o,-1),a=s&&s.parentNode==e.target?he(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,a,1);return{from:l,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let Oa=new WeakMap,Aa=!1;function hg(t){if(!Oa.has(t)&&(Oa.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=ve,Aa)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Aa=!0}}function pg(t){let e;function n(a){a.preventDefault(),a.stopImmediatePropagation(),e=a.getTargetRanges()[0]}t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0);let r=e.startContainer,i=e.startOffset,s=e.endContainer,o=e.endOffset,l=t.domAtPos(t.state.selection.anchor);return Kt(l.node,l.offset,s,o)&&([r,i,s,o]=[s,o,r,i]),{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}}function mg(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=t.docView.parseRange(e,n),a=t.domSelectionRange(),c,u=a.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:a.anchorOffset}],Li(a)||c.push({node:a.focusNode,offset:a.focusOffset})),ne&&t.input.lastKeyCode===8)for(let g=s;g>i;g--){let y=r.childNodes[g-1],b=y.pmViewDesc;if(y.nodeName=="BR"&&!b){s=g;break}if(!b||b.size)break}let f=t.state.doc,d=t.someProp("domParser")||pn.fromSchema(t.state.schema),h=f.resolve(o),p=null,m=d.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:s,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:gg,context:h});if(c&&c[0].pos!=null){let g=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=g),p={anchor:g+o,head:y+o}}return{doc:m,sel:p,from:o,to:l}}function gg(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(se&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||se&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const yg=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function bg(t,e,n,r,i){if(e<0){let O=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,me=Ko(t,O);if(me&&!t.state.selection.eq(me)){if(ne&&we&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",Nn=>Nn(t,Tt(13,"Enter"))))return;let Je=t.state.tr.setSelection(me);O=="pointer"?Je.setMeta("pointer",!0):O=="key"&&Je.scrollIntoView(),t.composing&&Je.setMeta("composition",t.input.compositionID),t.dispatch(Je)}return}let s=t.state.doc.resolve(e),o=s.sharedDepth(n);e=s.before(o+1),n=t.state.doc.resolve(n).after(o+1);let l=t.state.selection,a=mg(t,e,n),c=t.state.doc,u=c.slice(a.from,a.to),f,d;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,d="end"):(f=t.state.selection.from,d="start"),t.input.lastKeyCode=null;let h=kg(u.content,a.doc.content,a.from,f,d);if((yn&&t.input.lastIOSEnter>Date.now()-225||we)&&i.some(O=>O.nodeType==1&&!yg.test(O.nodeName))&&(!h||h.endA>=h.endB)&&t.someProp("handleKeyDown",O=>O(t,Tt(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!h)if(r&&l instanceof _&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(a.sel&&a.sel.anchor!=a.sel.head))h={start:l.from,endA:l.to,endB:l.to};else{if(a.sel){let O=Na(t,t.state.doc,a.sel);if(O&&!O.eq(t.state.selection)){let me=t.state.tr.setSelection(O);t.composing&&me.setMeta("composition",t.input.compositionID),t.dispatch(me)}}return}if(ne&&t.cursorWrapper&&a.sel&&a.sel.anchor==t.cursorWrapper.deco.from&&a.sel.head==a.sel.anchor){let O=h.endB-h.start;a.sel={anchor:a.sel.anchor+O,head:a.sel.anchor+O}}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&h.start==h.endB&&t.state.selection instanceof _&&(h.start>t.state.selection.from&&h.start<=t.state.selection.from+2&&t.state.selection.from>=a.from?h.start=t.state.selection.from:h.endA<t.state.selection.to&&h.endA>=t.state.selection.to-2&&t.state.selection.to<=a.to&&(h.endB+=t.state.selection.to-h.endA,h.endA=t.state.selection.to)),fe&&ct<=11&&h.endB==h.start+1&&h.endA==h.start&&h.start>a.from&&a.doc.textBetween(h.start-a.from-1,h.start-a.from+1)==" "&&(h.start--,h.endA--,h.endB--);let p=a.doc.resolveNoCache(h.start-a.from),m=a.doc.resolveNoCache(h.endB-a.from),g=c.resolve(h.start),y=p.sameParent(m)&&p.parent.inlineContent&&g.end()>=h.endA,b;if((yn&&t.input.lastIOSEnter>Date.now()-225&&(!y||i.some(O=>O.nodeName=="DIV"||O.nodeName=="P"))||!y&&p.pos<a.doc.content.size&&!p.sameParent(m)&&(b=R.findFrom(a.doc.resolve(p.pos+1),1,!0))&&b.head==m.pos)&&t.someProp("handleKeyDown",O=>O(t,Tt(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>h.start&&xg(c,h.start,h.endA,p,m)&&t.someProp("handleKeyDown",O=>O(t,Tt(8,"Backspace")))){we&&ne&&t.domObserver.suppressSelectionUpdates();return}ne&&we&&h.endB==h.start&&(t.input.lastAndroidDelete=Date.now()),we&&!y&&p.start()!=m.start()&&m.parentOffset==0&&p.depth==m.depth&&a.sel&&a.sel.anchor==a.sel.head&&a.sel.head==h.endA&&(h.endB-=2,m=a.doc.resolveNoCache(h.endB-a.from),setTimeout(()=>{t.someProp("handleKeyDown",function(O){return O(t,Tt(13,"Enter"))})},20));let w=h.start,A=h.endA,D,C,L;if(y){if(p.pos==m.pos)fe&&ct<=11&&p.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ke(t),20)),D=t.state.tr.delete(w,A),C=c.resolve(h.start).marksAcross(c.resolve(h.endA));else if(h.endA==h.endB&&(L=Sg(p.parent.content.cut(p.parentOffset,m.parentOffset),g.parent.content.cut(g.parentOffset,h.endA-g.start()))))D=t.state.tr,L.type=="add"?D.addMark(w,A,L.mark):D.removeMark(w,A,L.mark);else if(p.parent.child(p.index()).isText&&p.index()==m.index()-(m.textOffset?0:1)){let O=p.parent.textBetween(p.parentOffset,m.parentOffset);if(t.someProp("handleTextInput",me=>me(t,w,A,O)))return;D=t.state.tr.insertText(O,w,A)}}if(D||(D=t.state.tr.replace(w,A,a.doc.slice(h.start-a.from,h.endB-a.from))),a.sel){let O=Na(t,D.doc,a.sel);O&&!(ne&&we&&t.composing&&O.empty&&(h.start!=h.endB||t.input.lastAndroidDelete<Date.now()-100)&&(O.head==w||O.head==D.mapping.map(A)-1)||fe&&O.empty&&O.head==w)&&D.setSelection(O)}C&&D.ensureMarks(C),t.composing&&D.setMeta("composition",t.input.compositionID),t.dispatch(D.scrollIntoView())}function Na(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:qo(t,e.resolve(n.anchor),e.resolve(n.head))}function Sg(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,l,a;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",a=u=>u.mark(l.addToSet(u.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",a=u=>u.mark(l.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(a(e.child(u)));if(x.from(c).eq(t))return{mark:l,type:o}}function xg(t,e,n,r,i){if(!r.parent.isTextblock||n-e<=i.pos-r.pos||Ms(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(Ms(s,!0,!0));return!o.parent.isTextblock||o.pos>n||Ms(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Ms(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function kg(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let a=Math.max(0,s-Math.min(o,l));r-=o+a-s}if(o<s&&t.size<e.size){let a=r<=s&&r>=o?s-r:0;s-=a,l=s+(l-o),o=s}else if(l<s){let a=r<=s&&r>=l?s-r:0;s-=a,o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}class wg{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new jm,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Pa),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=_a(this),Da(this),this.nodeViews=Ia(this),this.docView=ha(this.state.doc,Ra(this),Es(this),this.dom,this),this.domObserver=new dg(this,(r,i,s,o)=>bg(this,r,i,s,o)),this.domObserver.start(),Vm(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&oo(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Pa),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){let r=this.state,i=!1,s=!1;e.storedMarks&&this.composing&&(ju(this),s=!0),this.state=e;let o=r.plugins!=e.plugins||this._props.plugins!=n.plugins;if(o||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let d=Ia(this);Mg(d,this.nodeViews)&&(this.nodeViews=d,i=!0)}(o||n.handleDOMEvents!=this._props.handleDOMEvents)&&oo(this),this.editable=_a(this),Da(this);let l=Es(this),a=Ra(this),c=r.plugins!=e.plugins&&!r.doc.eq(e.doc)?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",u=i||!this.docView.matchesNode(e.doc,a,l);(u||!e.selection.eq(r.selection))&&(s=!0);let f=c=="preserve"&&s&&this.dom.style.overflowAnchor==null&&om(this);if(s){this.domObserver.stop();let d=u&&(fe||ne)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&Eg(r.selection,e.selection);if(u){let h=ne?this.trackWrites=this.domSelectionRange().focusNode:null;(i||!this.docView.update(e.doc,a,l,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=ha(e.doc,a,l,this.dom,this)),h&&!this.trackWrites&&(d=!0)}d||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Rm(this))?Ke(this,d):(Ou(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():f&&lm(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof T){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&la(this,n.getBoundingClientRect(),e)}else la(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[e];if(l!=null&&(i=n?n(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(fe){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&am(this.dom),Ke(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}posAtCoords(e){return hm(this,e)}coordsAtPos(e,n=1){return xu(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return bm(this,n||this.state,e)}pasteHTML(e,n){return nr(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return nr(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(Wm(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Es(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Km(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return se&&this.root.nodeType===11&&Zp(this.dom.ownerDocument)==this.dom?pg(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function Ra(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Se.node(0,t.state.doc.content.size,e)]}function Da(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Se.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function _a(t){return!t.someProp("editable",e=>e(t.state)===!1)}function Eg(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Ia(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function Mg(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function Pa(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var ht={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ri={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},vg=typeof navigator<"u"&&/Mac/.test(navigator.platform),Cg=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Z=0;Z<10;Z++)ht[48+Z]=ht[96+Z]=String(Z);for(var Z=1;Z<=24;Z++)ht[Z+111]="F"+Z;for(var Z=65;Z<=90;Z++)ht[Z]=String.fromCharCode(Z+32),ri[Z]=String.fromCharCode(Z);for(var vs in ht)ri.hasOwnProperty(vs)||(ri[vs]=ht[vs]);function Tg(t){var e=vg&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Cg&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?ri:ht)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const Og=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function Ag(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))s=!0;else if(/^mod$/i.test(a))Og?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function Ng(t){let e=Object.create(null);for(let n in t)e[Ag(n)]=t[n];return e}function Cs(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function Rg(t){return new ae({props:{handleKeyDown:qu(t)}})}function qu(t){let e=Ng(t);return function(n,r){let i=Tg(r),s,o=e[Cs(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[Cs(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=ht[r.keyCode])&&s!=i){let l=e[Cs(s,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const Dg=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function _g(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const Ig=(t,e,n)=>{let r=_g(t,n);if(!r)return!1;let i=Ju(r);if(!i){let o=r.blockRange(),l=o&&vn(o);return l==null?!1:(e&&e(t.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(!s.type.spec.isolating&&Gu(t,i,e))return!0;if(r.parent.content.size==0&&(Sn(s,"end")||T.isSelectable(s))){let o=Vo(t.doc,r.before(),r.after(),E.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=t.tr.step(o);l.setSelection(Sn(s,"end")?R.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):T.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1};function Sn(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Pg=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=Ju(r)}let o=s&&s.nodeBefore;return!o||!T.isSelectable(o)?!1:(e&&e(t.tr.setSelection(T.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function Ju(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Lg(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const Bg=(t,e,n)=>{let r=Lg(t,n);if(!r)return!1;let i=Yu(r);if(!i)return!1;let s=i.nodeAfter;if(Gu(t,i,e))return!0;if(r.parent.content.size==0&&(Sn(s,"start")||T.isSelectable(s))){let o=Vo(t.doc,r.before(),r.after(),E.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=t.tr.step(o);l.setSelection(Sn(s,"start")?R.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):T.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},Fg=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=Yu(r)}let o=s&&s.nodeAfter;return!o||!T.isSelectable(o)?!1:(e&&e(t.tr.setSelection(T.create(t.doc,s.pos)).scrollIntoView()),!0)};function Yu(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const zg=(t,e)=>{let n=t.selection,r=n instanceof T,i;if(r){if(n.node.isTextblock||!bt(t.doc,n.from))return!1;i=n.from}else if(i=ou(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(T.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},Hg=(t,e)=>{let n=t.selection,r;if(n instanceof T){if(n.node.isTextblock||!bt(t.doc,n.to))return!1;r=n.to}else if(r=ou(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},$g=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&vn(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},jg=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Xu(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Vg=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=Xu(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let l=n.after(),a=t.tr.replaceWith(l,l,o.createAndFill());a.setSelection(R.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},Wg=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Me||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=Xu(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(o,s.createAndFill());l.setSelection(_.create(l.doc,o+1)),e(l.scrollIntoView())}return!0},Ug=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(un(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&vn(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},Kg=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(T.create(t.doc,i))),!0)};function qg(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||bt(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function Gu(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s,o;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(qg(t,e,n))return!0;let l=e.parent.canReplace(e.index(),e.index()+1);if(l&&(s=(o=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&o.matchType(s[0]||i.type).validEnd){if(n){let f=e.pos+i.nodeSize,d=x.empty;for(let m=s.length-1;m>=0;m--)d=x.from(s[m].create(null,d));d=x.from(r.copy(d));let h=t.tr.step(new Y(e.pos-1,f,e.pos,f,new E(d,1,0),s.length,!0)),p=f+2*s.length;bt(h.doc,p)&&h.join(p),n(h.scrollIntoView())}return!0}let a=R.findFrom(e,1),c=a&&a.$from.blockRange(a.$to),u=c&&vn(c);if(u!=null&&u>=e.depth)return n&&n(t.tr.lift(c,u).scrollIntoView()),!0;if(l&&Sn(i,"start",!0)&&Sn(r,"end")){let f=r,d=[];for(;d.push(f),!f.isTextblock;)f=f.lastChild;let h=i,p=1;for(;!h.isTextblock;h=h.firstChild)p++;if(f.canReplace(f.childCount,f.childCount,h.content)){if(n){let m=x.empty;for(let y=d.length-1;y>=0;y--)m=x.from(d[y].copy(m));let g=t.tr.step(new Y(e.pos-d.length,e.pos+i.nodeSize,e.pos+p,e.pos+i.nodeSize-p,new E(m,d.length,0),0,!0));n(g.scrollIntoView())}return!0}}return!1}function Qu(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(_.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const Jg=Qu(-1),Yg=Qu(1);function Xg(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=o&&jo(o,t,e);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function La(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];n.doc.nodesBetween(o,l,(a,c)=>{if(i)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)i=!0;else{let u=n.doc.resolve(c),f=u.index();i=u.parent.canReplaceWith(f,f+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:a}}=n.selection.ranges[o];s.setBlockType(l,a,t,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Gg(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=!1,a=o;if(!o)return!1;if(o.depth>=2&&i.node(o.depth-1).type.compatibleContent(t)&&o.startIndex==0){if(i.index(o.depth-1)==0)return!1;let u=n.doc.resolve(o.start-2);a=new Xr(u,u,o.depth),o.endIndex<o.parent.childCount&&(o=new Xr(i,n.doc.resolve(s.end(o.depth)),o.depth)),l=!0}let c=jo(a,t,e,o);return c?(r&&r(Qg(n.tr,o,c,l,t).scrollIntoView()),!0):!1}}function Qg(t,e,n,r,i){let s=x.empty;for(let u=n.length-1;u>=0;u--)s=x.from(n[u].type.create(n[u].attrs,s));t.step(new Y(e.start-(r?2:0),e.end,e.start,e.end,new E(s,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==i&&(o=u+1);let l=n.length-o,a=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,f=e.endIndex,d=!0;u<f;u++,d=!1)!d&&un(t.doc,a,l)&&(t.split(a,l),a+=2*l),a+=c.child(u).nodeSize;return t}function Zg(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?ey(e,n,t,s):ty(e,n,s):!0:!1}}function ey(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new Y(s-1,o,s,o,new E(x.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Xr(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const l=vn(r);if(l==null)return!1;i.lift(r,l);let a=i.mapping.map(s,-1)-1;return bt(i.doc,a)&&i.join(a),e(i.scrollIntoView()),!0}function ty(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(l?0:1),u+1,o.content.append(a?x.empty:x.from(i))))return!1;let f=s.pos,d=f+o.nodeSize;return r.step(new Y(f-(l?1:0),d+(a?1:0),f+1,d-1,new E((l?x.empty:x.from(i.copy(x.empty))).append(a?x.empty:x.from(i.copy(x.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function ny(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,a=l.child(o-1);if(a.type!=t)return!1;if(n){let c=a.lastChild&&a.lastChild.type==l.type,u=x.from(c?t.create():null),f=new E(x.from(t.create(null,x.from(l.type.create(null,u)))),c?3:1,0),d=s.start,h=s.end;n(e.tr.step(new Y(d-(c?3:1),h,d,h,f,1,!0)).scrollIntoView())}return!0}}function Hi(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}class $i{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...u)=>{const f=a(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,l=[],a=!!e,c=e||s.tr,u=()=>(!a&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),l.every(d=>d===!0)),f={...Object.fromEntries(Object.entries(r).map(([d,h])=>[d,(...m)=>{const g=this.buildProps(c,n),y=h(...m)(g);return l.push(y),f}])),run:u};return f}createCan(e){const{rawCommands:n,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(n).map(([a,c])=>[a,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i;s.storedMarks&&e.setStoredMarks(s.storedMarks);const l={tr:e,editor:i,view:o,state:Hi({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([a,c])=>[a,(...u)=>c(...u)(l)]))}};return l}}class ry{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function M(t,e,n){return t.config[e]===void 0&&t.parent?M(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?M(t.parent,e,n):null}):t.config[e]}function ji(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function Zu(t){const e=[],{nodeExtensions:n,markExtensions:r}=ji(t),i=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},a=M(o,"addGlobalAttributes",l);if(!a)return;a().forEach(u=>{u.types.forEach(f=>{Object.entries(u.attributes).forEach(([d,h])=>{e.push({type:f,name:d,attribute:{...s,...h}})})})})}),i.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},a=M(o,"addAttributes",l);if(!a)return;const c=a();Object.entries(c).forEach(([u,f])=>{const d={...s,...f};typeof(d==null?void 0:d.default)=="function"&&(d.default=d.default()),d!=null&&d.isRequired&&(d==null?void 0:d.default)===void 0&&delete d.default,e.push({type:o.name,name:u,attribute:d})})}),e}function G(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function j(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}i==="class"?r[i]=[r[i],s].join(" "):i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function lo(t,e){return e.filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>j(n,r),{})}function ef(t){return typeof t=="function"}function N(t,e=void 0,...n){return ef(t)?e?t.bind(e)(...n):t(...n):t}function iy(t={}){return Object.keys(t).length===0&&t.constructor===Object}function sy(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function Ba(t,e){return t.style?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(n):sy(n.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return{...r,...i}}}}function Fa(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&iy(n)?!1:n!=null))}function oy(t,e){var n;const r=Zu(t),{nodeExtensions:i,markExtensions:s}=ji(t),o=(n=i.find(c=>M(c,"topNode")))===null||n===void 0?void 0:n.name,l=Object.fromEntries(i.map(c=>{const u=r.filter(y=>y.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},d=t.reduce((y,b)=>{const w=M(b,"extendNodeSchema",f);return{...y,...w?w(c):{}}},{}),h=Fa({...d,content:N(M(c,"content",f)),marks:N(M(c,"marks",f)),group:N(M(c,"group",f)),inline:N(M(c,"inline",f)),atom:N(M(c,"atom",f)),selectable:N(M(c,"selectable",f)),draggable:N(M(c,"draggable",f)),code:N(M(c,"code",f)),defining:N(M(c,"defining",f)),isolating:N(M(c,"isolating",f)),attrs:Object.fromEntries(u.map(y=>{var b;return[y.name,{default:(b=y==null?void 0:y.attribute)===null||b===void 0?void 0:b.default}]}))}),p=N(M(c,"parseHTML",f));p&&(h.parseDOM=p.map(y=>Ba(y,u)));const m=M(c,"renderHTML",f);m&&(h.toDOM=y=>m({node:y,HTMLAttributes:lo(y,u)}));const g=M(c,"renderText",f);return g&&(h.toText=g),[c.name,h]})),a=Object.fromEntries(s.map(c=>{const u=r.filter(g=>g.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},d=t.reduce((g,y)=>{const b=M(y,"extendMarkSchema",f);return{...g,...b?b(c):{}}},{}),h=Fa({...d,inclusive:N(M(c,"inclusive",f)),excludes:N(M(c,"excludes",f)),group:N(M(c,"group",f)),spanning:N(M(c,"spanning",f)),code:N(M(c,"code",f)),attrs:Object.fromEntries(u.map(g=>{var y;return[g.name,{default:(y=g==null?void 0:g.attribute)===null||y===void 0?void 0:y.default}]}))}),p=N(M(c,"parseHTML",f));p&&(h.parseDOM=p.map(g=>Ba(g,u)));const m=M(c,"renderHTML",f);return m&&(h.toDOM=g=>m({mark:g,HTMLAttributes:lo(g,u)})),[c.name,h]}));return new yp({topNode:o,nodes:l,marks:a})}function Ts(t,e){return e.nodes[t]||e.marks[t]||null}function za(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}const ly=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,l)=>{var a,c;const u=((c=(a=i.type.spec).toText)===null||c===void 0?void 0:c.call(a,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";n+=u.slice(0,Math.max(0,r-s))}),n};function el(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Vi{constructor(e){this.find=e.find,this.handler=e.handler}}const ay=(t,e)=>{if(el(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Os(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:l}=t,{view:a}=n;if(a.composing)return!1;const c=a.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(d=>d.type.spec.code))return!1;let u=!1;const f=ly(c)+s;return o.forEach(d=>{if(u)return;const h=ay(f,d.find);if(!h)return;const p=a.state.tr,m=Hi({state:a.state,transaction:p}),g={from:r-(h[0].length-s.length),to:i},{commands:y,chain:b,can:w}=new $i({editor:n,state:m});d.handler({state:m,range:g,match:h,commands:y,chain:b,can:w})===null||!p.steps.length||(p.setMeta(l,{transform:p,from:r,to:i,text:s}),a.dispatch(p),u=!0)}),u}function cy(t){const{editor:e,rules:n}=t,r=new ae({state:{init(){return null},apply(i,s){const o=i.getMeta(r);return o||(i.selectionSet||i.docChanged?null:s)}},props:{handleTextInput(i,s,o,l){return Os({editor:e,from:s,to:o,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Os({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?Os({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function uy(t){return typeof t=="number"}class fy{constructor(e){this.find=e.find,this.handler=e.handler}}const dy=(t,e)=>{if(el(e))return[...t.matchAll(e)];const n=e(t);return n?n.map(r=>{const i=[r.text];return i.index=r.index,i.input=t,i.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(r.replaceWith)),i}):[]};function hy(t){const{editor:e,state:n,from:r,to:i,rule:s}=t,{commands:o,chain:l,can:a}=new $i({editor:e,state:n}),c=[];return n.doc.nodesBetween(r,i,(f,d)=>{if(!f.isTextblock||f.type.spec.code)return;const h=Math.max(r,d),p=Math.min(i,d+f.content.size),m=f.textBetween(h-d,p-d,void 0,"");dy(m,s.find).forEach(y=>{if(y.index===void 0)return;const b=h+y.index+1,w=b+y[0].length,A={from:n.tr.mapping.map(b),to:n.tr.mapping.map(w)},D=s.handler({state:n,range:A,match:y,commands:o,chain:l,can:a});c.push(D)})}),c.every(f=>f!==null)}function py(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1;return n.map(l=>new ae({view(a){const c=u=>{var f;r=!((f=a.dom.parentElement)===null||f===void 0)&&f.contains(u.target)?a.dom.parentElement:null};return window.addEventListener("dragstart",c),{destroy(){window.removeEventListener("dragstart",c)}}},props:{handleDOMEvents:{drop:a=>(s=r===a.dom.parentElement,!1),paste:(a,c)=>{var u;const f=(u=c.clipboardData)===null||u===void 0?void 0:u.getData("text/html");return i=!!(f!=null&&f.includes("data-pm-slice")),!1}}},appendTransaction:(a,c,u)=>{const f=a[0],d=f.getMeta("uiEvent")==="paste"&&!i,h=f.getMeta("uiEvent")==="drop"&&!s;if(!d&&!h)return;const p=c.doc.content.findDiffStart(u.doc.content),m=c.doc.content.findDiffEnd(u.doc.content);if(!uy(p)||!m||p===m.b)return;const g=u.tr,y=Hi({state:u,transaction:g});if(!(!hy({editor:e,state:y,from:Math.max(p-1,0),to:m.b-1,rule:l})||!g.steps.length))return g}}))}function my(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return[...new Set(e)]}class rn{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=rn.resolve(e),this.schema=oy(this.extensions,n),this.extensions.forEach(r=>{var i;this.editor.extensionStorage[r.name]=r.storage;const s={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:Ts(r.name,this.schema)};r.type==="mark"&&(!((i=N(M(r,"keepOnSplit",s)))!==null&&i!==void 0)||i)&&this.splittableMarks.push(r.name);const o=M(r,"onBeforeCreate",s);o&&this.editor.on("beforeCreate",o);const l=M(r,"onCreate",s);l&&this.editor.on("create",l);const a=M(r,"onUpdate",s);a&&this.editor.on("update",a);const c=M(r,"onSelectionUpdate",s);c&&this.editor.on("selectionUpdate",c);const u=M(r,"onTransaction",s);u&&this.editor.on("transaction",u);const f=M(r,"onFocus",s);f&&this.editor.on("focus",f);const d=M(r,"onBlur",s);d&&this.editor.on("blur",d);const h=M(r,"onDestroy",s);h&&this.editor.on("destroy",h)})}static resolve(e){const n=rn.sort(rn.flatten(e)),r=my(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=M(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=M(r,"priority")||100,o=M(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Ts(n.name,this.schema)},i=M(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=rn.sort([...this.extensions].reverse()),r=[],i=[],s=n.map(o=>{const l={name:o.name,options:o.options,storage:o.storage,editor:e,type:Ts(o.name,this.schema)},a=[],c=M(o,"addKeyboardShortcuts",l);let u={};if(o.type==="mark"&&o.config.exitable&&(u.ArrowRight=()=>Ce.handleExit({editor:e,mark:o})),c){const m=Object.fromEntries(Object.entries(c()).map(([g,y])=>[g,()=>y({editor:e})]));u={...u,...m}}const f=Rg(u);a.push(f);const d=M(o,"addInputRules",l);za(o,e.options.enableInputRules)&&d&&r.push(...d());const h=M(o,"addPasteRules",l);za(o,e.options.enablePasteRules)&&h&&i.push(...h());const p=M(o,"addProseMirrorPlugins",l);if(p){const m=p();a.push(...m)}return a}).flat();return[cy({editor:e,rules:r}),...py({editor:e,rules:i}),...s]}get attributes(){return Zu(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=ji(this.extensions);return Object.fromEntries(n.filter(r=>!!M(r,"addNodeView")).map(r=>{const i=this.attributes.filter(a=>a.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:G(r.name,this.schema)},o=M(r,"addNodeView",s);if(!o)return[];const l=(a,c,u,f)=>{const d=lo(a,i);return o()({editor:e,node:a,getPos:u,decorations:f,HTMLAttributes:d,extension:r})};return[r.name,l]}))}}function gy(t){return Object.prototype.toString.call(t).slice(8,-1)}function As(t){return gy(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Wi(t,e){const n={...t};return As(t)&&As(e)&&Object.keys(e).forEach(r=>{As(e[r])?r in t?n[r]=Wi(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}class pe{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=N(M(this,"addOptions",{name:this.name}))),this.storage=N(M(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new pe(e)}configure(e={}){const n=this.extend();return n.options=Wi(this.options,e),n.storage=N(M(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new pe(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=N(M(n,"addOptions",{name:n.name})),n.storage=N(M(n,"addStorage",{name:n.name,options:n.options})),n}}function tf(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let l="",a=!0;return t.nodesBetween(r,i,(c,u,f,d)=>{var h;const p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!a&&(l+=s,a=!0),f&&(l+=p({node:c,pos:u,parent:f,index:d,range:e}))):c.isText?(l+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),a=!1):c.isBlock&&!a&&(l+=s,a=!0)}),l}function nf(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const yy=pe.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new ae({key:new Oe("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),l=Math.max(...s.map(u=>u.$to.pos)),a=nf(n);return tf(r,{from:o,to:l},{textSerializers:a})}}})]}}),by=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),Sy=(t=!1)=>({commands:e})=>e.setContent("",t),xy=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(l,a)=>{if(l.type.isText)return;const{doc:c,mapping:u}=e,f=c.resolve(u.map(a)),d=c.resolve(u.map(a+l.nodeSize)),h=f.blockRange(d);if(!h)return;const p=vn(h);if(l.type.isTextblock){const{defaultType:m}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},ky=t=>e=>t(e),wy=()=>({state:t,dispatch:e})=>Wg(t,e),Ey=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const l=i.before(s),a=i.after(s);t.delete(l,a).scrollIntoView()}return!0}return!1},My=t=>({tr:e,state:n,dispatch:r})=>{const i=G(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const a=s.before(o),c=s.after(o);e.delete(a,c).scrollIntoView()}return!0}return!1},vy=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},Cy=()=>({state:t,dispatch:e})=>Dg(t,e),Ty=()=>({commands:t})=>t.keyboardShortcut("Enter"),Oy=()=>({state:t,dispatch:e})=>Vg(t,e);function ii(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:el(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function ao(t,e,n={}){return t.find(r=>r.type===e&&ii(r.attrs,n))}function Ay(t,e,n={}){return!!ao(t,e,n)}function tl(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&r.offset!==0&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;const i=ao([...r.node.marks],e,n);if(!i)return;let s=r.index,o=t.start()+r.offset,l=s+1,a=o+r.node.nodeSize;for(ao([...r.node.marks],e,n);s>0&&i.isInSet(t.parent.child(s-1).marks);)s-=1,o-=t.parent.child(s).nodeSize;for(;l<t.parent.childCount&&Ay([...t.parent.child(l).marks],e,n);)a+=t.parent.child(l).nodeSize,l+=1;return{from:o,to:a}}function xt(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const Ny=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=xt(t,r.schema),{doc:o,selection:l}=n,{$from:a,from:c,to:u}=l;if(i){const f=tl(a,s,e);if(f&&f.from<=c&&f.to>=u){const d=_.create(o,f.from,f.to);n.setSelection(d)}}return!0},Ry=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function rf(t){return t instanceof _}function _t(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function sf(t,e=null){if(!e)return null;const n=R.atStart(t),r=R.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?_.create(t,_t(0,i,s),_t(t.content.size,i,s)):_.create(t,_t(e,i,s),_t(e,i,s))}function nl(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Dy=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{nl()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!rf(n.state.selection))return o(),!0;const l=sf(i.doc,t)||n.state.selection,a=n.state.selection.eq(l);return s&&(a||i.setSelection(l),a&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},_y=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),Iy=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e);function Ha(t){const e=`<body>${t}</body>`;return new window.DOMParser().parseFromString(e,"text/html").body}function si(t,e,n){if(n={slice:!0,parseOptions:{},...n},typeof t=="object"&&t!==null)try{return Array.isArray(t)&&t.length>0?x.fromArray(t.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(t)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",r),si("",e,n)}if(typeof t=="string"){const r=pn.fromSchema(e);return n.slice?r.parseSlice(Ha(t),n.parseOptions).content:r.parse(Ha(t),n.parseOptions)}return si("",e,n)}function Py(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof te||i instanceof Y))return;const s=t.mapping.maps[r];let o=0;s.forEach((l,a,c,u)=>{o===0&&(o=u)}),t.setSelection(R.near(t.doc.resolve(o),n))}const Ly=t=>t.toString().startsWith("<"),By=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{if(i){n={parseOptions:{},updateSelection:!0,...n};const o=si(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if(o.toString()==="<>")return!0;let{from:l,to:a}=typeof t=="number"?{from:t,to:t}:t,c=!0,u=!0;if((Ly(o)?o:[o]).forEach(d=>{d.check(),c=c?d.isText&&d.marks.length===0:!1,u=u?d.isBlock:!1}),l===a&&u){const{parent:d}=r.doc.resolve(l);d.isTextblock&&!d.type.spec.code&&!d.childCount&&(l-=1,a+=1)}c?Array.isArray(e)?r.insertText(e.map(d=>d.text||"").join(""),l,a):typeof e=="object"&&e&&e.text?r.insertText(e.text,l,a):r.insertText(e,l,a):r.replaceWith(l,a,o),n.updateSelection&&Py(r,r.steps.length-1,-1)}return!0},Fy=()=>({state:t,dispatch:e})=>zg(t,e),zy=()=>({state:t,dispatch:e})=>Hg(t,e),Hy=()=>({state:t,dispatch:e})=>Ig(t,e),$y=()=>({state:t,dispatch:e})=>Bg(t,e);function of(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function jy(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))s=!0;else if(/^mod$/i.test(a))nl()||of()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const Vy=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=jy(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,l))});return a==null||a.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function ir(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?G(e,t.schema):null,l=[];t.doc.nodesBetween(r,i,(f,d)=>{if(f.isText)return;const h=Math.max(r,d),p=Math.min(i,d+f.nodeSize);l.push({node:f,from:h,to:p})});const a=i-r,c=l.filter(f=>o?o.name===f.node.type.name:!0).filter(f=>ii(f.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((f,d)=>f+d.to-d.from,0)>=a}const Wy=(t,e={})=>({state:n,dispatch:r})=>{const i=G(t,n.schema);return ir(n,i,e)?$g(n,r):!1},Uy=()=>({state:t,dispatch:e})=>Ug(t,e),Ky=t=>({state:e,dispatch:n})=>{const r=G(t,e.schema);return Zg(r)(e,n)},qy=()=>({state:t,dispatch:e})=>jg(t,e);function Ui(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function $a(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const Jy=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=Ui(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=G(t,r.schema)),l==="mark"&&(o=xt(t,r.schema)),i&&n.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,$a(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(f=>{o===f.type&&n.addMark(u,u+c.nodeSize,o.create($a(f.attrs,e)))})})}),!0):!1},Yy=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),Xy=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),Gy=()=>({state:t,dispatch:e})=>Pg(t,e),Qy=()=>({state:t,dispatch:e})=>Fg(t,e),Zy=()=>({state:t,dispatch:e})=>Kg(t,e),eb=()=>({state:t,dispatch:e})=>Yg(t,e),tb=()=>({state:t,dispatch:e})=>Jg(t,e);function lf(t,e,n={}){return si(t,e,{slice:!1,parseOptions:n})}const nb=(t,e=!1,n={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,l=lf(t,i.schema,n);return s&&r.replaceWith(0,o.content.size,l).setMeta("preventUpdate",!e),!0};function rb(t,e){const n=new du(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function ib(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function sb(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function ob(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function rl(t){return e=>ob(e.$from,t)}function lb(t,e){const n=Be.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function ab(t,e){const n={from:0,to:t.content.size};return tf(t,n,e)}function Ki(t,e){const n=xt(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,a=>{o.push(...a.marks)});const l=o.find(a=>a.type.name===n.name);return l?{...l.attrs}:{}}function cb(t,e){const n=G(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,l=>{s.push(l)});const o=s.reverse().find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function af(t,e){const n=Ui(typeof e=="string"?e:e.name,t.schema);return n==="node"?cb(t,e):n==="mark"?Ki(t,e):{}}function ub(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function fb(t){const e=ub(t);return e.length===1?e:e.filter((n,r)=>!e.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function db(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((l,a)=>{o.push({from:l,to:a})});else{const{from:l,to:a}=n[s];if(l===void 0||a===void 0)return;o.push({from:l,to:a})}o.forEach(({from:l,to:a})=>{const c=e.slice(s).map(l,-1),u=e.slice(s).map(a),f=e.invert().map(c,-1),d=e.invert().map(u);r.push({oldRange:{from:f,to:d},newRange:{from:c,to:u}})})}),fb(r)}function oi(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t-1),o=tl(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function $r(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function co(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?xt(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>s?s.name===f.type.name:!0).find(f=>ii(f.attrs,n,{strict:!1}));let o=0;const l=[];if(i.forEach(({$from:f,$to:d})=>{const h=f.pos,p=d.pos;t.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,g),b=Math.min(p,g+m.nodeSize),w=b-y;o+=w,l.push(...m.marks.map(A=>({mark:A,from:y,to:b})))})}),o===0)return!1;const a=l.filter(f=>s?s.name===f.mark.type.name:!0).filter(f=>ii(f.mark.attrs,n,{strict:!1})).reduce((f,d)=>f+d.to-d.from,0),c=l.filter(f=>s?f.mark.type!==s&&f.mark.type.excludes(s):!0).reduce((f,d)=>f+d.to-d.from,0);return(a>0?a+c:a)>=o}function hb(t,e,n={}){if(!e)return ir(t,null,n)||co(t,null,n);const r=Ui(e,t.schema);return r==="node"?ir(t,e,n):r==="mark"?co(t,e,n):!1}function ja(t,e){const{nodeExtensions:n}=ji(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=N(M(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function pb(t){var e;const n=(e=t.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),r=t.toJSON();return JSON.stringify(n)===JSON.stringify(r)}function mb(t,e,n){var r;const{selection:i}=e;let s=null;if(rf(i)&&(s=i.$cursor),s){const l=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(l)||!l.some(a=>a.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:l,$to:a})=>{let c=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,a.pos,(u,f,d)=>{if(c)return!1;if(u.isInline){const h=!d||d.type.allowsMarkType(n),p=!!n.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(n));c=h&&p}return!c}),c})}const gb=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:l}=s,a=xt(t,r.schema);if(i)if(o){const c=Ki(r,a);n.addStoredMark(a.create({...c,...e}))}else l.forEach(c=>{const u=c.$from.pos,f=c.$to.pos;r.doc.nodesBetween(u,f,(d,h)=>{const p=Math.max(h,u),m=Math.min(h+d.nodeSize,f);d.marks.find(y=>y.type===a)?d.marks.forEach(y=>{a===y.type&&n.addMark(p,m,a.create({...y.attrs,...e}))}):n.addMark(p,m,a.create(e))})});return mb(r,n,a)},yb=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),bb=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=G(t,n.schema);return s.isTextblock?i().command(({commands:o})=>La(s,e)(n)?!0:o.clearNodes()).command(({state:o})=>La(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Sb=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=_t(t,0,r.content.size),s=T.create(r,i);e.setSelection(s)}return!0},xb=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=_.atStart(r).from,l=_.atEnd(r).to,a=_t(i,o,l),c=_t(s,o,l),u=_.create(r,a,c);e.setSelection(u)}return!0},kb=t=>({state:e,dispatch:n})=>{const r=G(t,e.schema);return ny(r)(e,n)};function Va(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const wb=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:l,$to:a}=s,c=i.extensionManager.attributes,u=$r(c,l.node().type.name,l.node().attrs);if(s instanceof T&&s.node.isBlock)return!l.parentOffset||!un(o,l.pos)?!1:(r&&(t&&Va(n,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;if(r){const f=a.parentOffset===a.parent.content.size;s instanceof _&&e.deleteSelection();const d=l.depth===0?void 0:ib(l.node(-1).contentMatchAt(l.indexAfter(-1)));let h=f&&d?[{type:d,attrs:u}]:void 0,p=un(e.doc,e.mapping.map(l.pos),1,h);if(!h&&!p&&un(e.doc,e.mapping.map(l.pos),1,d?[{type:d}]:void 0)&&(p=!0,h=d?[{type:d,attrs:u}]:void 0),p&&(e.split(e.mapping.map(l.pos),1,h),d&&!f&&!l.parentOffset&&l.parent.type!==d)){const m=e.mapping.map(l.before()),g=e.doc.resolve(m);l.node(-1).canReplaceWith(g.index(),g.index()+1,d)&&e.setNodeMarkup(e.mapping.map(l.before()),d)}t&&Va(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},Eb=t=>({tr:e,state:n,dispatch:r,editor:i})=>{var s;const o=G(t,n.schema),{$from:l,$to:a}=n.selection,c=n.selection.node;if(c&&c.isBlock||l.depth<2||!l.sameParent(a))return!1;const u=l.node(-1);if(u.type!==o)return!1;const f=i.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==o||l.index(-2)!==l.node(-2).childCount-1)return!1;if(r){let g=x.empty;const y=l.index(-1)?1:l.index(-2)?2:3;for(let L=l.depth-y;L>=l.depth-3;L-=1)g=x.from(l.node(L).copy(g));const b=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,w=$r(f,l.node().type.name,l.node().attrs),A=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(w))||void 0;g=g.append(x.from(o.createAndFill(null,A)||void 0));const D=l.before(l.depth-(y-1));e.replace(D,l.after(-b),new E(g,4-y,0));let C=-1;e.doc.nodesBetween(D,e.doc.content.size,(L,O)=>{if(C>-1)return!1;L.isTextblock&&L.content.size===0&&(C=O+1)}),C>-1&&e.setSelection(_.near(e.doc.resolve(C))),e.scrollIntoView()}return!0}const d=a.pos===l.end()?u.contentMatchAt(0).defaultType:null,h=$r(f,u.type.name,u.attrs),p=$r(f,l.node().type.name,l.node().attrs);e.delete(l.pos,a.pos);const m=d?[{type:o,attrs:h},{type:d,attrs:p}]:[{type:o,attrs:h}];if(!un(e.doc,l.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=n,{splittableMarks:b}=i.extensionManager,w=y||g.$to.parentOffset&&g.$from.marks();if(e.split(l.pos,2,m).scrollIntoView(),!w||!r)return!0;const A=w.filter(D=>b.includes(D.type.name));e.ensureMarks(A)}return!0},Ns=(t,e)=>{const n=rl(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&bt(t.doc,n.pos)&&t.join(n.pos),!0},Rs=(t,e)=>{const n=rl(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&bt(t.doc,r)&&t.join(r),!0},Mb=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:l,chain:a,commands:c,can:u})=>{const{extensions:f,splittableMarks:d}=i.extensionManager,h=G(t,o.schema),p=G(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:b}=m,w=y.blockRange(b),A=g||m.$to.parentOffset&&m.$from.marks();if(!w)return!1;const D=rl(C=>ja(C.type.name,f))(m);if(w.depth>=1&&D&&w.depth-D.depth<=1){if(D.node.type===h)return c.liftListItem(p);if(ja(D.node.type.name,f)&&h.validContent(D.node.content)&&l)return a().command(()=>(s.setNodeMarkup(D.pos,h),!0)).command(()=>Ns(s,h)).command(()=>Rs(s,h)).run()}return!n||!A||!l?a().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>Ns(s,h)).command(()=>Rs(s,h)).run():a().command(()=>{const C=u().wrapInList(h,r),L=A.filter(O=>d.includes(O.type.name));return s.ensureMarks(L),C?!0:c.clearNodes()}).wrapInList(h,r).command(()=>Ns(s,h)).command(()=>Rs(s,h)).run()},vb=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=xt(t,r.schema);return co(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},Cb=(t,e,n={})=>({state:r,commands:i})=>{const s=G(t,r.schema),o=G(e,r.schema);return ir(r,s,n)?i.setNode(o):i.setNode(s,n)},Tb=(t,e={})=>({state:n,commands:r})=>{const i=G(t,n.schema);return ir(n,i,e)?r.lift(i):r.wrapIn(i,e)},Ob=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,l=s.transform;for(let a=l.steps.length-1;a>=0;a-=1)o.step(l.steps[a].invert(l.docs[a]));if(s.text){const a=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,a))}else o.delete(s.from,s.to)}return!0}}return!1},Ab=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},Nb=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:l}=n,a=xt(t,r.schema),{$from:c,empty:u,ranges:f}=l;if(!i)return!0;if(u&&o){let{from:d,to:h}=l;const p=(s=c.marks().find(g=>g.type===a))===null||s===void 0?void 0:s.attrs,m=tl(c,a,p);m&&(d=m.from,h=m.to),n.removeMark(d,h,a)}else f.forEach(d=>{n.removeMark(d.$from.pos,d.$to.pos,a)});return n.removeStoredMark(a),!0},Rb=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=Ui(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=G(t,r.schema)),l==="mark"&&(o=xt(t,r.schema)),i&&n.selection.ranges.forEach(a=>{const c=a.$from.pos,u=a.$to.pos;r.doc.nodesBetween(c,u,(f,d)=>{s&&s===f.type&&n.setNodeMarkup(d,void 0,{...f.attrs,...e}),o&&f.marks.length&&f.marks.forEach(h=>{if(o===h.type){const p=Math.max(d,c),m=Math.min(d+f.nodeSize,u);n.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},Db=(t,e={})=>({state:n,dispatch:r})=>{const i=G(t,n.schema);return Xg(i,e)(n,r)},_b=(t,e={})=>({state:n,dispatch:r})=>{const i=G(t,n.schema);return Gg(i,e)(n,r)};var Ib=Object.freeze({__proto__:null,blur:by,clearContent:Sy,clearNodes:xy,command:ky,createParagraphNear:wy,deleteCurrentNode:Ey,deleteNode:My,deleteRange:vy,deleteSelection:Cy,enter:Ty,exitCode:Oy,extendMarkRange:Ny,first:Ry,focus:Dy,forEach:_y,insertContent:Iy,insertContentAt:By,joinUp:Fy,joinDown:zy,joinBackward:Hy,joinForward:$y,keyboardShortcut:Vy,lift:Wy,liftEmptyBlock:Uy,liftListItem:Ky,newlineInCode:qy,resetAttributes:Jy,scrollIntoView:Yy,selectAll:Xy,selectNodeBackward:Gy,selectNodeForward:Qy,selectParentNode:Zy,selectTextblockEnd:eb,selectTextblockStart:tb,setContent:nb,setMark:gb,setMeta:yb,setNode:bb,setNodeSelection:Sb,setTextSelection:xb,sinkListItem:kb,splitBlock:wb,splitListItem:Eb,toggleList:Mb,toggleMark:vb,toggleNode:Cb,toggleWrap:Tb,undoInputRule:Ob,unsetAllMarks:Ab,unsetMark:Nb,updateAttributes:Rb,wrapIn:Db,wrapInList:_b});const Pb=pe.create({name:"commands",addCommands(){return{...Ib}}}),Lb=pe.create({name:"editable",addProseMirrorPlugins(){return[new ae({key:new Oe("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Bb=pe.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new ae({key:new Oe("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),Fb=pe.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:a,doc:c}=l,{empty:u,$anchor:f}=a,{pos:d,parent:h}=f,p=R.atStart(c).from===d;return!u||!p||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return nl()||of()?s:i},addProseMirrorPlugins(){return[new ae({key:new Oe("clearDocument"),appendTransaction:(t,e,n)=>{if(!(t.some(p=>p.docChanged)&&!e.doc.eq(n.doc)))return;const{empty:i,from:s,to:o}=e.selection,l=R.atStart(e.doc).from,a=R.atEnd(e.doc).to;if(i||!(s===l&&o===a)||!(n.doc.textBetween(0,n.doc.content.size," "," ").length===0))return;const f=n.tr,d=Hi({state:n,transaction:f}),{commands:h}=new $i({editor:this.editor,state:d});if(h.clearNodes(),!!f.steps.length)return f}})]}}),zb=pe.create({name:"tabindex",addProseMirrorPlugins(){return[new ae({key:new Oe("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var Hb=Object.freeze({__proto__:null,ClipboardTextSerializer:yy,Commands:Pb,Editable:Lb,FocusEvents:Bb,Keymap:Fb,Tabindex:zb});const $b=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function jb(t,e,n){const r=document.querySelector(`style[data-tiptap-style${n?`-${n}`:""}]`);if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute(`data-tiptap-style${n?`-${n}`:""}`,""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}class Vb extends ry{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=jb($b,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=ef(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});this.view.updateState(i)}unregisterPlugin(e){if(this.isDestroyed)return;const n=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(n))});this.view.updateState(r)}createExtensionManager(){const n=[...this.options.enableCoreExtensions?Object.values(Hb):[],...this.options.extensions].filter(r=>["extension","node","mark"].includes(r==null?void 0:r.type));this.extensionManager=new rn(n,this)}createCommandManager(){this.commandManager=new $i({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=lf(this.options.content,this.schema,this.options.parseOptions),n=sf(e,this.options.autofocus);this.view=new wg(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:nn.create({doc:e,selection:n||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(o)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return af(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return hb(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return lb(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return ab(this.state.doc,{blockSeparator:n,textSerializers:{...nf(this.schema),...r}})}get isEmpty(){return pb(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}}function xn(t){return new Vi({find:t.find,handler:({state:e,range:n,match:r})=>{const i=N(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],l=r[0];let a=n.to;if(o){const c=l.search(/\S/),u=n.from+l.indexOf(o),f=u+o.length;if(oi(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===t.type&&m!==h.mark.type)).filter(h=>h.to>u).length)return null;f<n.to&&s.delete(f,n.to),u>n.from&&s.delete(n.from+c,u),a=n.from+c+o.length,s.addMark(n.from+c,a,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function Wb(t){return new Vi({find:t.find,handler:({state:e,range:n,match:r})=>{const i=N(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let l=n.to;if(r[1]){const a=r[0].lastIndexOf(r[1]);let c=o+a;c>l?c=l:l=c+r[1].length;const u=r[0][r[0].length-1];s.insertText(u,o+r[0].length-1),s.replaceWith(c,l,t.type.create(i))}else r[0]&&s.replaceWith(o,l,t.type.create(i))}})}function uo(t){return new Vi({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=N(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function sr(t){return new Vi({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=N(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),a=o.doc.resolve(n.from).blockRange(),c=a&&jo(a,t.type,s);if(!c)return null;if(o.wrap(a,c),t.keepMarks&&t.editor){const{selection:f,storedMarks:d}=e,{splittableMarks:h}=t.editor.extensionManager,p=d||f.$to.parentOffset&&f.$from.marks();if(p){const m=p.filter(g=>h.includes(g.type.name));o.ensureMarks(m)}}if(t.keepAttributes){const f=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(f,s).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&bt(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)}})}class Ce{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=N(M(this,"addOptions",{name:this.name}))),this.storage=N(M(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ce(e)}configure(e={}){const n=this.extend();return n.options=Wi(this.options,e),n.storage=N(M(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new Ce(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=N(M(n,"addOptions",{name:n.name})),n.storage=N(M(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const a=o.find(c=>(c==null?void 0:c.type.name)===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}class re{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=N(M(this,"addOptions",{name:this.name}))),this.storage=N(M(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new re(e)}configure(e={}){const n=this.extend();return n.options=Wi(this.options,e),n.storage=N(M(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new re(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=N(M(n,"addOptions",{name:n.name})),n.storage=N(M(n,"addStorage",{name:n.name,options:n.options})),n}}function Jt(t){return new fy({find:t.find,handler:({state:e,range:n,match:r})=>{const i=N(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],l=r[0];let a=n.to;if(o){const c=l.search(/\S/),u=n.from+l.indexOf(o),f=u+o.length;if(oi(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===t.type&&m!==h.mark.type)).filter(h=>h.to>u).length)return null;f<n.to&&s.delete(f,n.to),u>n.from&&s.delete(n.from+c,u),a=n.from+c+o.length,s.addMark(n.from+c,a,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}const Ub=/^\s*>\s$/,Kb=re.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",j(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[sr({find:Ub,type:this.type})]}}),qb=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,Jb=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,Yb=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,Xb=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,Gb=Ce.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",j(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[xn({find:qb,type:this.type}),xn({find:Yb,type:this.type})]},addPasteRules(){return[Jt({find:Jb,type:this.type}),Jt({find:Xb,type:this.type})]}}),Qb=re.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",j(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Wa=Ce.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",j(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=Ki(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),Ua=/^\s*([-+*])\s$/,Zb=re.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",j(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Qb.name,this.editor.getAttributes(Wa.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=sr({find:Ua,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=sr({find:Ua,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Wa.name),editor:this.editor})),[t]}}),e0=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,t0=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,n0=Ce.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",j(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[xn({find:e0,type:this.type})]},addPasteRules(){return[Jt({find:t0,type:this.type})]}}),r0=/^```([a-z]+)?[\s\n]$/,i0=/^~~~([a-z]+)?[\s\n]$/,s0=re.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",j(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0||r.nodeAt(l)?!1:t.commands.exitCode()}}},addInputRules(){return[uo({find:r0,type:this.type,getAttributes:t=>({language:t[1]})}),uo({find:i0,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new ae({key:new Oe("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o}=t.state;return o.replaceSelectionWith(this.type.create({language:s})),o.setSelection(_.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.insertText(n.replace(/\r\n?/g,`
`)),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),o0=re.create({name:"doc",topNode:!0,content:"block+"});function l0(t={}){return new ae({view(e){return new a0(e,t)}})}class a0{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let l=e.nodeBefore,a=e.nodeAfter;if(l||a){let c=this.editorView.nodeDOM(this.cursorPos-(l?l.nodeSize:0));if(c){let u=c.getBoundingClientRect(),f=l?u.bottom:u.top;l&&a&&(f=(f+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:f-this.width/2,bottom:f+this.width/2}}}}if(!r){let l=this.editorView.coordsAtPos(this.cursorPos);r={left:l.left-this.width/2,right:l.left+this.width/2,top:l.top,bottom:l.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let s,o;if(!i||i==document.body&&getComputedStyle(i).position=="static")s=-pageXOffset,o=-pageYOffset;else{let l=i.getBoundingClientRect();s=l.left-i.scrollLeft,o=l.top-i.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-o+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=lu(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const c0=pe.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[l0(this.options)]}});class H extends R{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return H.valid(r)?new H(r):R.near(r)}content(){return E.empty}eq(e){return e instanceof H&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new H(e.resolve(n.pos))}getBookmark(){return new il(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!u0(e)||!f0(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&H.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let l=e.node(o);if(n>0?e.indexAfter(o)<l.childCount:e.index(o)>0){s=l.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let a=e.doc.resolve(i);if(H.valid(a))return a}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!T.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let l=e.doc.resolve(i);if(H.valid(l))return l}return null}}}H.prototype.visible=!1;H.findFrom=H.findGapCursorFrom;R.jsonID("gapcursor",H);class il{constructor(e){this.pos=e}map(e){return new il(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return H.valid(n)?new H(n):R.near(n)}}function u0(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function f0(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function d0(){return new ae({props:{decorations:g0,createSelectionBetween(t,e,n){return e.pos==n.pos&&H.valid(n)?new H(n):null},handleClick:p0,handleKeyDown:h0,handleDOMEvents:{beforeinput:m0}}})}const h0=qu({ArrowLeft:Ar("horiz",-1),ArrowRight:Ar("horiz",1),ArrowUp:Ar("vert",-1),ArrowDown:Ar("vert",1)});function Ar(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,l=e>0?o.$to:o.$from,a=o.empty;if(o instanceof _){if(!s.endOfTextblock(n)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let c=H.findGapCursorFrom(l,e,a);return c?(i&&i(r.tr.setSelection(new H(c))),!0):!1}}function p0(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!H.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&T.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new H(r))),!0)}function m0(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof H))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=x.empty;for(let o=r.length-1;o>=0;o--)i=x.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new E(i,0,0));return s.setSelection(_.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function g0(t){if(!(t.selection instanceof H))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",W.create(t.doc,[Se.widget(t.selection.head,e,{key:"gapcursor"})])}const y0=pe.create({name:"gapCursor",addProseMirrorPlugins(){return[d0()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=N(M(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),b0=re.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",j(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,a=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&a&&o){const f=a.filter(d=>l.includes(d.type.name));c.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),S0=re.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,j(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>uo({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var li=200,X=function(){};X.prototype.append=function(e){return e.length?(e=X.from(e),!this.length&&e||e.length<li&&this.leafAppend(e)||this.length<li&&e.leafPrepend(this)||this.appendInner(e)):this};X.prototype.prepend=function(e){return e.length?X.from(e).append(this):this};X.prototype.appendInner=function(e){return new x0(this,e)};X.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?X.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};X.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};X.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};X.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};X.from=function(e){return e instanceof X?e:e&&e.length?new cf(e):X.empty};var cf=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,l){for(var a=s;a<o;a++)if(i(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,l){for(var a=s-1;a>=o;a--)if(i(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=li)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=li)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(X);X.empty=new cf([]);var x0=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(X);const k0=500;class Ee{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,l,a,c=[],u=[];return this.items.forEach((f,d)=>{if(!f.step){i||(i=this.remapping(r,d+1),s=i.maps.length),s--,u.push(f);return}if(i){u.push(new Ne(f.map));let h=f.step.map(i.slice(s)),p;h&&o.maybeStep(h).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new Ne(p,void 0,void 0,c.length+u.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(f.step);if(f.selection)return l=i?f.selection.map(i.slice(s)):f.selection,a=new Ee(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:o,selection:l}}addTransform(e,n,r,i){let s=[],o=this.eventCount,l=this.items,a=!i&&l.length?l.get(l.length-1):null;for(let u=0;u<e.steps.length;u++){let f=e.steps[u].invert(e.docs[u]),d=new Ne(e.mapping.maps[u],f,n),h;(h=a&&a.merge(d))&&(d=h,u?s.pop():l=l.slice(0,l.length-1)),s.push(d),n&&(o++,n=void 0),i||(a=d)}let c=o-r.depth;return c>E0&&(l=w0(l,c),o-=c),new Ee(l.append(s),o)}remapping(e,n){let r=new cn;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new Ee(this.items.append(e.map(n=>new Ne(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,l=this.eventCount;this.items.forEach(d=>{d.selection&&l--},i);let a=n;this.items.forEach(d=>{let h=s.getMirror(--a);if(h==null)return;o=Math.min(o,h);let p=s.maps[h];if(d.step){let m=e.steps[h].invert(e.docs[h]),g=d.selection&&d.selection.map(s.slice(a+1,h));g&&l++,r.push(new Ne(p,m,g))}else r.push(new Ne(p))},i);let c=[];for(let d=n;d<o;d++)c.push(new Ne(s.maps[d]));let u=this.items.slice(0,i).append(c).append(r),f=new Ee(u,l);return f.emptyItemCount()>k0&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=e)i.push(o),o.selection&&s++;else if(o.step){let a=o.step.map(n.slice(r)),c=a&&a.getMap();if(r--,c&&n.appendMap(c,r),a){let u=o.selection&&o.selection.map(n.slice(r));u&&s++;let f=new Ne(c.invert(),a,u),d,h=i.length-1;(d=i.length&&i[h].merge(f))?i[h]=d:i.push(f)}}else o.map&&r--},this.items.length,0),new Ee(X.from(i.reverse()),s)}}Ee.empty=new Ee(X.empty,0);function w0(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class Ne{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Ne(n.getMap().invert(),n,this.selection)}}}class Ze{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const E0=20;function M0(t,e,n,r){let i=n.getMeta(dt),s;if(i)return i.historyState;n.getMeta(C0)&&(t=new Ze(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(dt))return o.getMeta(dt).redo?new Ze(t.done.addTransform(n,void 0,r,jr(e)),t.undone,Ka(n.mapping.maps[n.steps.length-1]),t.prevTime,t.prevComposition):new Ze(t.done,t.undone.addTransform(n,void 0,r,jr(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),a=t.prevTime==0||!o&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!v0(n,t.prevRanges)),c=o?Ds(t.prevRanges,n.mapping):Ka(n.mapping.maps[n.steps.length-1]);return new Ze(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,jr(e)),Ee.empty,c,n.time,l??t.prevComposition)}else return(s=n.getMeta("rebased"))?new Ze(t.done.rebased(n,s),t.undone.rebased(n,s),Ds(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Ze(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Ds(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function v0(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function Ka(t){let e=[];return t.forEach((n,r,i,s)=>e.push(i,s)),e}function Ds(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function uf(t,e,n,r){let i=jr(e),s=dt.get(e).spec.config,o=(r?t.undone:t.done).popEvent(e,i);if(!o)return;let l=o.selection.resolve(o.transform.doc),a=(r?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),s,i),c=new Ze(r?a:o.remaining,r?o.remaining:a,null,0,-1);n(o.transform.setSelection(l).setMeta(dt,{redo:r,historyState:c}).scrollIntoView())}let _s=!1,qa=null;function jr(t){let e=t.plugins;if(qa!=e){_s=!1,qa=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){_s=!0;break}}return _s}const dt=new Oe("history"),C0=new Oe("closeHistory");function T0(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new ae({key:dt,state:{init(){return new Ze(Ee.empty,Ee.empty,null,0,-1)},apply(e,n,r){return M0(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?ff:r=="historyRedo"?df:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}const ff=(t,e)=>{let n=dt.getState(t);return!n||n.done.eventCount==0?!1:(e&&uf(n,t,e,!1),!0)},df=(t,e)=>{let n=dt.getState(t);return!n||n.undone.eventCount==0?!1:(e&&uf(n,t,e,!0),!0)},O0=pe.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>ff(t,e),redo:()=>({state:t,dispatch:e})=>df(t,e)}},addProseMirrorPlugins(){return[T0(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),A0=re.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",j(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t})=>t().insertContent({type:this.name}).command(({tr:e,dispatch:n})=>{var r;if(n){const{$to:i}=e.selection,s=i.end();if(i.nodeAfter)e.setSelection(_.create(e.doc,i.pos));else{const o=(r=i.parent.type.contentMatch.defaultType)===null||r===void 0?void 0:r.create();o&&(e.insert(s,o),e.setSelection(_.create(e.doc,s)))}e.scrollIntoView()}return!0}).run()}},addInputRules(){return[Wb({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),N0=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,R0=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,D0=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,_0=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,I0=Ce.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",j(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[xn({find:N0,type:this.type}),xn({find:D0,type:this.type})]},addPasteRules(){return[Jt({find:R0,type:this.type}),Jt({find:_0,type:this.type})]}}),P0=re.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",j(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),L0=re.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",j(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Ja=Ce.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",j(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=Ki(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),Ya=/^(\d+)\.\s$/,B0=re.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",j(this.options.HTMLAttributes,n),0]:["ol",j(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(L0.name,this.editor.getAttributes(Ja.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=sr({find:Ya,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=sr({find:Ya,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Ja.name)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),F0=re.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",j(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),z0=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,H0=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,$0=Ce.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",j(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[xn({find:z0,type:this.type})]},addPasteRules(){return[Jt({find:H0,type:this.type})]}}),j0=re.create({name:"text",group:"inline"}),V0=pe.create({name:"starterKit",addExtensions(){var t,e,n,r,i,s,o,l,a,c,u,f,d,h,p,m,g,y;const b=[];return this.options.blockquote!==!1&&b.push(Kb.configure((t=this.options)===null||t===void 0?void 0:t.blockquote)),this.options.bold!==!1&&b.push(Gb.configure((e=this.options)===null||e===void 0?void 0:e.bold)),this.options.bulletList!==!1&&b.push(Zb.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&b.push(n0.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&b.push(s0.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&b.push(o0.configure((s=this.options)===null||s===void 0?void 0:s.document)),this.options.dropcursor!==!1&&b.push(c0.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&b.push(y0.configure((l=this.options)===null||l===void 0?void 0:l.gapcursor)),this.options.hardBreak!==!1&&b.push(b0.configure((a=this.options)===null||a===void 0?void 0:a.hardBreak)),this.options.heading!==!1&&b.push(S0.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&b.push(O0.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&b.push(A0.configure((f=this.options)===null||f===void 0?void 0:f.horizontalRule)),this.options.italic!==!1&&b.push(I0.configure((d=this.options)===null||d===void 0?void 0:d.italic)),this.options.listItem!==!1&&b.push(P0.configure((h=this.options)===null||h===void 0?void 0:h.listItem)),this.options.orderedList!==!1&&b.push(B0.configure((p=this.options)===null||p===void 0?void 0:p.orderedList)),this.options.paragraph!==!1&&b.push(F0.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&b.push($0.configure((g=this.options)===null||g===void 0?void 0:g.strike)),this.options.text!==!1&&b.push(j0.configure((y=this.options)===null||y===void 0?void 0:y.text)),b}}),W0="aaa1rp3barth4b0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0faromeo7ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re2s2c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y0eats7k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking0channel11l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t0isalat7u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0at2delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d0network8tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntdoor4ier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5gtv3iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0eles2s3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1nder2le4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster5ia3d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4de2k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0cys3drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7serati6ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic3tual5v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rthwesternmutual14on4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3ssagens7y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cher3ks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w0time7i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ffany5ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0channel7ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lkswagen7vo3te1ing3o2yage5u0elos6wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",U0="1213426321653223333353565455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",kn=(t,e)=>{for(const n in e)t[n]=e[n];return t},fo="numeric",ho="ascii",po="alpha",Vr="asciinumeric",Nr="alphanumeric",mo="domain",hf="emoji",K0="scheme",q0="slashscheme",Xa="whitespace";function J0(t,e){return t in e||(e[t]=[]),e[t]}function It(t,e,n){e[fo]&&(e[Vr]=!0,e[Nr]=!0),e[ho]&&(e[Vr]=!0,e[po]=!0),e[Vr]&&(e[Nr]=!0),e[po]&&(e[Nr]=!0),e[Nr]&&(e[mo]=!0),e[hf]&&(e[mo]=!0);for(const r in e){const i=J0(r,n);i.indexOf(t)<0&&i.push(t)}}function Y0(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function ce(t){t===void 0&&(t=null),this.j={},this.jr=[],this.jd=null,this.t=t}ce.groups={};ce.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(t))return s}return e.jd},has(t,e){return e===void 0&&(e=!1),e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||ce.groups;let i;return e&&e.j?i=e:(i=new ce(e),n&&r&&It(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,n,r)},tt(t,e,n,r){r=r||ce.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,l=i.go(t);if(l?(o=new ce,kn(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new ce,s){if(r)if(o.t&&typeof o.t=="string"){const a=kn(Y0(o.t,r),n);It(s,a,r)}else n&&It(s,n,r);o.t=s}return i.j[t]=o,o}};const v=(t,e,n,r,i)=>t.ta(e,n,r,i),ge=(t,e,n,r,i)=>t.tr(e,n,r,i),Ga=(t,e,n,r,i)=>t.ts(e,n,r,i),k=(t,e,n,r,i)=>t.tt(e,n,r,i),Ve="WORD",go="UWORD",or="LOCALHOST",yo="TLD",bo="UTLD",Wr="SCHEME",en="SLASH_SCHEME",sl="NUM",pf="WS",ol="NL",sn="OPENBRACE",Kn="OPENBRACKET",qn="OPENANGLEBRACKET",Jn="OPENPAREN",At="CLOSEBRACE",on="CLOSEBRACKET",ln="CLOSEANGLEBRACKET",Nt="CLOSEPAREN",ai="AMPERSAND",ci="APOSTROPHE",ui="ASTERISK",et="AT",fi="BACKSLASH",di="BACKTICK",hi="CARET",nt="COLON",ll="COMMA",pi="DOLLAR",Re="DOT",mi="EQUALS",al="EXCLAMATION",De="HYPHEN",gi="PERCENT",yi="PIPE",bi="PLUS",Si="POUND",xi="QUERY",cl="QUOTE",ul="SEMI",_e="SLASH",Yn="TILDE",ki="UNDERSCORE",mf="EMOJI",wi="SYM";var gf=Object.freeze({__proto__:null,WORD:Ve,UWORD:go,LOCALHOST:or,TLD:yo,UTLD:bo,SCHEME:Wr,SLASH_SCHEME:en,NUM:sl,WS:pf,NL:ol,OPENBRACE:sn,OPENBRACKET:Kn,OPENANGLEBRACKET:qn,OPENPAREN:Jn,CLOSEBRACE:At,CLOSEBRACKET:on,CLOSEANGLEBRACKET:ln,CLOSEPAREN:Nt,AMPERSAND:ai,APOSTROPHE:ci,ASTERISK:ui,AT:et,BACKSLASH:fi,BACKTICK:di,CARET:hi,COLON:nt,COMMA:ll,DOLLAR:pi,DOT:Re,EQUALS:mi,EXCLAMATION:al,HYPHEN:De,PERCENT:gi,PIPE:yi,PLUS:bi,POUND:Si,QUERY:xi,QUOTE:cl,SEMI:ul,SLASH:_e,TILDE:Yn,UNDERSCORE:ki,EMOJI:mf,SYM:wi});const Gt=/[a-z]/,Is=/\p{L}/u,Ps=/\p{Emoji}/u,Ls=/\d/,Qa=/\s/,Za=`
`,X0="",G0="";let Rr=null,Dr=null;function Q0(t){t===void 0&&(t=[]);const e={};ce.groups=e;const n=new ce;Rr==null&&(Rr=ec(W0)),Dr==null&&(Dr=ec(U0)),k(n,"'",ci),k(n,"{",sn),k(n,"[",Kn),k(n,"<",qn),k(n,"(",Jn),k(n,"}",At),k(n,"]",on),k(n,">",ln),k(n,")",Nt),k(n,"&",ai),k(n,"*",ui),k(n,"@",et),k(n,"`",di),k(n,"^",hi),k(n,":",nt),k(n,",",ll),k(n,"$",pi),k(n,".",Re),k(n,"=",mi),k(n,"!",al),k(n,"-",De),k(n,"%",gi),k(n,"|",yi),k(n,"+",bi),k(n,"#",Si),k(n,"?",xi),k(n,'"',cl),k(n,"/",_e),k(n,";",ul),k(n,"~",Yn),k(n,"_",ki),k(n,"\\",fi);const r=ge(n,Ls,sl,{[fo]:!0});ge(r,Ls,r);const i=ge(n,Gt,Ve,{[ho]:!0});ge(i,Gt,i);const s=ge(n,Is,go,{[po]:!0});ge(s,Gt),ge(s,Is,s);const o=ge(n,Qa,pf,{[Xa]:!0});k(n,Za,ol,{[Xa]:!0}),k(o,Za),ge(o,Qa,o);const l=ge(n,Ps,mf,{[hf]:!0});ge(l,Ps,l),k(l,X0,l);const a=k(l,G0);ge(a,Ps,l);const c=[[Gt,i]],u=[[Gt,null],[Is,s]];for(let f=0;f<Rr.length;f++)Ge(n,Rr[f],yo,Ve,c);for(let f=0;f<Dr.length;f++)Ge(n,Dr[f],bo,go,u);It(yo,{tld:!0,ascii:!0},e),It(bo,{utld:!0,alpha:!0},e),Ge(n,"file",Wr,Ve,c),Ge(n,"mailto",Wr,Ve,c),Ge(n,"http",en,Ve,c),Ge(n,"https",en,Ve,c),Ge(n,"ftp",en,Ve,c),Ge(n,"ftps",en,Ve,c),It(Wr,{scheme:!0,ascii:!0},e),It(en,{slashscheme:!0,ascii:!0},e),t=t.sort((f,d)=>f[0]>d[0]?1:-1);for(let f=0;f<t.length;f++){const d=t[f][0],p=t[f][1]?{[K0]:!0}:{[q0]:!0};d.indexOf("-")>=0?p[mo]=!0:Gt.test(d)?Ls.test(d)?p[Vr]=!0:p[ho]=!0:p[fo]=!0,Ga(n,d,d,p)}return Ga(n,"localhost",or,{ascii:!0}),n.jd=new ce(wi),{start:n,tokens:kn({groups:e},gf)}}function Z0(t,e){const n=e1(e.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let l=t,a=null,c=0,u=null,f=-1,d=-1;for(;o<r&&(a=l.go(n[o]));)l=a,l.accepts()?(f=0,d=0,u=l):f>=0&&(f+=n[o].length,d++),c+=n[o].length,s+=n[o].length,o++;s-=f,o-=d,c-=f,i.push({t:u.t,v:e.slice(s-c,s),s:s-c,e:s})}return i}function e1(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=t.charCodeAt(r+1))<56320||s>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function Ge(t,e,n,r,i){let s;const o=e.length;for(let l=0;l<o-1;l++){const a=e[l];t.j[a]?s=t.j[a]:(s=new ce(r),s.jr=i.slice(),t.j[a]=s),t=s}return s=new ce(n),s.jr=i.slice(),t.j[e[o-1]]=s,s}function ec(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let s=0;for(;i.indexOf(t[r+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let o=parseInt(t.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(t[r]),r++}return e}const lr={defaultProtocol:"http",events:null,format:tc,formatHref:tc,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function fl(t,e){e===void 0&&(e=null);let n=kn({},lr);t&&(n=kn(n,t instanceof fl?t.o:t));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}fl.prototype={o:lr,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:lr[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function tc(t){return t}function yf(t,e){this.t="token",this.v=t,this.tk=e}yf.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t){return t===void 0&&(t=lr.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),s=this.toFormattedString(t),o={},l=t.get("className",n,e),a=t.get("target",n,e),c=t.get("rel",n,e),u=t.getObj("attributes",n,e),f=t.getObj("events",n,e);return o.href=r,l&&(o.class=l),a&&(o.target=a),c&&(o.rel=c),u&&kn(o,u),{tagName:i,attributes:o,content:s,eventListeners:f}}};function qi(t,e){class n extends yf{constructor(i,s){super(i,s),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const nc=qi("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),rc=qi("text"),t1=qi("nl"),Mt=qi("url",{isLink:!0,toHref(t){return t===void 0&&(t=lr.defaultProtocol),this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==or&&t[1].t===nt}}),q=t=>new ce(t);function n1(t){let{groups:e}=t;const n=e.domain.concat([ai,ui,et,fi,di,hi,pi,mi,De,sl,gi,yi,bi,Si,_e,wi,Yn,ki]),r=[ci,ln,At,on,Nt,nt,ll,Re,al,qn,sn,Kn,Jn,xi,cl,ul],i=[ai,ci,ui,fi,di,hi,At,pi,mi,De,sn,gi,yi,bi,Si,xi,_e,wi,Yn,ki],s=q(),o=k(s,Yn);v(o,i,o),v(o,e.domain,o);const l=q(),a=q(),c=q();v(s,e.domain,l),v(s,e.scheme,a),v(s,e.slashscheme,c),v(l,i,o),v(l,e.domain,l);const u=k(l,et);k(o,et,u),k(a,et,u),k(c,et,u);const f=k(o,Re);v(f,i,o),v(f,e.domain,o);const d=q();v(u,e.domain,d),v(d,e.domain,d);const h=k(d,Re);v(h,e.domain,d);const p=q(nc);v(h,e.tld,p),v(h,e.utld,p),k(u,or,p);const m=k(d,De);v(m,e.domain,d),v(p,e.domain,d),k(p,Re,h),k(p,De,m);const g=k(p,nt);v(g,e.numeric,nc);const y=k(l,De),b=k(l,Re);v(y,e.domain,l),v(b,i,o),v(b,e.domain,l);const w=q(Mt);v(b,e.tld,w),v(b,e.utld,w),v(w,e.domain,l),v(w,i,o),k(w,Re,b),k(w,De,y),k(w,et,u);const A=k(w,nt),D=q(Mt);v(A,e.numeric,D);const C=q(Mt),L=q();v(C,n,C),v(C,r,L),v(L,n,C),v(L,r,L),k(w,_e,C),k(D,_e,C);const O=k(a,nt),me=k(c,nt),Je=k(me,_e),Nn=k(Je,_e);v(a,e.domain,l),k(a,Re,b),k(a,De,y),v(c,e.domain,l),k(c,Re,b),k(c,De,y),v(O,e.domain,C),k(O,_e,C),v(Nn,e.domain,C),v(Nn,n,C),k(Nn,_e,C);const Rn=k(C,sn),xr=k(C,Kn),kr=k(C,qn),wr=k(C,Jn);k(L,sn,Rn),k(L,Kn,xr),k(L,qn,kr),k(L,Jn,wr),k(Rn,At,C),k(xr,on,C),k(kr,ln,C),k(wr,Nt,C),k(Rn,At,C);const Yt=q(Mt),kt=q(Mt),wt=q(Mt),Et=q(Mt);v(Rn,n,Yt),v(xr,n,kt),v(kr,n,wt),v(wr,n,Et);const Dn=q(),Er=q(),Mr=q(),vr=q();return v(Rn,r),v(xr,r),v(kr,r),v(wr,r),v(Yt,n,Yt),v(kt,n,kt),v(wt,n,wt),v(Et,n,Et),v(Yt,r,Yt),v(kt,r,kt),v(wt,r,wt),v(Et,r,Et),v(Dn,n,Dn),v(Er,n,kt),v(Mr,n,wt),v(vr,n,Et),v(Dn,r,Dn),v(Er,r,Er),v(Mr,r,Mr),v(vr,r,vr),k(kt,on,C),k(wt,ln,C),k(Et,Nt,C),k(Yt,At,C),k(Er,on,C),k(Mr,ln,C),k(vr,Nt,C),k(Dn,Nt,C),k(s,or,w),k(s,ol,t1),{start:s,tokens:gf}}function r1(t,e,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let l=t,a=null,c=null,u=0,f=null,d=-1;for(;i<r&&!(a=l.go(n[i].t));)o.push(n[i++]);for(;i<r&&(c=a||l.go(n[i].t));)a=null,l=c,l.accepts()?(d=0,f=l):d>=0&&d++,i++,u++;if(d<0)i-=u,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(Bs(rc,e,o)),o=[]),i-=d,u-=d;const h=f.t,p=n.slice(i-u,i);s.push(Bs(h,e,p))}}return o.length>0&&s.push(Bs(rc,e,o)),s}function Bs(t,e,n){const r=n[0].s,i=n[n.length-1].e,s=e.slice(r,i);return new t(s,n)}const i1=typeof console<"u"&&console&&console.warn||(()=>{}),s1="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",F={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function o1(){ce.groups={},F.scanner=null,F.parser=null,F.tokenQueue=[],F.pluginQueue=[],F.customSchemes=[],F.initialized=!1}function ic(t,e){if(e===void 0&&(e=!1),F.initialized&&i1(`linkifyjs: already initialized - will not register custom scheme "${t}" ${s1}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
 1. Must only contain digits, lowercase ASCII letters or "-"
 2. Cannot start or end with "-"
 3. "-" cannot repeat`);F.customSchemes.push([t,e])}function l1(){F.scanner=Q0(F.customSchemes);for(let t=0;t<F.tokenQueue.length;t++)F.tokenQueue[t][1]({scanner:F.scanner});F.parser=n1(F.scanner.tokens);for(let t=0;t<F.pluginQueue.length;t++)F.pluginQueue[t][1]({scanner:F.scanner,parser:F.parser});F.initialized=!0}function bf(t){return F.initialized||l1(),r1(F.parser.start,t,Z0(F.scanner.start,t))}function dl(t,e,n){if(e===void 0&&(e=null),n===void 0&&(n=null),e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new fl(n),i=bf(t),s=[];for(let o=0;o<i.length;o++){const l=i[o];l.isLink&&(!e||l.t===e)&&s.push(l.toFormattedObject(r))}return s}function sc(t,e){e===void 0&&(e=null);const n=bf(t);return n.length===1&&n[0].isLink&&(!e||n[0].t===e)}function a1(t){return new ae({key:new Oe("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(u=>u.docChanged)&&!n.doc.eq(r.doc),s=e.some(u=>u.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,l=rb(n.doc,[...e]),{mapping:a}=l;if(db(l).forEach(({oldRange:u,newRange:f})=>{oi(u.from,u.to,n.doc).filter(m=>m.mark.type===t.type).forEach(m=>{const g=a.map(m.from),y=a.map(m.to),b=oi(g,y,r.doc).filter(O=>O.mark.type===t.type);if(!b.length)return;const w=b[0],A=n.doc.textBetween(m.from,m.to,void 0," "),D=r.doc.textBetween(w.from,w.to,void 0," "),C=sc(A),L=sc(D);C&&!L&&o.removeMark(w.from,w.to,t.type)});const d=sb(r.doc,f,m=>m.isTextblock);let h,p;if(d.length>1?(h=d[0],p=r.doc.textBetween(h.pos,h.pos+h.node.nodeSize,void 0," ")):d.length&&r.doc.textBetween(f.from,f.to," "," ").endsWith(" ")&&(h=d[0],p=r.doc.textBetween(h.pos,f.to,void 0," ")),h&&p){const m=p.split(" ").filter(b=>b!=="");if(m.length<=0)return!1;const g=m[m.length-1],y=h.pos+p.lastIndexOf(g);if(!g)return!1;dl(g).filter(b=>b.isLink).filter(b=>t.validate?t.validate(b.value):!0).map(b=>({...b,from:y+b.start+1,to:y+b.end+1})).forEach(b=>{o.addMark(b.from,b.to,t.type.create({href:b.href}))})}}),!!o.steps.length)return o}})}function c1(t){return new ae({key:new Oe("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,s,o;if(r.button!==0)return!1;const l=af(e.state,t.type.name),a=(i=r.target)===null||i===void 0?void 0:i.closest("a"),c=(s=a==null?void 0:a.href)!==null&&s!==void 0?s:l.href,u=(o=a==null?void 0:a.target)!==null&&o!==void 0?o:l.target;return a&&c?(window.open(c,u),!0):!1}}})}function u1(t){return new ae({key:new Oe("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:i}=e,{selection:s}=i,{empty:o}=s;if(o)return!1;let l="";r.content.forEach(c=>{l+=c.textContent});const a=dl(l).find(c=>c.isLink&&c.value===l);return!l||!a?!1:(t.editor.commands.setMark(t.type,{href:a.href}),!0)}}})}const f1=Ce.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(t=>{if(typeof t=="string"){ic(t);return}ic(t.scheme,t.optionalSlashes)})},onDestroy(){o1()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}},addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:'a[href]:not([href *= "javascript:" i])'}]},renderHTML({HTMLAttributes:t}){return["a",j(this.options.HTMLAttributes,t),0]},addCommands(){return{setLink:t=>({chain:e})=>e().setMark(this.name,t).setMeta("preventAutolink",!0).run(),toggleLink:t=>({chain:e})=>e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Jt({find:t=>dl(t).filter(e=>this.options.validate?this.options.validate(e.value):!0).filter(e=>e.isLink).map(e=>({text:e.value,index:e.start,data:e})),type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[];return this.options.autolink&&t.push(a1({type:this.type,validate:this.options.validate})),this.options.openOnClick&&t.push(c1({type:this.type})),this.options.linkOnPaste&&t.push(u1({editor:this.editor,type:this.type})),t}}),d1=t=>{let e;return{data_content:t,isLoaded(){return this.editor},isActive(n,r={},i){return e.isActive(n,r)},clickUndo(){e.chain().focus().undo().run()},clickRedo(){e.chain().focus().redo().run()},toggleBold(){e.chain().toggleBold().focus().run()},toggleHeading(n){e.chain().toggleHeading({level:n}).focus().run()},toggleItalic(){e.chain().toggleItalic().focus().run()},toggleStrike(){e.chain().toggleStrike().focus().run()},toggleLink(){e.chain().toggleLink().focus().run()},toggleCode(){e.chain().toggleCode().focus().run()},toggleBlockquote(){e.chain().toggleBlockquote().focus().run()},toggleCodeBlock(){e.chain().toggleCodeBlock().focus().run()},toggleBulletList(){e.chain().toggleBulletList().focus().run()},toggleOrderedList(){e.chain().toggleOrderedList().focus().run()},setHr(){e.chain().setHorizontalRule().focus().run()},updatedAt:Date.now(),init(n){const r=this;console.log(t),e=new Vb({element:n,extensions:[V0.configure({heading:{levels:[1,2,3,4,5]}}),f1.configure({protocols:["mailto"],HTMLAttributes:{rel:"noopener noreferrer"}})],editorProps:{attributes:{class:"min-h-[10rem] max-h-screen overflow-y-auto focus:outline-none resize-y prose prose-slate xl:prose-lg dark:prose-invert"}},content:r.data_content.html,onCreate({editor:i}){r.updatedAt=Date.now()},onUpdate({editor:i}){r.updatedAt=Date.now(),r.data_content.html=i.getHTML(),r.data_content.json=i.getJSON(),console.log(r.data_content)},onSelectionUpdate({editor:i}){r.updatedAt=Date.now()},onBlur:({editor:i})=>{console.log("editorUpdated")}})}}};var So=!1,xo=!1,$t=[],ko=-1;function h1(t){p1(t)}function p1(t){$t.includes(t)||$t.push(t),m1()}function Sf(t){let e=$t.indexOf(t);e!==-1&&e>ko&&$t.splice(e,1)}function m1(){!xo&&!So&&(So=!0,queueMicrotask(g1))}function g1(){So=!1,xo=!0;for(let t=0;t<$t.length;t++)$t[t](),ko=t;$t.length=0,ko=-1,xo=!1}var Cn,Tn,hr,xf,wo=!0;function y1(t){wo=!1,t(),wo=!0}function b1(t){Cn=t.reactive,hr=t.release,Tn=e=>t.effect(e,{scheduler:n=>{wo?h1(n):n()}}),xf=t.raw}function oc(t){Tn=t}function S1(t){let e=()=>{};return[r=>{let i=Tn(r);return t._x_effects||(t._x_effects=new Set,t._x_runEffects=()=>{t._x_effects.forEach(s=>s())}),t._x_effects.add(i),e=()=>{i!==void 0&&(t._x_effects.delete(i),hr(i))},i},()=>{e()}]}var kf=[],wf=[],Ef=[];function x1(t){Ef.push(t)}function Mf(t,e){typeof e=="function"?(t._x_cleanups||(t._x_cleanups=[]),t._x_cleanups.push(e)):(e=t,wf.push(e))}function k1(t){kf.push(t)}function w1(t,e,n){t._x_attributeCleanups||(t._x_attributeCleanups={}),t._x_attributeCleanups[e]||(t._x_attributeCleanups[e]=[]),t._x_attributeCleanups[e].push(n)}function vf(t,e){t._x_attributeCleanups&&Object.entries(t._x_attributeCleanups).forEach(([n,r])=>{(e===void 0||e.includes(n))&&(r.forEach(i=>i()),delete t._x_attributeCleanups[n])})}var hl=new MutationObserver(yl),pl=!1;function ml(){hl.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),pl=!0}function Cf(){E1(),hl.disconnect(),pl=!1}var Xn=[],Fs=!1;function E1(){Xn=Xn.concat(hl.takeRecords()),Xn.length&&!Fs&&(Fs=!0,queueMicrotask(()=>{M1(),Fs=!1}))}function M1(){yl(Xn),Xn.length=0}function J(t){if(!pl)return t();Cf();let e=t();return ml(),e}var gl=!1,Ei=[];function v1(){gl=!0}function C1(){gl=!1,yl(Ei),Ei=[]}function yl(t){if(gl){Ei=Ei.concat(t);return}let e=[],n=[],r=new Map,i=new Map;for(let s=0;s<t.length;s++)if(!t[s].target._x_ignoreMutationObserver&&(t[s].type==="childList"&&(t[s].addedNodes.forEach(o=>o.nodeType===1&&e.push(o)),t[s].removedNodes.forEach(o=>o.nodeType===1&&n.push(o))),t[s].type==="attributes")){let o=t[s].target,l=t[s].attributeName,a=t[s].oldValue,c=()=>{r.has(o)||r.set(o,[]),r.get(o).push({name:l,value:o.getAttribute(l)})},u=()=>{i.has(o)||i.set(o,[]),i.get(o).push(l)};o.hasAttribute(l)&&a===null?c():o.hasAttribute(l)?(u(),c()):u()}i.forEach((s,o)=>{vf(o,s)}),r.forEach((s,o)=>{kf.forEach(l=>l(o,s))});for(let s of n)if(!e.includes(s)&&(wf.forEach(o=>o(s)),s._x_cleanups))for(;s._x_cleanups.length;)s._x_cleanups.pop()();e.forEach(s=>{s._x_ignoreSelf=!0,s._x_ignore=!0});for(let s of e)n.includes(s)||s.isConnected&&(delete s._x_ignoreSelf,delete s._x_ignore,Ef.forEach(o=>o(s)),s._x_ignore=!0,s._x_ignoreSelf=!0);e.forEach(s=>{delete s._x_ignoreSelf,delete s._x_ignore}),e=null,n=null,r=null,i=null}function Tf(t){return mr(wn(t))}function pr(t,e,n){return t._x_dataStack=[e,...wn(n||t)],()=>{t._x_dataStack=t._x_dataStack.filter(r=>r!==e)}}function wn(t){return t._x_dataStack?t._x_dataStack:typeof ShadowRoot=="function"&&t instanceof ShadowRoot?wn(t.host):t.parentNode?wn(t.parentNode):[]}function mr(t){let e=new Proxy({},{ownKeys:()=>Array.from(new Set(t.flatMap(n=>Object.keys(n)))),has:(n,r)=>t.some(i=>i.hasOwnProperty(r)),get:(n,r)=>(t.find(i=>{if(i.hasOwnProperty(r)){let s=Object.getOwnPropertyDescriptor(i,r);if(s.get&&s.get._x_alreadyBound||s.set&&s.set._x_alreadyBound)return!0;if((s.get||s.set)&&s.enumerable){let o=s.get,l=s.set,a=s;o=o&&o.bind(e),l=l&&l.bind(e),o&&(o._x_alreadyBound=!0),l&&(l._x_alreadyBound=!0),Object.defineProperty(i,r,{...a,get:o,set:l})}return!0}return!1})||{})[r],set:(n,r,i)=>{let s=t.find(o=>o.hasOwnProperty(r));return s?s[r]=i:t[t.length-1][r]=i,!0}});return e}function Of(t){let e=r=>typeof r=="object"&&!Array.isArray(r)&&r!==null,n=(r,i="")=>{Object.entries(Object.getOwnPropertyDescriptors(r)).forEach(([s,{value:o,enumerable:l}])=>{if(l===!1||o===void 0)return;let a=i===""?s:`${i}.${s}`;typeof o=="object"&&o!==null&&o._x_interceptor?r[s]=o.initialize(t,a,s):e(o)&&o!==r&&!(o instanceof Element)&&n(o,a)})};return n(t)}function Af(t,e=()=>{}){let n={initialValue:void 0,_x_interceptor:!0,initialize(r,i,s){return t(this.initialValue,()=>T1(r,i),o=>Eo(r,i,o),i,s)}};return e(n),r=>{if(typeof r=="object"&&r!==null&&r._x_interceptor){let i=n.initialize.bind(n);n.initialize=(s,o,l)=>{let a=r.initialize(s,o,l);return n.initialValue=a,i(s,o,l)}}else n.initialValue=r;return n}}function T1(t,e){return e.split(".").reduce((n,r)=>n[r],t)}function Eo(t,e,n){if(typeof e=="string"&&(e=e.split(".")),e.length===1)t[e[0]]=n;else{if(e.length===0)throw error;return t[e[0]]||(t[e[0]]={}),Eo(t[e[0]],e.slice(1),n)}}var Nf={};function Ae(t,e){Nf[t]=e}function Mo(t,e){return Object.entries(Nf).forEach(([n,r])=>{let i=null;function s(){if(i)return i;{let[o,l]=Lf(e);return i={interceptor:Af,...o},Mf(e,l),i}}Object.defineProperty(t,`$${n}`,{get(){return r(e,s())},enumerable:!1})}),t}function O1(t,e,n,...r){try{return n(...r)}catch(i){ar(i,t,e)}}function ar(t,e,n=void 0){Object.assign(t,{el:e,expression:n}),console.warn(`Alpine Expression Error: ${t.message}

${n?'Expression: "'+n+`"

`:""}`,e),setTimeout(()=>{throw t},0)}var Ur=!0;function Rf(t){let e=Ur;Ur=!1;let n=t();return Ur=e,n}function jt(t,e,n={}){let r;return ie(t,e)(i=>r=i,n),r}function ie(...t){return Df(...t)}var Df=_f;function A1(t){Df=t}function _f(t,e){let n={};Mo(n,t);let r=[n,...wn(t)],i=typeof e=="function"?N1(r,e):D1(r,e,t);return O1.bind(null,t,e,i)}function N1(t,e){return(n=()=>{},{scope:r={},params:i=[]}={})=>{let s=e.apply(mr([r,...t]),i);Mi(n,s)}}var zs={};function R1(t,e){if(zs[t])return zs[t];let n=Object.getPrototypeOf(async function(){}).constructor,r=/^[\n\s]*if.*\(.*\)/.test(t)||/^(let|const)\s/.test(t)?`(async()=>{ ${t} })()`:t,s=(()=>{try{return new n(["__self","scope"],`with (scope) { __self.result = ${r} }; __self.finished = true; return __self.result;`)}catch(o){return ar(o,e,t),Promise.resolve()}})();return zs[t]=s,s}function D1(t,e,n){let r=R1(e,n);return(i=()=>{},{scope:s={},params:o=[]}={})=>{r.result=void 0,r.finished=!1;let l=mr([s,...t]);if(typeof r=="function"){let a=r(r,l).catch(c=>ar(c,n,e));r.finished?(Mi(i,r.result,l,o,n),r.result=void 0):a.then(c=>{Mi(i,c,l,o,n)}).catch(c=>ar(c,n,e)).finally(()=>r.result=void 0)}}}function Mi(t,e,n,r,i){if(Ur&&typeof e=="function"){let s=e.apply(n,r);s instanceof Promise?s.then(o=>Mi(t,o,n,r)).catch(o=>ar(o,i,e)):t(s)}else typeof e=="object"&&e instanceof Promise?e.then(s=>t(s)):t(e)}var bl="x-";function On(t=""){return bl+t}function _1(t){bl=t}var vo={};function V(t,e){return vo[t]=e,{before(n){if(!vo[n]){console.warn("Cannot find directive `${directive}`. `${name}` will use the default order of execution");return}const r=Pt.indexOf(n);Pt.splice(r>=0?r:Pt.indexOf("DEFAULT"),0,t)}}}function Sl(t,e,n){if(e=Array.from(e),t._x_virtualDirectives){let s=Object.entries(t._x_virtualDirectives).map(([l,a])=>({name:l,value:a})),o=If(s);s=s.map(l=>o.find(a=>a.name===l.name)?{name:`x-bind:${l.name}`,value:`"${l.value}"`}:l),e=e.concat(s)}let r={};return e.map(zf((s,o)=>r[s]=o)).filter($f).map(L1(r,n)).sort(B1).map(s=>P1(t,s))}function If(t){return Array.from(t).map(zf()).filter(e=>!$f(e))}var Co=!1,$n=new Map,Pf=Symbol();function I1(t){Co=!0;let e=Symbol();Pf=e,$n.set(e,[]);let n=()=>{for(;$n.get(e).length;)$n.get(e).shift()();$n.delete(e)},r=()=>{Co=!1,n()};t(n),r()}function Lf(t){let e=[],n=l=>e.push(l),[r,i]=S1(t);return e.push(i),[{Alpine:yr,effect:r,cleanup:n,evaluateLater:ie.bind(ie,t),evaluate:jt.bind(jt,t)},()=>e.forEach(l=>l())]}function P1(t,e){let n=()=>{},r=vo[e.type]||n,[i,s]=Lf(t);w1(t,e.original,s);let o=()=>{t._x_ignore||t._x_ignoreSelf||(r.inline&&r.inline(t,e,i),r=r.bind(r,t,e,i),Co?$n.get(Pf).push(r):r())};return o.runCleanups=s,o}var Bf=(t,e)=>({name:n,value:r})=>(n.startsWith(t)&&(n=n.replace(t,e)),{name:n,value:r}),Ff=t=>t;function zf(t=()=>{}){return({name:e,value:n})=>{let{name:r,value:i}=Hf.reduce((s,o)=>o(s),{name:e,value:n});return r!==e&&t(r,e),{name:r,value:i}}}var Hf=[];function xl(t){Hf.push(t)}function $f({name:t}){return jf().test(t)}var jf=()=>new RegExp(`^${bl}([^:^.]+)\\b`);function L1(t,e){return({name:n,value:r})=>{let i=n.match(jf()),s=n.match(/:([a-zA-Z0-9\-:]+)/),o=n.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],l=e||t[n]||n;return{type:i?i[1]:null,value:s?s[1]:null,modifiers:o.map(a=>a.replace(".","")),expression:r,original:l}}}var To="DEFAULT",Pt=["ignore","ref","data","id","bind","init","for","model","modelable","transition","show","if",To,"teleport"];function B1(t,e){let n=Pt.indexOf(t.type)===-1?To:t.type,r=Pt.indexOf(e.type)===-1?To:e.type;return Pt.indexOf(n)-Pt.indexOf(r)}function Gn(t,e,n={}){t.dispatchEvent(new CustomEvent(e,{detail:n,bubbles:!0,composed:!0,cancelable:!0}))}function pt(t,e){if(typeof ShadowRoot=="function"&&t instanceof ShadowRoot){Array.from(t.children).forEach(i=>pt(i,e));return}let n=!1;if(e(t,()=>n=!0),n)return;let r=t.firstElementChild;for(;r;)pt(r,e),r=r.nextElementSibling}function mt(t,...e){console.warn(`Alpine Warning: ${t}`,...e)}var lc=!1;function F1(){lc&&mt("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),lc=!0,document.body||mt("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),Gn(document,"alpine:init"),Gn(document,"alpine:initializing"),ml(),x1(e=>gt(e,pt)),Mf(e=>Yf(e)),k1((e,n)=>{Sl(e,n).forEach(r=>r())});let t=e=>!Ji(e.parentElement,!0);Array.from(document.querySelectorAll(Uf())).filter(t).forEach(e=>{gt(e)}),Gn(document,"alpine:initialized")}var kl=[],Vf=[];function Wf(){return kl.map(t=>t())}function Uf(){return kl.concat(Vf).map(t=>t())}function Kf(t){kl.push(t)}function qf(t){Vf.push(t)}function Ji(t,e=!1){return Yi(t,n=>{if((e?Uf():Wf()).some(i=>n.matches(i)))return!0})}function Yi(t,e){if(t){if(e(t))return t;if(t._x_teleportBack&&(t=t._x_teleportBack),!!t.parentElement)return Yi(t.parentElement,e)}}function z1(t){return Wf().some(e=>t.matches(e))}var Jf=[];function H1(t){Jf.push(t)}function gt(t,e=pt,n=()=>{}){I1(()=>{e(t,(r,i)=>{n(r,i),Jf.forEach(s=>s(r,i)),Sl(r,r.attributes).forEach(s=>s()),r._x_ignore&&i()})})}function Yf(t){pt(t,e=>vf(e))}var Oo=[],wl=!1;function El(t=()=>{}){return queueMicrotask(()=>{wl||setTimeout(()=>{Ao()})}),new Promise(e=>{Oo.push(()=>{t(),e()})})}function Ao(){for(wl=!1;Oo.length;)Oo.shift()()}function $1(){wl=!0}function Ml(t,e){return Array.isArray(e)?ac(t,e.join(" ")):typeof e=="object"&&e!==null?j1(t,e):typeof e=="function"?Ml(t,e()):ac(t,e)}function ac(t,e){let n=i=>i.split(" ").filter(s=>!t.classList.contains(s)).filter(Boolean),r=i=>(t.classList.add(...i),()=>{t.classList.remove(...i)});return e=e===!0?e="":e||"",r(n(e))}function j1(t,e){let n=l=>l.split(" ").filter(Boolean),r=Object.entries(e).flatMap(([l,a])=>a?n(l):!1).filter(Boolean),i=Object.entries(e).flatMap(([l,a])=>a?!1:n(l)).filter(Boolean),s=[],o=[];return i.forEach(l=>{t.classList.contains(l)&&(t.classList.remove(l),o.push(l))}),r.forEach(l=>{t.classList.contains(l)||(t.classList.add(l),s.push(l))}),()=>{o.forEach(l=>t.classList.add(l)),s.forEach(l=>t.classList.remove(l))}}function Xi(t,e){return typeof e=="object"&&e!==null?V1(t,e):W1(t,e)}function V1(t,e){let n={};return Object.entries(e).forEach(([r,i])=>{n[r]=t.style[r],r.startsWith("--")||(r=U1(r)),t.style.setProperty(r,i)}),setTimeout(()=>{t.style.length===0&&t.removeAttribute("style")}),()=>{Xi(t,n)}}function W1(t,e){let n=t.getAttribute("style",e);return t.setAttribute("style",e),()=>{t.setAttribute("style",n||"")}}function U1(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function No(t,e=()=>{}){let n=!1;return function(){n?e.apply(this,arguments):(n=!0,t.apply(this,arguments))}}V("transition",(t,{value:e,modifiers:n,expression:r},{evaluate:i})=>{typeof r=="function"&&(r=i(r)),r!==!1&&(!r||typeof r=="boolean"?q1(t,n,e):K1(t,r,e))});function K1(t,e,n){Xf(t,Ml,""),{enter:i=>{t._x_transition.enter.during=i},"enter-start":i=>{t._x_transition.enter.start=i},"enter-end":i=>{t._x_transition.enter.end=i},leave:i=>{t._x_transition.leave.during=i},"leave-start":i=>{t._x_transition.leave.start=i},"leave-end":i=>{t._x_transition.leave.end=i}}[n](e)}function q1(t,e,n){Xf(t,Xi);let r=!e.includes("in")&&!e.includes("out")&&!n,i=r||e.includes("in")||["enter"].includes(n),s=r||e.includes("out")||["leave"].includes(n);e.includes("in")&&!r&&(e=e.filter((y,b)=>b<e.indexOf("out"))),e.includes("out")&&!r&&(e=e.filter((y,b)=>b>e.indexOf("out")));let o=!e.includes("opacity")&&!e.includes("scale"),l=o||e.includes("opacity"),a=o||e.includes("scale"),c=l?0:1,u=a?Ln(e,"scale",95)/100:1,f=Ln(e,"delay",0)/1e3,d=Ln(e,"origin","center"),h="opacity, transform",p=Ln(e,"duration",150)/1e3,m=Ln(e,"duration",75)/1e3,g="cubic-bezier(0.4, 0.0, 0.2, 1)";i&&(t._x_transition.enter.during={transformOrigin:d,transitionDelay:`${f}s`,transitionProperty:h,transitionDuration:`${p}s`,transitionTimingFunction:g},t._x_transition.enter.start={opacity:c,transform:`scale(${u})`},t._x_transition.enter.end={opacity:1,transform:"scale(1)"}),s&&(t._x_transition.leave.during={transformOrigin:d,transitionDelay:`${f}s`,transitionProperty:h,transitionDuration:`${m}s`,transitionTimingFunction:g},t._x_transition.leave.start={opacity:1,transform:"scale(1)"},t._x_transition.leave.end={opacity:c,transform:`scale(${u})`})}function Xf(t,e,n={}){t._x_transition||(t._x_transition={enter:{during:n,start:n,end:n},leave:{during:n,start:n,end:n},in(r=()=>{},i=()=>{}){Ro(t,e,{during:this.enter.during,start:this.enter.start,end:this.enter.end},r,i)},out(r=()=>{},i=()=>{}){Ro(t,e,{during:this.leave.during,start:this.leave.start,end:this.leave.end},r,i)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(t,e,n,r){const i=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let s=()=>i(n);if(e){t._x_transition&&(t._x_transition.enter||t._x_transition.leave)?t._x_transition.enter&&(Object.entries(t._x_transition.enter.during).length||Object.entries(t._x_transition.enter.start).length||Object.entries(t._x_transition.enter.end).length)?t._x_transition.in(n):s():t._x_transition?t._x_transition.in(n):s();return}t._x_hidePromise=t._x_transition?new Promise((o,l)=>{t._x_transition.out(()=>{},()=>o(r)),t._x_transitioning.beforeCancel(()=>l({isFromCancelledTransition:!0}))}):Promise.resolve(r),queueMicrotask(()=>{let o=Gf(t);o?(o._x_hideChildren||(o._x_hideChildren=[]),o._x_hideChildren.push(t)):i(()=>{let l=a=>{let c=Promise.all([a._x_hidePromise,...(a._x_hideChildren||[]).map(l)]).then(([u])=>u());return delete a._x_hidePromise,delete a._x_hideChildren,c};l(t).catch(a=>{if(!a.isFromCancelledTransition)throw a})})})};function Gf(t){let e=t.parentNode;if(e)return e._x_hidePromise?e:Gf(e)}function Ro(t,e,{during:n,start:r,end:i}={},s=()=>{},o=()=>{}){if(t._x_transitioning&&t._x_transitioning.cancel(),Object.keys(n).length===0&&Object.keys(r).length===0&&Object.keys(i).length===0){s(),o();return}let l,a,c;J1(t,{start(){l=e(t,r)},during(){a=e(t,n)},before:s,end(){l(),c=e(t,i)},after:o,cleanup(){a(),c()}})}function J1(t,e){let n,r,i,s=No(()=>{J(()=>{n=!0,r||e.before(),i||(e.end(),Ao()),e.after(),t.isConnected&&e.cleanup(),delete t._x_transitioning})});t._x_transitioning={beforeCancels:[],beforeCancel(o){this.beforeCancels.push(o)},cancel:No(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();s()}),finish:s},J(()=>{e.start(),e.during()}),$1(),requestAnimationFrame(()=>{if(n)return;let o=Number(getComputedStyle(t).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,l=Number(getComputedStyle(t).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;o===0&&(o=Number(getComputedStyle(t).animationDuration.replace("s",""))*1e3),J(()=>{e.before()}),r=!0,requestAnimationFrame(()=>{n||(J(()=>{e.end()}),Ao(),setTimeout(t._x_transitioning.finish,o+l),i=!0)})})}function Ln(t,e,n){if(t.indexOf(e)===-1)return n;const r=t[t.indexOf(e)+1];if(!r||e==="scale"&&isNaN(r))return n;if(e==="duration"||e==="delay"){let i=r.match(/([0-9]+)ms/);if(i)return i[1]}return e==="origin"&&["top","right","left","center","bottom"].includes(t[t.indexOf(e)+2])?[r,t[t.indexOf(e)+2]].join(" "):r}var cr=!1;function gr(t,e=()=>{}){return(...n)=>cr?e(...n):t(...n)}function Y1(t){return(...e)=>cr&&t(...e)}function X1(t,e){e._x_dataStack||(e._x_dataStack=t._x_dataStack),cr=!0,Q1(()=>{G1(e)}),cr=!1}function G1(t){let e=!1;gt(t,(r,i)=>{pt(r,(s,o)=>{if(e&&z1(s))return o();e=!0,i(s,o)})})}function Q1(t){let e=Tn;oc((n,r)=>{let i=e(n);return hr(i),()=>{}}),t(),oc(e)}function Qf(t,e,n,r=[]){switch(t._x_bindings||(t._x_bindings=Cn({})),t._x_bindings[e]=n,e=r.includes("camel")?oS(e):e,e){case"value":Z1(t,n);break;case"style":tS(t,n);break;case"class":eS(t,n);break;case"selected":case"checked":nS(t,e,n);break;default:Zf(t,e,n);break}}function Z1(t,e){if(t.type==="radio")t.attributes.value===void 0&&(t.value=e),window.fromModel&&(t.checked=cc(t.value,e));else if(t.type==="checkbox")Number.isInteger(e)?t.value=e:!Number.isInteger(e)&&!Array.isArray(e)&&typeof e!="boolean"&&![null,void 0].includes(e)?t.value=String(e):Array.isArray(e)?t.checked=e.some(n=>cc(n,t.value)):t.checked=!!e;else if(t.tagName==="SELECT")sS(t,e);else{if(t.value===e)return;t.value=e}}function eS(t,e){t._x_undoAddedClasses&&t._x_undoAddedClasses(),t._x_undoAddedClasses=Ml(t,e)}function tS(t,e){t._x_undoAddedStyles&&t._x_undoAddedStyles(),t._x_undoAddedStyles=Xi(t,e)}function nS(t,e,n){Zf(t,e,n),iS(t,e,n)}function Zf(t,e,n){[null,void 0,!1].includes(n)&&lS(e)?t.removeAttribute(e):(ed(e)&&(n=e),rS(t,e,n))}function rS(t,e,n){t.getAttribute(e)!=n&&t.setAttribute(e,n)}function iS(t,e,n){t[e]!==n&&(t[e]=n)}function sS(t,e){const n=[].concat(e).map(r=>r+"");Array.from(t.options).forEach(r=>{r.selected=n.includes(r.value)})}function oS(t){return t.toLowerCase().replace(/-(\w)/g,(e,n)=>n.toUpperCase())}function cc(t,e){return t==e}function ed(t){return["disabled","checked","required","readonly","hidden","open","selected","autofocus","itemscope","multiple","novalidate","allowfullscreen","allowpaymentrequest","formnovalidate","autoplay","controls","loop","muted","playsinline","default","ismap","reversed","async","defer","nomodule"].includes(t)}function lS(t){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(t)}function aS(t,e,n){return t._x_bindings&&t._x_bindings[e]!==void 0?t._x_bindings[e]:td(t,e,n)}function cS(t,e,n,r=!0){if(t._x_bindings&&t._x_bindings[e]!==void 0)return t._x_bindings[e];if(t._x_inlineBindings&&t._x_inlineBindings[e]!==void 0){let i=t._x_inlineBindings[e];return i.extract=r,Rf(()=>jt(t,i.expression))}return td(t,e,n)}function td(t,e,n){let r=t.getAttribute(e);return r===null?typeof n=="function"?n():n:r===""?!0:ed(e)?!![e,"true"].includes(r):r}function nd(t,e){var n;return function(){var r=this,i=arguments,s=function(){n=null,t.apply(r,i)};clearTimeout(n),n=setTimeout(s,e)}}function rd(t,e){let n;return function(){let r=this,i=arguments;n||(t.apply(r,i),n=!0,setTimeout(()=>n=!1,e))}}function uS(t){(Array.isArray(t)?t:[t]).forEach(n=>n(yr))}var Ct={},uc=!1;function fS(t,e){if(uc||(Ct=Cn(Ct),uc=!0),e===void 0)return Ct[t];Ct[t]=e,typeof e=="object"&&e!==null&&e.hasOwnProperty("init")&&typeof e.init=="function"&&Ct[t].init(),Of(Ct[t])}function dS(){return Ct}var id={};function hS(t,e){let n=typeof e!="function"?()=>e:e;t instanceof Element?sd(t,n()):id[t]=n}function pS(t){return Object.entries(id).forEach(([e,n])=>{Object.defineProperty(t,e,{get(){return(...r)=>n(...r)}})}),t}function sd(t,e,n){let r=[];for(;r.length;)r.pop()();let i=Object.entries(e).map(([o,l])=>({name:o,value:l})),s=If(i);i=i.map(o=>s.find(l=>l.name===o.name)?{name:`x-bind:${o.name}`,value:`"${o.value}"`}:o),Sl(t,i,n).map(o=>{r.push(o.runCleanups),o()})}var od={};function mS(t,e){od[t]=e}function gS(t,e){return Object.entries(od).forEach(([n,r])=>{Object.defineProperty(t,n,{get(){return(...i)=>r.bind(e)(...i)},enumerable:!1})}),t}var yS={get reactive(){return Cn},get release(){return hr},get effect(){return Tn},get raw(){return xf},version:"3.12.3",flushAndStopDeferringMutations:C1,dontAutoEvaluateFunctions:Rf,disableEffectScheduling:y1,startObservingMutations:ml,stopObservingMutations:Cf,setReactivityEngine:b1,closestDataStack:wn,skipDuringClone:gr,onlyDuringClone:Y1,addRootSelector:Kf,addInitSelector:qf,addScopeToNode:pr,deferMutations:v1,mapAttributes:xl,evaluateLater:ie,interceptInit:H1,setEvaluator:A1,mergeProxies:mr,extractProp:cS,findClosest:Yi,closestRoot:Ji,destroyTree:Yf,interceptor:Af,transition:Ro,setStyles:Xi,mutateDom:J,directive:V,throttle:rd,debounce:nd,evaluate:jt,initTree:gt,nextTick:El,prefixed:On,prefix:_1,plugin:uS,magic:Ae,store:fS,start:F1,clone:X1,bound:aS,$data:Tf,walk:pt,data:mS,bind:hS},yr=yS;function bS(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?i=>!!n[i.toLowerCase()]:i=>!!n[i]}var SS=Object.freeze({}),ld=Object.assign,xS=Object.prototype.hasOwnProperty,Gi=(t,e)=>xS.call(t,e),Vt=Array.isArray,Qn=t=>ad(t)==="[object Map]",kS=t=>typeof t=="string",vl=t=>typeof t=="symbol",Qi=t=>t!==null&&typeof t=="object",wS=Object.prototype.toString,ad=t=>wS.call(t),cd=t=>ad(t).slice(8,-1),Cl=t=>kS(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ES=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},MS=ES(t=>t.charAt(0).toUpperCase()+t.slice(1)),ud=(t,e)=>t!==e&&(t===t||e===e),Do=new WeakMap,Bn=[],Ie,Wt=Symbol("iterate"),_o=Symbol("Map key iterate");function vS(t){return t&&t._isEffect===!0}function CS(t,e=SS){vS(t)&&(t=t.raw);const n=AS(t,e);return e.lazy||n(),n}function TS(t){t.active&&(fd(t),t.options.onStop&&t.options.onStop(),t.active=!1)}var OS=0;function AS(t,e){const n=function(){if(!n.active)return t();if(!Bn.includes(n)){fd(n);try{return RS(),Bn.push(n),Ie=n,t()}finally{Bn.pop(),dd(),Ie=Bn[Bn.length-1]}}};return n.id=OS++,n.allowRecurse=!!e.allowRecurse,n._isEffect=!0,n.active=!0,n.raw=t,n.deps=[],n.options=e,n}function fd(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}var En=!0,Tl=[];function NS(){Tl.push(En),En=!1}function RS(){Tl.push(En),En=!0}function dd(){const t=Tl.pop();En=t===void 0?!0:t}function Te(t,e,n){if(!En||Ie===void 0)return;let r=Do.get(t);r||Do.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=new Set),i.has(Ie)||(i.add(Ie),Ie.deps.push(i),Ie.options.onTrack&&Ie.options.onTrack({effect:Ie,target:t,type:e,key:n}))}function yt(t,e,n,r,i,s){const o=Do.get(t);if(!o)return;const l=new Set,a=u=>{u&&u.forEach(f=>{(f!==Ie||f.allowRecurse)&&l.add(f)})};if(e==="clear")o.forEach(a);else if(n==="length"&&Vt(t))o.forEach((u,f)=>{(f==="length"||f>=r)&&a(u)});else switch(n!==void 0&&a(o.get(n)),e){case"add":Vt(t)?Cl(n)&&a(o.get("length")):(a(o.get(Wt)),Qn(t)&&a(o.get(_o)));break;case"delete":Vt(t)||(a(o.get(Wt)),Qn(t)&&a(o.get(_o)));break;case"set":Qn(t)&&a(o.get(Wt));break}const c=u=>{u.options.onTrigger&&u.options.onTrigger({effect:u,target:t,key:n,type:e,newValue:r,oldValue:i,oldTarget:s}),u.options.scheduler?u.options.scheduler(u):u()};l.forEach(c)}var DS=bS("__proto__,__v_isRef,__isVue"),hd=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(vl)),_S=Zi(),IS=Zi(!1,!0),PS=Zi(!0),LS=Zi(!0,!0),vi={};["includes","indexOf","lastIndexOf"].forEach(t=>{const e=Array.prototype[t];vi[t]=function(...n){const r=B(this);for(let s=0,o=this.length;s<o;s++)Te(r,"get",s+"");const i=e.apply(r,n);return i===-1||i===!1?e.apply(r,n.map(B)):i}});["push","pop","shift","unshift","splice"].forEach(t=>{const e=Array.prototype[t];vi[t]=function(...n){NS();const r=e.apply(this,n);return dd(),r}});function Zi(t=!1,e=!1){return function(r,i,s){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_raw"&&s===(t?e?KS:Od:e?US:Td).get(r))return r;const o=Vt(r);if(!t&&o&&Gi(vi,i))return Reflect.get(vi,i,s);const l=Reflect.get(r,i,s);return(vl(i)?hd.has(i):DS(i))||(t||Te(r,"get",i),e)?l:Io(l)?!o||!Cl(i)?l.value:l:Qi(l)?t?Ad(l):Rl(l):l}}var BS=pd(),FS=pd(!0);function pd(t=!1){return function(n,r,i,s){let o=n[r];if(!t&&(i=B(i),o=B(o),!Vt(n)&&Io(o)&&!Io(i)))return o.value=i,!0;const l=Vt(n)&&Cl(r)?Number(r)<n.length:Gi(n,r),a=Reflect.set(n,r,i,s);return n===B(s)&&(l?ud(i,o)&&yt(n,"set",r,i,o):yt(n,"add",r,i)),a}}function zS(t,e){const n=Gi(t,e),r=t[e],i=Reflect.deleteProperty(t,e);return i&&n&&yt(t,"delete",e,void 0,r),i}function HS(t,e){const n=Reflect.has(t,e);return(!vl(e)||!hd.has(e))&&Te(t,"has",e),n}function $S(t){return Te(t,"iterate",Vt(t)?"length":Wt),Reflect.ownKeys(t)}var md={get:_S,set:BS,deleteProperty:zS,has:HS,ownKeys:$S},gd={get:PS,set(t,e){return console.warn(`Set operation on key "${String(e)}" failed: target is readonly.`,t),!0},deleteProperty(t,e){return console.warn(`Delete operation on key "${String(e)}" failed: target is readonly.`,t),!0}};ld({},md,{get:IS,set:FS});ld({},gd,{get:LS});var Ol=t=>Qi(t)?Rl(t):t,Al=t=>Qi(t)?Ad(t):t,Nl=t=>t,es=t=>Reflect.getPrototypeOf(t);function ts(t,e,n=!1,r=!1){t=t.__v_raw;const i=B(t),s=B(e);e!==s&&!n&&Te(i,"get",e),!n&&Te(i,"get",s);const{has:o}=es(i),l=r?Nl:n?Al:Ol;if(o.call(i,e))return l(t.get(e));if(o.call(i,s))return l(t.get(s));t!==i&&t.get(e)}function ns(t,e=!1){const n=this.__v_raw,r=B(n),i=B(t);return t!==i&&!e&&Te(r,"has",t),!e&&Te(r,"has",i),t===i?n.has(t):n.has(t)||n.has(i)}function rs(t,e=!1){return t=t.__v_raw,!e&&Te(B(t),"iterate",Wt),Reflect.get(t,"size",t)}function yd(t){t=B(t);const e=B(this);return es(e).has.call(e,t)||(e.add(t),yt(e,"add",t,t)),this}function bd(t,e){e=B(e);const n=B(this),{has:r,get:i}=es(n);let s=r.call(n,t);s?Cd(n,r,t):(t=B(t),s=r.call(n,t));const o=i.call(n,t);return n.set(t,e),s?ud(e,o)&&yt(n,"set",t,e,o):yt(n,"add",t,e),this}function Sd(t){const e=B(this),{has:n,get:r}=es(e);let i=n.call(e,t);i?Cd(e,n,t):(t=B(t),i=n.call(e,t));const s=r?r.call(e,t):void 0,o=e.delete(t);return i&&yt(e,"delete",t,void 0,s),o}function xd(){const t=B(this),e=t.size!==0,n=Qn(t)?new Map(t):new Set(t),r=t.clear();return e&&yt(t,"clear",void 0,void 0,n),r}function is(t,e){return function(r,i){const s=this,o=s.__v_raw,l=B(o),a=e?Nl:t?Al:Ol;return!t&&Te(l,"iterate",Wt),o.forEach((c,u)=>r.call(i,a(c),a(u),s))}}function _r(t,e,n){return function(...r){const i=this.__v_raw,s=B(i),o=Qn(s),l=t==="entries"||t===Symbol.iterator&&o,a=t==="keys"&&o,c=i[t](...r),u=n?Nl:e?Al:Ol;return!e&&Te(s,"iterate",a?_o:Wt),{next(){const{value:f,done:d}=c.next();return d?{value:f,done:d}:{value:l?[u(f[0]),u(f[1])]:u(f),done:d}},[Symbol.iterator](){return this}}}}function ot(t){return function(...e){{const n=e[0]?`on key "${e[0]}" `:"";console.warn(`${MS(t)} operation ${n}failed: target is readonly.`,B(this))}return t==="delete"?!1:this}}var kd={get(t){return ts(this,t)},get size(){return rs(this)},has:ns,add:yd,set:bd,delete:Sd,clear:xd,forEach:is(!1,!1)},wd={get(t){return ts(this,t,!1,!0)},get size(){return rs(this)},has:ns,add:yd,set:bd,delete:Sd,clear:xd,forEach:is(!1,!0)},Ed={get(t){return ts(this,t,!0)},get size(){return rs(this,!0)},has(t){return ns.call(this,t,!0)},add:ot("add"),set:ot("set"),delete:ot("delete"),clear:ot("clear"),forEach:is(!0,!1)},Md={get(t){return ts(this,t,!0,!0)},get size(){return rs(this,!0)},has(t){return ns.call(this,t,!0)},add:ot("add"),set:ot("set"),delete:ot("delete"),clear:ot("clear"),forEach:is(!0,!0)},jS=["keys","values","entries",Symbol.iterator];jS.forEach(t=>{kd[t]=_r(t,!1,!1),Ed[t]=_r(t,!0,!1),wd[t]=_r(t,!1,!0),Md[t]=_r(t,!0,!0)});function vd(t,e){const n=e?t?Md:wd:t?Ed:kd;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Gi(n,i)&&i in r?n:r,i,s)}var VS={get:vd(!1,!1)},WS={get:vd(!0,!1)};function Cd(t,e,n){const r=B(n);if(r!==n&&e.call(t,r)){const i=cd(t);console.warn(`Reactive ${i} contains both the raw and reactive versions of the same object${i==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var Td=new WeakMap,US=new WeakMap,Od=new WeakMap,KS=new WeakMap;function qS(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function JS(t){return t.__v_skip||!Object.isExtensible(t)?0:qS(cd(t))}function Rl(t){return t&&t.__v_isReadonly?t:Nd(t,!1,md,VS,Td)}function Ad(t){return Nd(t,!0,gd,WS,Od)}function Nd(t,e,n,r,i){if(!Qi(t))return console.warn(`value cannot be made reactive: ${String(t)}`),t;if(t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=JS(t);if(o===0)return t;const l=new Proxy(t,o===2?r:n);return i.set(t,l),l}function B(t){return t&&B(t.__v_raw)||t}function Io(t){return!!(t&&t.__v_isRef===!0)}Ae("nextTick",()=>El);Ae("dispatch",t=>Gn.bind(Gn,t));Ae("watch",(t,{evaluateLater:e,effect:n})=>(r,i)=>{let s=e(r),o=!0,l,a=n(()=>s(c=>{JSON.stringify(c),o?l=c:queueMicrotask(()=>{i(c,l),l=c}),o=!1}));t._x_effects.delete(a)});Ae("store",dS);Ae("data",t=>Tf(t));Ae("root",t=>Ji(t));Ae("refs",t=>(t._x_refs_proxy||(t._x_refs_proxy=mr(YS(t))),t._x_refs_proxy));function YS(t){let e=[],n=t;for(;n;)n._x_refs&&e.push(n._x_refs),n=n.parentNode;return e}var Hs={};function Rd(t){return Hs[t]||(Hs[t]=0),++Hs[t]}function XS(t,e){return Yi(t,n=>{if(n._x_ids&&n._x_ids[e])return!0})}function GS(t,e){t._x_ids||(t._x_ids={}),t._x_ids[e]||(t._x_ids[e]=Rd(e))}Ae("id",t=>(e,n=null)=>{let r=XS(t,e),i=r?r._x_ids[e]:Rd(e);return n?`${e}-${i}-${n}`:`${e}-${i}`});Ae("el",t=>t);Dd("Focus","focus","focus");Dd("Persist","persist","persist");function Dd(t,e,n){Ae(e,r=>mt(`You can't use [$${directiveName}] without first installing the "${t}" plugin here: https://alpinejs.dev/plugins/${n}`,r))}function QS({get:t,set:e},{get:n,set:r}){let i=!0,s,o,l=Tn(()=>{let a,c;i?(a=t(),r(a),c=n(),i=!1):(a=t(),c=n(),o=JSON.stringify(a),JSON.stringify(c),o!==s?(c=n(),r(a),c=a):(e(c),a=c)),s=JSON.stringify(a),JSON.stringify(c)});return()=>{hr(l)}}V("modelable",(t,{expression:e},{effect:n,evaluateLater:r,cleanup:i})=>{let s=r(e),o=()=>{let u;return s(f=>u=f),u},l=r(`${e} = __placeholder`),a=u=>l(()=>{},{scope:{__placeholder:u}}),c=o();a(c),queueMicrotask(()=>{if(!t._x_model)return;t._x_removeModelListeners.default();let u=t._x_model.get,f=t._x_model.set,d=QS({get(){return u()},set(h){f(h)}},{get(){return o()},set(h){a(h)}});i(d)})});var ZS=document.createElement("div");V("teleport",(t,{modifiers:e,expression:n},{cleanup:r})=>{t.tagName.toLowerCase()!=="template"&&mt("x-teleport can only be used on a <template> tag",t);let i=gr(()=>document.querySelector(n),()=>ZS)();i||mt(`Cannot find x-teleport element for selector: "${n}"`);let s=t.content.cloneNode(!0).firstElementChild;t._x_teleport=s,s._x_teleportBack=t,t._x_forwardEvents&&t._x_forwardEvents.forEach(o=>{s.addEventListener(o,l=>{l.stopPropagation(),t.dispatchEvent(new l.constructor(l.type,l))})}),pr(s,{},t),J(()=>{e.includes("prepend")?i.parentNode.insertBefore(s,i):e.includes("append")?i.parentNode.insertBefore(s,i.nextSibling):i.appendChild(s),gt(s),s._x_ignore=!0}),r(()=>s.remove())});var _d=()=>{};_d.inline=(t,{modifiers:e},{cleanup:n})=>{e.includes("self")?t._x_ignoreSelf=!0:t._x_ignore=!0,n(()=>{e.includes("self")?delete t._x_ignoreSelf:delete t._x_ignore})};V("ignore",_d);V("effect",(t,{expression:e},{effect:n})=>n(ie(t,e)));function Po(t,e,n,r){let i=t,s=a=>r(a),o={},l=(a,c)=>u=>c(a,u);if(n.includes("dot")&&(e=ex(e)),n.includes("camel")&&(e=tx(e)),n.includes("passive")&&(o.passive=!0),n.includes("capture")&&(o.capture=!0),n.includes("window")&&(i=window),n.includes("document")&&(i=document),n.includes("debounce")){let a=n[n.indexOf("debounce")+1]||"invalid-wait",c=Ci(a.split("ms")[0])?Number(a.split("ms")[0]):250;s=nd(s,c)}if(n.includes("throttle")){let a=n[n.indexOf("throttle")+1]||"invalid-wait",c=Ci(a.split("ms")[0])?Number(a.split("ms")[0]):250;s=rd(s,c)}return n.includes("prevent")&&(s=l(s,(a,c)=>{c.preventDefault(),a(c)})),n.includes("stop")&&(s=l(s,(a,c)=>{c.stopPropagation(),a(c)})),n.includes("self")&&(s=l(s,(a,c)=>{c.target===t&&a(c)})),(n.includes("away")||n.includes("outside"))&&(i=document,s=l(s,(a,c)=>{t.contains(c.target)||c.target.isConnected!==!1&&(t.offsetWidth<1&&t.offsetHeight<1||t._x_isShown!==!1&&a(c))})),n.includes("once")&&(s=l(s,(a,c)=>{a(c),i.removeEventListener(e,s,o)})),s=l(s,(a,c)=>{rx(e)&&ix(c,n)||a(c)}),i.addEventListener(e,s,o),()=>{i.removeEventListener(e,s,o)}}function ex(t){return t.replace(/-/g,".")}function tx(t){return t.toLowerCase().replace(/-(\w)/g,(e,n)=>n.toUpperCase())}function Ci(t){return!Array.isArray(t)&&!isNaN(t)}function nx(t){return[" ","_"].includes(t)?t:t.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function rx(t){return["keydown","keyup"].includes(t)}function ix(t,e){let n=e.filter(s=>!["window","document","prevent","stop","once","capture"].includes(s));if(n.includes("debounce")){let s=n.indexOf("debounce");n.splice(s,Ci((n[s+1]||"invalid-wait").split("ms")[0])?2:1)}if(n.includes("throttle")){let s=n.indexOf("throttle");n.splice(s,Ci((n[s+1]||"invalid-wait").split("ms")[0])?2:1)}if(n.length===0||n.length===1&&fc(t.key).includes(n[0]))return!1;const i=["ctrl","shift","alt","meta","cmd","super"].filter(s=>n.includes(s));return n=n.filter(s=>!i.includes(s)),!(i.length>0&&i.filter(o=>((o==="cmd"||o==="super")&&(o="meta"),t[`${o}Key`])).length===i.length&&fc(t.key).includes(n[0]))}function fc(t){if(!t)return[];t=nx(t);let e={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",equal:"=",minus:"-",underscore:"_"};return e[t]=t,Object.keys(e).map(n=>{if(e[n]===t)return n}).filter(n=>n)}V("model",(t,{modifiers:e,expression:n},{effect:r,cleanup:i})=>{let s=t;e.includes("parent")&&(s=t.parentNode);let o=ie(s,n),l;typeof n=="string"?l=ie(s,`${n} = __placeholder`):typeof n=="function"&&typeof n()=="string"?l=ie(s,`${n()} = __placeholder`):l=()=>{};let a=()=>{let d;return o(h=>d=h),dc(d)?d.get():d},c=d=>{let h;o(p=>h=p),dc(h)?h.set(d):l(()=>{},{scope:{__placeholder:d}})};typeof n=="string"&&t.type==="radio"&&J(()=>{t.hasAttribute("name")||t.setAttribute("name",n)});var u=t.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(t.type)||e.includes("lazy")?"change":"input";let f=cr?()=>{}:Po(t,u,e,d=>{c(sx(t,e,d,a()))});if(e.includes("fill")&&[null,""].includes(a())&&t.dispatchEvent(new Event(u,{})),t._x_removeModelListeners||(t._x_removeModelListeners={}),t._x_removeModelListeners.default=f,i(()=>t._x_removeModelListeners.default()),t.form){let d=Po(t.form,"reset",[],h=>{El(()=>t._x_model&&t._x_model.set(t.value))});i(()=>d())}t._x_model={get(){return a()},set(d){c(d)}},t._x_forceModelUpdate=d=>{d=d===void 0?a():d,d===void 0&&typeof n=="string"&&n.match(/\./)&&(d=""),window.fromModel=!0,J(()=>Qf(t,"value",d)),delete window.fromModel},r(()=>{let d=a();e.includes("unintrusive")&&document.activeElement.isSameNode(t)||t._x_forceModelUpdate(d)})});function sx(t,e,n,r){return J(()=>{if(n instanceof CustomEvent&&n.detail!==void 0)return n.detail??n.target.value;if(t.type==="checkbox")if(Array.isArray(r)){let i=e.includes("number")?$s(n.target.value):n.target.value;return n.target.checked?r.concat([i]):r.filter(s=>!ox(s,i))}else return n.target.checked;else{if(t.tagName.toLowerCase()==="select"&&t.multiple)return e.includes("number")?Array.from(n.target.selectedOptions).map(i=>{let s=i.value||i.text;return $s(s)}):Array.from(n.target.selectedOptions).map(i=>i.value||i.text);{let i=n.target.value;return e.includes("number")?$s(i):e.includes("trim")?i.trim():i}}})}function $s(t){let e=t?parseFloat(t):null;return lx(e)?e:t}function ox(t,e){return t==e}function lx(t){return!Array.isArray(t)&&!isNaN(t)}function dc(t){return t!==null&&typeof t=="object"&&typeof t.get=="function"&&typeof t.set=="function"}V("cloak",t=>queueMicrotask(()=>J(()=>t.removeAttribute(On("cloak")))));qf(()=>`[${On("init")}]`);V("init",gr((t,{expression:e},{evaluate:n})=>typeof e=="string"?!!e.trim()&&n(e,{},!1):n(e,{},!1)));V("text",(t,{expression:e},{effect:n,evaluateLater:r})=>{let i=r(e);n(()=>{i(s=>{J(()=>{t.textContent=s})})})});V("html",(t,{expression:e},{effect:n,evaluateLater:r})=>{let i=r(e);n(()=>{i(s=>{J(()=>{t.innerHTML=s,t._x_ignoreSelf=!0,gt(t),delete t._x_ignoreSelf})})})});xl(Bf(":",Ff(On("bind:"))));var Id=(t,{value:e,modifiers:n,expression:r,original:i},{effect:s})=>{if(!e){let l={};pS(l),ie(t,r)(c=>{sd(t,c,i)},{scope:l});return}if(e==="key")return ax(t,r);if(t._x_inlineBindings&&t._x_inlineBindings[e]&&t._x_inlineBindings[e].extract)return;let o=ie(t,r);s(()=>o(l=>{l===void 0&&typeof r=="string"&&r.match(/\./)&&(l=""),J(()=>Qf(t,e,l,n))}))};Id.inline=(t,{value:e,modifiers:n,expression:r})=>{e&&(t._x_inlineBindings||(t._x_inlineBindings={}),t._x_inlineBindings[e]={expression:r,extract:!1})};V("bind",Id);function ax(t,e){t._x_keyExpression=e}Kf(()=>`[${On("data")}]`);V("data",gr((t,{expression:e},{cleanup:n})=>{e=e===""?"{}":e;let r={};Mo(r,t);let i={};gS(i,r);let s=jt(t,e,{scope:i});(s===void 0||s===!0)&&(s={}),Mo(s,t);let o=Cn(s);Of(o);let l=pr(t,o);o.init&&jt(t,o.init),n(()=>{o.destroy&&jt(t,o.destroy),l()})}));V("show",(t,{modifiers:e,expression:n},{effect:r})=>{let i=ie(t,n);t._x_doHide||(t._x_doHide=()=>{J(()=>{t.style.setProperty("display","none",e.includes("important")?"important":void 0)})}),t._x_doShow||(t._x_doShow=()=>{J(()=>{t.style.length===1&&t.style.display==="none"?t.removeAttribute("style"):t.style.removeProperty("display")})});let s=()=>{t._x_doHide(),t._x_isShown=!1},o=()=>{t._x_doShow(),t._x_isShown=!0},l=()=>setTimeout(o),a=No(f=>f?o():s(),f=>{typeof t._x_toggleAndCascadeWithTransitions=="function"?t._x_toggleAndCascadeWithTransitions(t,f,o,s):f?l():s()}),c,u=!0;r(()=>i(f=>{!u&&f===c||(e.includes("immediate")&&(f?l():s()),a(f),c=f,u=!1)}))});V("for",(t,{expression:e},{effect:n,cleanup:r})=>{let i=ux(e),s=ie(t,i.items),o=ie(t,t._x_keyExpression||"index");t._x_prevKeys=[],t._x_lookup={},n(()=>cx(t,i,s,o)),r(()=>{Object.values(t._x_lookup).forEach(l=>l.remove()),delete t._x_prevKeys,delete t._x_lookup})});function cx(t,e,n,r){let i=o=>typeof o=="object"&&!Array.isArray(o),s=t;n(o=>{fx(o)&&o>=0&&(o=Array.from(Array(o).keys(),g=>g+1)),o===void 0&&(o=[]);let l=t._x_lookup,a=t._x_prevKeys,c=[],u=[];if(i(o))o=Object.entries(o).map(([g,y])=>{let b=hc(e,y,g,o);r(w=>u.push(w),{scope:{index:g,...b}}),c.push(b)});else for(let g=0;g<o.length;g++){let y=hc(e,o[g],g,o);r(b=>u.push(b),{scope:{index:g,...y}}),c.push(y)}let f=[],d=[],h=[],p=[];for(let g=0;g<a.length;g++){let y=a[g];u.indexOf(y)===-1&&h.push(y)}a=a.filter(g=>!h.includes(g));let m="template";for(let g=0;g<u.length;g++){let y=u[g],b=a.indexOf(y);if(b===-1)a.splice(g,0,y),f.push([m,g]);else if(b!==g){let w=a.splice(g,1)[0],A=a.splice(b-1,1)[0];a.splice(g,0,A),a.splice(b,0,w),d.push([w,A])}else p.push(y);m=y}for(let g=0;g<h.length;g++){let y=h[g];l[y]._x_effects&&l[y]._x_effects.forEach(Sf),l[y].remove(),l[y]=null,delete l[y]}for(let g=0;g<d.length;g++){let[y,b]=d[g],w=l[y],A=l[b],D=document.createElement("div");J(()=>{A||mt('x-for ":key" is undefined or invalid',s),A.after(D),w.after(A),A._x_currentIfEl&&A.after(A._x_currentIfEl),D.before(w),w._x_currentIfEl&&w.after(w._x_currentIfEl),D.remove()}),A._x_refreshXForScope(c[u.indexOf(b)])}for(let g=0;g<f.length;g++){let[y,b]=f[g],w=y==="template"?s:l[y];w._x_currentIfEl&&(w=w._x_currentIfEl);let A=c[b],D=u[b],C=document.importNode(s.content,!0).firstElementChild,L=Cn(A);pr(C,L,s),C._x_refreshXForScope=O=>{Object.entries(O).forEach(([me,Je])=>{L[me]=Je})},J(()=>{w.after(C),gt(C)}),typeof D=="object"&&mt("x-for key cannot be an object, it must be a string or an integer",s),l[D]=C}for(let g=0;g<p.length;g++)l[p[g]]._x_refreshXForScope(c[u.indexOf(p[g])]);s._x_prevKeys=u})}function ux(t){let e=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,n=/^\s*\(|\)\s*$/g,r=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,i=t.match(r);if(!i)return;let s={};s.items=i[2].trim();let o=i[1].replace(n,"").trim(),l=o.match(e);return l?(s.item=o.replace(e,"").trim(),s.index=l[1].trim(),l[2]&&(s.collection=l[2].trim())):s.item=o,s}function hc(t,e,n,r){let i={};return/^\[.*\]$/.test(t.item)&&Array.isArray(e)?t.item.replace("[","").replace("]","").split(",").map(o=>o.trim()).forEach((o,l)=>{i[o]=e[l]}):/^\{.*\}$/.test(t.item)&&!Array.isArray(e)&&typeof e=="object"?t.item.replace("{","").replace("}","").split(",").map(o=>o.trim()).forEach(o=>{i[o]=e[o]}):i[t.item]=e,t.index&&(i[t.index]=n),t.collection&&(i[t.collection]=r),i}function fx(t){return!Array.isArray(t)&&!isNaN(t)}function Pd(){}Pd.inline=(t,{expression:e},{cleanup:n})=>{let r=Ji(t);r._x_refs||(r._x_refs={}),r._x_refs[e]=t,n(()=>delete r._x_refs[e])};V("ref",Pd);V("if",(t,{expression:e},{effect:n,cleanup:r})=>{let i=ie(t,e),s=()=>{if(t._x_currentIfEl)return t._x_currentIfEl;let l=t.content.cloneNode(!0).firstElementChild;return pr(l,{},t),J(()=>{t.after(l),gt(l)}),t._x_currentIfEl=l,t._x_undoIf=()=>{pt(l,a=>{a._x_effects&&a._x_effects.forEach(Sf)}),l.remove(),delete t._x_currentIfEl},l},o=()=>{t._x_undoIf&&(t._x_undoIf(),delete t._x_undoIf)};n(()=>i(l=>{l?s():o()})),r(()=>t._x_undoIf&&t._x_undoIf())});V("id",(t,{expression:e},{evaluate:n})=>{n(e).forEach(i=>GS(t,i))});xl(Bf("@",Ff(On("on:"))));V("on",gr((t,{value:e,modifiers:n,expression:r},{cleanup:i})=>{let s=r?ie(t,r):()=>{};t.tagName.toLowerCase()==="template"&&(t._x_forwardEvents||(t._x_forwardEvents=[]),t._x_forwardEvents.includes(e)||t._x_forwardEvents.push(e));let o=Po(t,e,n,l=>{s(()=>{},{scope:{$event:l},params:[l]})});i(()=>o())}));ss("Collapse","collapse","collapse");ss("Intersect","intersect","intersect");ss("Focus","trap","focus");ss("Mask","mask","mask");function ss(t,e,n){V(e,r=>mt(`You can't use [x-${e}] without first installing the "${t}" plugin here: https://alpinejs.dev/plugins/${n}`,r))}yr.setEvaluator(_f);yr.setReactivityEngine({reactive:Rl,effect:CS,release:TS,raw:B});var dx=yr,lt=dx;function hx(t){t.directive("collapse",e),e.inline=(n,{modifiers:r})=>{r.includes("min")&&(n._x_doShow=()=>{},n._x_doHide=()=>{})};function e(n,{modifiers:r}){let i=pc(r,"duration",250)/1e3,s=pc(r,"min",0),o=!r.includes("min");n._x_isShown||(n.style.height=`${s}px`),!n._x_isShown&&o&&(n.hidden=!0),n._x_isShown||(n.style.overflow="hidden");let l=(c,u)=>{let f=t.setStyles(c,u);return u.height?()=>{}:f},a={transitionProperty:"height",transitionDuration:`${i}s`,transitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)"};n._x_transition={in(c=()=>{},u=()=>{}){o&&(n.hidden=!1),o&&(n.style.display=null);let f=n.getBoundingClientRect().height;n.style.height="auto";let d=n.getBoundingClientRect().height;f===d&&(f=s),t.transition(n,t.setStyles,{during:a,start:{height:f+"px"},end:{height:d+"px"}},()=>n._x_isShown=!0,()=>{n.getBoundingClientRect().height==d&&(n.style.overflow=null)})},out(c=()=>{},u=()=>{}){let f=n.getBoundingClientRect().height;t.transition(n,l,{during:a,start:{height:f+"px"},end:{height:s+"px"}},()=>n.style.overflow="hidden",()=>{n._x_isShown=!1,n.style.height==`${s}px`&&o&&(n.style.display="none",n.hidden=!0)})}}}}function pc(t,e,n){if(t.indexOf(e)===-1)return n;const r=t[t.indexOf(e)+1];if(!r)return n;if(e==="duration"){let i=r.match(/([0-9]+)ms/);if(i)return i[1]}if(e==="min"){let i=r.match(/([0-9]+)px/);if(i)return i[1]}return r}var px=hx;/*!
 * perfect-scrollbar v1.5.3
 * Copyright 2021 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function ze(t){return getComputedStyle(t)}function ue(t,e){for(var n in e){var r=e[n];typeof r=="number"&&(r=r+"px"),t.style[n]=r}return t}function Ir(t){var e=document.createElement("div");return e.className=t,e}var mc=typeof Element<"u"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function at(t,e){if(!mc)throw new Error("No element matching method supported");return mc.call(t,e)}function an(t){t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)}function gc(t,e){return Array.prototype.filter.call(t.children,function(n){return at(n,e)})}var $={main:"ps",rtl:"ps__rtl",element:{thumb:function(t){return"ps__thumb-"+t},rail:function(t){return"ps__rail-"+t},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(t){return"ps--active-"+t},scrolling:function(t){return"ps--scrolling-"+t}}},Ld={x:null,y:null};function Bd(t,e){var n=t.element.classList,r=$.state.scrolling(e);n.contains(r)?clearTimeout(Ld[e]):n.add(r)}function Fd(t,e){Ld[e]=setTimeout(function(){return t.isAlive&&t.element.classList.remove($.state.scrolling(e))},t.settings.scrollingThreshold)}function mx(t,e){Bd(t,e),Fd(t,e)}var br=function(e){this.element=e,this.handlers={}},zd={isEmpty:{configurable:!0}};br.prototype.bind=function(e,n){typeof this.handlers[e]>"u"&&(this.handlers[e]=[]),this.handlers[e].push(n),this.element.addEventListener(e,n,!1)};br.prototype.unbind=function(e,n){var r=this;this.handlers[e]=this.handlers[e].filter(function(i){return n&&i!==n?!0:(r.element.removeEventListener(e,i,!1),!1)})};br.prototype.unbindAll=function(){for(var e in this.handlers)this.unbind(e)};zd.isEmpty.get=function(){var t=this;return Object.keys(this.handlers).every(function(e){return t.handlers[e].length===0})};Object.defineProperties(br.prototype,zd);var An=function(){this.eventElements=[]};An.prototype.eventElement=function(e){var n=this.eventElements.filter(function(r){return r.element===e})[0];return n||(n=new br(e),this.eventElements.push(n)),n};An.prototype.bind=function(e,n,r){this.eventElement(e).bind(n,r)};An.prototype.unbind=function(e,n,r){var i=this.eventElement(e);i.unbind(n,r),i.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(i),1)};An.prototype.unbindAll=function(){this.eventElements.forEach(function(e){return e.unbindAll()}),this.eventElements=[]};An.prototype.once=function(e,n,r){var i=this.eventElement(e),s=function(o){i.unbind(n,s),r(o)};i.bind(n,s)};function Pr(t){if(typeof window.CustomEvent=="function")return new CustomEvent(t);var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,void 0),e}function Ti(t,e,n,r,i){r===void 0&&(r=!0),i===void 0&&(i=!1);var s;if(e==="top")s=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(e==="left")s=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");gx(t,n,s,r,i)}function gx(t,e,n,r,i){var s=n[0],o=n[1],l=n[2],a=n[3],c=n[4],u=n[5];r===void 0&&(r=!0),i===void 0&&(i=!1);var f=t.element;t.reach[a]=null,f[l]<1&&(t.reach[a]="start"),f[l]>t[s]-t[o]-1&&(t.reach[a]="end"),e&&(f.dispatchEvent(Pr("ps-scroll-"+a)),e<0?f.dispatchEvent(Pr("ps-scroll-"+c)):e>0&&f.dispatchEvent(Pr("ps-scroll-"+u)),r&&mx(t,a)),t.reach[a]&&(e||i)&&f.dispatchEvent(Pr("ps-"+a+"-reach-"+t.reach[a]))}function z(t){return parseInt(t,10)||0}function yx(t){return at(t,"input,[contenteditable]")||at(t,"select,[contenteditable]")||at(t,"textarea,[contenteditable]")||at(t,"button,[contenteditable]")}function bx(t){var e=ze(t);return z(e.width)+z(e.paddingLeft)+z(e.paddingRight)+z(e.borderLeftWidth)+z(e.borderRightWidth)}var tn={isWebKit:typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator<"u"&&navigator.msMaxTouchPoints,isChrome:typeof navigator<"u"&&/Chrome/i.test(navigator&&navigator.userAgent)};function qe(t){var e=t.element,n=Math.floor(e.scrollTop),r=e.getBoundingClientRect();t.containerWidth=Math.round(r.width),t.containerHeight=Math.round(r.height),t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight,e.contains(t.scrollbarXRail)||(gc(e,$.element.rail("x")).forEach(function(i){return an(i)}),e.appendChild(t.scrollbarXRail)),e.contains(t.scrollbarYRail)||(gc(e,$.element.rail("y")).forEach(function(i){return an(i)}),e.appendChild(t.scrollbarYRail)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=yc(t,z(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=z((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=yc(t,z(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=z(n*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),Sx(e,t),t.scrollbarXActive?e.classList.add($.state.active("x")):(e.classList.remove($.state.active("x")),t.scrollbarXWidth=0,t.scrollbarXLeft=0,e.scrollLeft=t.isRtl===!0?t.contentWidth:0),t.scrollbarYActive?e.classList.add($.state.active("y")):(e.classList.remove($.state.active("y")),t.scrollbarYHeight=0,t.scrollbarYTop=0,e.scrollTop=0)}function yc(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function Sx(t,e){var n={width:e.railXWidth},r=Math.floor(t.scrollTop);e.isRtl?n.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:n.left=t.scrollLeft,e.isScrollbarXUsingBottom?n.bottom=e.scrollbarXBottom-r:n.top=e.scrollbarXTop+r,ue(e.scrollbarXRail,n);var i={top:r,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?i.right=e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth-9:i.right=e.scrollbarYRight-t.scrollLeft:e.isRtl?i.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth*2-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:i.left=e.scrollbarYLeft+t.scrollLeft,ue(e.scrollbarYRail,i),ue(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),ue(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}function xx(t){t.element,t.event.bind(t.scrollbarY,"mousedown",function(e){return e.stopPropagation()}),t.event.bind(t.scrollbarYRail,"mousedown",function(e){var n=e.pageY-window.pageYOffset-t.scrollbarYRail.getBoundingClientRect().top,r=n>t.scrollbarYTop?1:-1;t.element.scrollTop+=r*t.containerHeight,qe(t),e.stopPropagation()}),t.event.bind(t.scrollbarX,"mousedown",function(e){return e.stopPropagation()}),t.event.bind(t.scrollbarXRail,"mousedown",function(e){var n=e.pageX-window.pageXOffset-t.scrollbarXRail.getBoundingClientRect().left,r=n>t.scrollbarXLeft?1:-1;t.element.scrollLeft+=r*t.containerWidth,qe(t),e.stopPropagation()})}function kx(t){bc(t,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),bc(t,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])}function bc(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],l=e[5],a=e[6],c=e[7],u=e[8],f=t.element,d=null,h=null,p=null;function m(b){b.touches&&b.touches[0]&&(b[i]=b.touches[0].pageY),f[a]=d+p*(b[i]-h),Bd(t,c),qe(t),b.stopPropagation(),b.type.startsWith("touch")&&b.changedTouches.length>1&&b.preventDefault()}function g(){Fd(t,c),t[u].classList.remove($.state.clicking),t.event.unbind(t.ownerDocument,"mousemove",m)}function y(b,w){d=f[a],w&&b.touches&&(b[i]=b.touches[0].pageY),h=b[i],p=(t[r]-t[n])/(t[s]-t[l]),w?t.event.bind(t.ownerDocument,"touchmove",m):(t.event.bind(t.ownerDocument,"mousemove",m),t.event.once(t.ownerDocument,"mouseup",g),b.preventDefault()),t[u].classList.add($.state.clicking),b.stopPropagation()}t.event.bind(t[o],"mousedown",function(b){y(b)}),t.event.bind(t[o],"touchstart",function(b){y(b,!0)})}function wx(t){var e=t.element,n=function(){return at(e,":hover")},r=function(){return at(t.scrollbarX,":focus")||at(t.scrollbarY,":focus")};function i(s,o){var l=Math.floor(e.scrollTop);if(s===0){if(!t.scrollbarYActive)return!1;if(l===0&&o>0||l>=t.contentHeight-t.containerHeight&&o<0)return!t.settings.wheelPropagation}var a=e.scrollLeft;if(o===0){if(!t.scrollbarXActive)return!1;if(a===0&&s<0||a>=t.contentWidth-t.containerWidth&&s>0)return!t.settings.wheelPropagation}return!0}t.event.bind(t.ownerDocument,"keydown",function(s){if(!(s.isDefaultPrevented&&s.isDefaultPrevented()||s.defaultPrevented)&&!(!n()&&!r())){var o=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(o){if(o.tagName==="IFRAME")o=o.contentDocument.activeElement;else for(;o.shadowRoot;)o=o.shadowRoot.activeElement;if(yx(o))return}var l=0,a=0;switch(s.which){case 37:s.metaKey?l=-t.contentWidth:s.altKey?l=-t.containerWidth:l=-30;break;case 38:s.metaKey?a=t.contentHeight:s.altKey?a=t.containerHeight:a=30;break;case 39:s.metaKey?l=t.contentWidth:s.altKey?l=t.containerWidth:l=30;break;case 40:s.metaKey?a=-t.contentHeight:s.altKey?a=-t.containerHeight:a=-30;break;case 32:s.shiftKey?a=t.containerHeight:a=-t.containerHeight;break;case 33:a=t.containerHeight;break;case 34:a=-t.containerHeight;break;case 36:a=t.contentHeight;break;case 35:a=-t.contentHeight;break;default:return}t.settings.suppressScrollX&&l!==0||t.settings.suppressScrollY&&a!==0||(e.scrollTop-=a,e.scrollLeft+=l,qe(t),i(l,a)&&s.preventDefault())}})}function Ex(t){var e=t.element;function n(o,l){var a=Math.floor(e.scrollTop),c=e.scrollTop===0,u=a+e.offsetHeight===e.scrollHeight,f=e.scrollLeft===0,d=e.scrollLeft+e.offsetWidth===e.scrollWidth,h;return Math.abs(l)>Math.abs(o)?h=c||u:h=f||d,h?!t.settings.wheelPropagation:!0}function r(o){var l=o.deltaX,a=-1*o.deltaY;return(typeof l>"u"||typeof a>"u")&&(l=-1*o.wheelDeltaX/6,a=o.wheelDeltaY/6),o.deltaMode&&o.deltaMode===1&&(l*=10,a*=10),l!==l&&a!==a&&(l=0,a=o.wheelDelta),o.shiftKey?[-a,-l]:[l,a]}function i(o,l,a){if(!tn.isWebKit&&e.querySelector("select:focus"))return!0;if(!e.contains(o))return!1;for(var c=o;c&&c!==e;){if(c.classList.contains($.element.consuming))return!0;var u=ze(c);if(a&&u.overflowY.match(/(scroll|auto)/)){var f=c.scrollHeight-c.clientHeight;if(f>0&&(c.scrollTop>0&&a<0||c.scrollTop<f&&a>0))return!0}if(l&&u.overflowX.match(/(scroll|auto)/)){var d=c.scrollWidth-c.clientWidth;if(d>0&&(c.scrollLeft>0&&l<0||c.scrollLeft<d&&l>0))return!0}c=c.parentNode}return!1}function s(o){var l=r(o),a=l[0],c=l[1];if(!i(o.target,a,c)){var u=!1;t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(c?e.scrollTop-=c*t.settings.wheelSpeed:e.scrollTop+=a*t.settings.wheelSpeed,u=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(a?e.scrollLeft+=a*t.settings.wheelSpeed:e.scrollLeft-=c*t.settings.wheelSpeed,u=!0):(e.scrollTop-=c*t.settings.wheelSpeed,e.scrollLeft+=a*t.settings.wheelSpeed),qe(t),u=u||n(a,c),u&&!o.ctrlKey&&(o.stopPropagation(),o.preventDefault())}}typeof window.onwheel<"u"?t.event.bind(e,"wheel",s):typeof window.onmousewheel<"u"&&t.event.bind(e,"mousewheel",s)}function Mx(t){if(!tn.supportsTouch&&!tn.supportsIePointer)return;var e=t.element;function n(p,m){var g=Math.floor(e.scrollTop),y=e.scrollLeft,b=Math.abs(p),w=Math.abs(m);if(w>b){if(m<0&&g===t.contentHeight-t.containerHeight||m>0&&g===0)return window.scrollY===0&&m>0&&tn.isChrome}else if(b>w&&(p<0&&y===t.contentWidth-t.containerWidth||p>0&&y===0))return!0;return!0}function r(p,m){e.scrollTop-=m,e.scrollLeft-=p,qe(t)}var i={},s=0,o={},l=null;function a(p){return p.targetTouches?p.targetTouches[0]:p}function c(p){return p.pointerType&&p.pointerType==="pen"&&p.buttons===0?!1:!!(p.targetTouches&&p.targetTouches.length===1||p.pointerType&&p.pointerType!=="mouse"&&p.pointerType!==p.MSPOINTER_TYPE_MOUSE)}function u(p){if(c(p)){var m=a(p);i.pageX=m.pageX,i.pageY=m.pageY,s=new Date().getTime(),l!==null&&clearInterval(l)}}function f(p,m,g){if(!e.contains(p))return!1;for(var y=p;y&&y!==e;){if(y.classList.contains($.element.consuming))return!0;var b=ze(y);if(g&&b.overflowY.match(/(scroll|auto)/)){var w=y.scrollHeight-y.clientHeight;if(w>0&&(y.scrollTop>0&&g<0||y.scrollTop<w&&g>0))return!0}if(m&&b.overflowX.match(/(scroll|auto)/)){var A=y.scrollWidth-y.clientWidth;if(A>0&&(y.scrollLeft>0&&m<0||y.scrollLeft<A&&m>0))return!0}y=y.parentNode}return!1}function d(p){if(c(p)){var m=a(p),g={pageX:m.pageX,pageY:m.pageY},y=g.pageX-i.pageX,b=g.pageY-i.pageY;if(f(p.target,y,b))return;r(y,b),i=g;var w=new Date().getTime(),A=w-s;A>0&&(o.x=y/A,o.y=b/A,s=w),n(y,b)&&p.preventDefault()}}function h(){t.settings.swipeEasing&&(clearInterval(l),l=setInterval(function(){if(t.isInitialized){clearInterval(l);return}if(!o.x&&!o.y){clearInterval(l);return}if(Math.abs(o.x)<.01&&Math.abs(o.y)<.01){clearInterval(l);return}if(!t.element){clearInterval(l);return}r(o.x*30,o.y*30),o.x*=.8,o.y*=.8},10))}tn.supportsTouch?(t.event.bind(e,"touchstart",u),t.event.bind(e,"touchmove",d),t.event.bind(e,"touchend",h)):tn.supportsIePointer&&(window.PointerEvent?(t.event.bind(e,"pointerdown",u),t.event.bind(e,"pointermove",d),t.event.bind(e,"pointerup",h)):window.MSPointerEvent&&(t.event.bind(e,"MSPointerDown",u),t.event.bind(e,"MSPointerMove",d),t.event.bind(e,"MSPointerUp",h)))}var vx=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},Cx={"click-rail":xx,"drag-thumb":kx,keyboard:wx,wheel:Ex,touch:Mx},Sr=function(e,n){var r=this;if(n===void 0&&(n={}),typeof e=="string"&&(e=document.querySelector(e)),!e||!e.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=e,e.classList.add($.main),this.settings=vx();for(var i in n)this.settings[i]=n[i];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var s=function(){return e.classList.add($.state.focus)},o=function(){return e.classList.remove($.state.focus)};this.isRtl=ze(e).direction==="rtl",this.isRtl===!0&&e.classList.add($.rtl),this.isNegativeScroll=function(){var c=e.scrollLeft,u=null;return e.scrollLeft=-1,u=e.scrollLeft<0,e.scrollLeft=c,u}(),this.negativeScrollAdjustment=this.isNegativeScroll?e.scrollWidth-e.clientWidth:0,this.event=new An,this.ownerDocument=e.ownerDocument||document,this.scrollbarXRail=Ir($.element.rail("x")),e.appendChild(this.scrollbarXRail),this.scrollbarX=Ir($.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",s),this.event.bind(this.scrollbarX,"blur",o),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var l=ze(this.scrollbarXRail);this.scrollbarXBottom=parseInt(l.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=z(l.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=z(l.borderLeftWidth)+z(l.borderRightWidth),ue(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=z(l.marginLeft)+z(l.marginRight),ue(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=Ir($.element.rail("y")),e.appendChild(this.scrollbarYRail),this.scrollbarY=Ir($.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",s),this.event.bind(this.scrollbarY,"blur",o),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var a=ze(this.scrollbarYRail);this.scrollbarYRight=parseInt(a.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=z(a.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?bx(this.scrollbarY):null,this.railBorderYWidth=z(a.borderTopWidth)+z(a.borderBottomWidth),ue(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=z(a.marginTop)+z(a.marginBottom),ue(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:e.scrollLeft<=0?"start":e.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:e.scrollTop<=0?"start":e.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(c){return Cx[c](r)}),this.lastScrollTop=Math.floor(e.scrollTop),this.lastScrollLeft=e.scrollLeft,this.event.bind(this.element,"scroll",function(c){return r.onScroll(c)}),qe(this)};Sr.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,ue(this.scrollbarXRail,{display:"block"}),ue(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=z(ze(this.scrollbarXRail).marginLeft)+z(ze(this.scrollbarXRail).marginRight),this.railYMarginHeight=z(ze(this.scrollbarYRail).marginTop)+z(ze(this.scrollbarYRail).marginBottom),ue(this.scrollbarXRail,{display:"none"}),ue(this.scrollbarYRail,{display:"none"}),qe(this),Ti(this,"top",0,!1,!0),Ti(this,"left",0,!1,!0),ue(this.scrollbarXRail,{display:""}),ue(this.scrollbarYRail,{display:""}))};Sr.prototype.onScroll=function(e){this.isAlive&&(qe(this),Ti(this,"top",this.element.scrollTop-this.lastScrollTop),Ti(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)};Sr.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),an(this.scrollbarX),an(this.scrollbarY),an(this.scrollbarXRail),an(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)};Sr.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(e){return!e.match(/^ps([-_].+|)$/)}).join(" ")};function vt(t){let e=parseFloat(getComputedStyle(t).gap),n=[...t.childNodes].filter(i=>i.nodeType===1),r=getComputedStyle(t).gridTemplateColumns.split(" ").length;n.forEach(i=>i.style.removeProperty("margin-top")),r!==1&&n.forEach(function(i,s){let o=n[s-r];if(!o)return;let l=i.getBoundingClientRect().top,a=o.getBoundingClientRect().bottom,c=l-a;c!==e&&(i.style.marginTop=`-${c-e}px`)})}function Tx(t){t.directive("masonry",(e,{modifiers:n},{cleanup:r})=>{let i=n[0],s=n[1]||2500;i==="wait"?setTimeout(()=>vt(e),s):vt(e),i==="poll"&&setInterval(()=>vt(e),s),window.addEventListener("resize",()=>vt(e)),window.addEventListener("reload:masonry",()=>vt(e)),r(()=>{window.removeEventListener("resize",vt),window.addEventListener("reload:masonry",vt)})})}var Ox=Tx;window.PerfectScrollbar=Sr;document.addEventListener("alpine:init",()=>{lt.store("accordion",{tab:0}),lt.data("accordion",t=>({init(){this.idx=t},idx:-1,handleClick(){this.$store.accordion.tab=this.$store.accordion.tab===this.idx?0:this.idx},handleRotate(){return this.$store.accordion.tab===this.idx?"-rotate-180":""},handleToggle(){return this.$store.accordion.tab===this.idx?`max-height: ${this.$refs.tab.scrollHeight}px`:""}})),lt.data("tiptap",d1),lt.data("mainState",()=>{let t=0;const e=function(){window.addEventListener("scroll",()=>{let i=window.pageYOffset||document.documentElement.scrollTop;i>t?(this.scrollingDown=!0,this.scrollingUp=!1):(this.scrollingDown=!1,this.scrollingUp=!0,i==0&&(this.scrollingDown=!1,this.scrollingUp=!1)),t=i<=0?0:i})},n=()=>window.localStorage.getItem("dark")?JSON.parse(window.localStorage.getItem("dark")):!!window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,r=i=>{window.localStorage.setItem("dark",i)};return{init:e,isDarkMode:n(),toggleTheme(){this.isDarkMode=!this.isDarkMode,r(this.isDarkMode)},isSidebarOpen:window.innerWidth>1024,isSidebarHovered:!1,handleSidebarHover(i){window.innerWidth<1024||(this.isSidebarHovered=i)},handleWindowResize(){window.innerWidth<=1024?this.isSidebarOpen=!1:this.isSidebarOpen=!0},scrollingDown:!1,scrollingUp:!1}})});window.Alpine=lt;lt.plugin(Ox);lt.plugin(px);lt.start();
